This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
config/
  passport/
    passport.js
  config.json
  mail.js
controllers/
  admin/
    admin.js
  portal/
    aplinova.js
  usuario.js
db/
  connection.js
locales/
  en.js
  es.js
  pt.js
middlewares/
  categoriaDestroyValidation.js
  formsValidation.js
  httpToHttps.js
  httpverb.js
  isValidUser.js
  languageSelection.js
migrations/
  20200418162156-create-user.js
  20200428205224-create-produto.js
  20200429021934-create-header.js
  20200429034543-create-categoria.js
  20200429034626-create-produto-categoria.js
  20200525234934-useraddcolumnactiverole.js
  20200527042447-create-forgotcode.js
  20200830201618-produtoaddcolumnengesp.js
  20200830202532-headeraddcolumnengesp.js
  20200830202942-categoriaaddcolumnengesp.js
models/
  categoria.js
  forgotcode.js
  header.js
  index.js
  produto.js
  user.js
public/
  img/
    icons/
      browserconfig.xml
      manifest.json
    Bolota_timeline.svg
    icon-player.svg
    icon-produtos.svg
    logo-dark.svg
    logo-light.svg
  javascript/
    admin/
      cards.js
      header.js
      index.js
      newCategoria.js
      newProduto.js
      search.js
      treeview.js
      userconfig.js
    portal/
      contato.js
      navbar.js
    usuario/
      forgot.js
      reset.js
      singup.js
  stylesheets/
    admin/
      cards.css
      index.css
      treeview.css
      userconfig.css
    components/
      banner.css
      button.css
      carrousel.css
      categoria-item.css
      footer.css
      home-company.css
      home-introduction.css
      home-partners.css
      navbar.css
      produto-card.css
      subcategoria-item.css
    portal/
      contato.css
      empresa.css
      index.css
      produto-view.css
    usuarios/
      login.css
routes/
  admin/
    admin.js
  portal/
    aplinova.js
  usuario.js
seeders/
  20200517215303-users-seed.js
views/
  admin/
    cards.ejs
    footer.ejs
    header.ejs
    index.ejs
    menulateral.ejs
    newcategoria.ejs
    newProduto.ejs
    userconfig.ejs
  portal/
    produtos/
      aromas.ejs
      corantes.ejs
      foodservice.ejs
      ingredientesfuncionais.ejs
      produtosnaturais.ejs
      produtosveganos.ejs
      proteinas.ejs
      revconfeitaria.ejs
      subacucarfibras.ejs
    banner.ejs
    card.ejs
    carrousel.ejs
    categoria-item.ejs
    contato.ejs
    footer.ejs
    header.ejs
    home-company.ejs
    home-introduction.ejs
    home-partners.ejs
    index.ejs
    nossaempresa.ejs
    subcategoria-item.ejs
    timeline-item.ejs
  usuarios/
    footer.ejs
    forgot.ejs
    header.ejs
    login.ejs
    reset.ejs
    signin.ejs
.gitignore
.sequelizerc
.tern-project
app.js
package.json
schema
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="config/passport/passport.js">
/**
 * Lógica de autenticação por passport. Pacote passaport com a estratégia de passport-local
 * Author: Daniel
 * OBS:
 * Passport possui vários tipos de autenticações. Podemos escolher logar pelas mídias sociais ou por email
 * basta importar a estratégia adequada para o objetivo.
 * passport trabalha com a estratégia de middlewares
 * https://www.npmjs.com/package/passport
 */
const bcrypt = require('bcrypt-nodejs');

module.exports = function(passport, user){
    var User = user;
    var LocalStrategy = require('passport-local').Strategy;

    //Passport local-signup
    passport.use('local-signup', new LocalStrategy({
        usernameField: 'email',
        passwordField: 'password',
        passReqToCallback: true
    },
    function(req, email, password, done){

        var generateHash = function(password){
            return bcrypt.hashSync(password, bcrypt.genSaltSync(8), null);
        }

        User.findOne({where:{email: email}})
        .then(function(user){
            if(user){
                return done(null, false, {
                    message: "The email is already taken"
                })
            }else{
                var userPassword = generateHash(password);
                var data = {
                    email: email,
                    password: userPassword,
                    firstName: req.body.firstname,
                    lastName: req.body.lastname,
                    username: req.body.username,
                    admin: 0,
                    active: 0,
                    role: "visitante"
                };
            
                User.create(data)
                .then(function(newUser){
                    if(!newUser){
                        return done(null, false);
                    }
                    if(newUser){
                        return done(null, newUser);
                    }
                });
            }
        });

    }));

    //Necessário serializar e deserializar
    passport.serializeUser(function(user, done){
        done(null, user.id);
    });

    passport.deserializeUser(function(id, done){
        User.findByPk(id)
        .then(function(user){
            if(user){
                done(null, user.get);
            }else{
                done(user.errors, null);
            }
        });
    });

    passport.use('local-signin', new LocalStrategy({
        usernameField: 'email',
        passwordField: 'password',
        passReqToCallback: true
    },
    function(req, email, password, done){
        var User = user;
        var isValidPassword = function(userpass, password){
            return bcrypt.compareSync(password, userpass);
        }

        //Tentar achar um email
        User.findOne({where:{email:email}})
        .then(function(user){
            if(!user){
                return done(null, false, {
                    message: 'Email does not exist!'
                });
            }

            if(!user.active){
                return done(null, false, {
                    message: 'This user is not ready!'
                })
            }

            if(!isValidPassword(user.password, password)){
                return done(null, false, {
                    message: 'Incorrect password'
                });
            }

            var userInfo = user.get();
            return done(null, userInfo);
        })
        .catch(function(erro){
            console.log(erro);
            return done(null, false, {
                message: "Something went wrong with your login"
            });
        })
    }));

}
</file>

<file path="config/config.json">
{
  "development": {
    "username": "root",
    "password": "123456",
    "database": "aplinova_dev",
    "host": "localhost",
    "dialect": "mysql",
    "operatorsAliases": 0,
    "timezone": "-03:00"
  },
  "test": {
    "username": "root",
    "password": "123456",
    "database": "aplinova_test",
    "host": "localhost",
    "dialect": "mysql",
    "operatorsAliases": 0,
    "timezone": "-03:00"
  },
  "production": {
    "username": "b67ef1e7b50491",
    "password": "805a1183",
    "database": "heroku_9f24e65592f2d8e",
    "host": "us-cdbr-east-06.cleardb.net",
    "dialect": "mysql",
    "operatorsAliases": 0,
    "timezone": "-03:00"
  }
}
</file>

<file path="db/connection.js">
/**
 * Description: Módulo de conexão com banco de dados
 * Author: Daniel
 */

//importando .env
require('dotenv').config();
const configDb = require('../config/config.json');
var dbConnection = '';
const Sequelize = require('sequelize');

switch(process.env.NODE_ENV){
    case 'development':
        dbConnection = configDb.development;
        break;
    case 'production':
        dbConnection = configDb.production;
        break;
    default:
        dbConnection = configDb.production;
}

exports.bdConnection=(req, res, next)=>{
    const sequelize = new Sequelize(dbConnection.database, dbConnection.username, dbConnection.password, {
        host: dbConnection.host,
        dialect: dbConnection.dialect
    });
    sequelize.authenticate()
    .then(function(auth){
        console.log("Esta conectado");
    })
    .catch(function(error){
        console.log('Erro na conexao: ' + error);
    });

    return sequelize;
}
</file>

<file path="middlewares/httpverb.js">
/**
 * Description: Middleware para tratamento de requisicoes put & delete
 * Author: Daniel
 */
//Funcao que tratam os verbos http delete e put (patch)
exports.verbTreat = (req, res, next)=>{
    //Delete
    if(req.method === 'GET' && req.query.method){
        req.method = req.query.method
    }
    //Patch
    if(req.method === 'POST' && req.body.method){
        req.method = req.body.method
    }
    next();
}
</file>

<file path="middlewares/isValidUser.js">
/**
 * Description: Middleware que verifica se o usuario esta logado
 * Author: Daniel
 */

 //Funcao que verifica se o usuario esta logado
exports.isValid = (req, res, next)=>{
    if(req.isAuthenticated()){
        return next();
    }
    res.redirect('/login/show');
}
</file>

<file path="migrations/20200418162156-create-user.js">
'use strict';
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.createTable('Users', {
      id: {
        allowNull: false,
        autoIncrement: true,
        primaryKey: true,
        type: Sequelize.INTEGER
      },
      firstName: {
        type: Sequelize.STRING,
        allowNull: false
      },
      lastName: {
        type: Sequelize.STRING,
        allowNull: false
      },
      admin: {
        type: Sequelize.BOOLEAN,
        defaultValue: 0
      },
      username: {
        type: Sequelize.STRING
      },
      password: {
        type: Sequelize.STRING,
        allowNull: false
      },
      email:{
        type: Sequelize.STRING,
        allowNull: false,
        unique: true
      },
      createdAt: {
        allowNull: false,
        type: Sequelize.DATE,
        defaultValue: new Date()
      },
      updatedAt: {
        allowNull: false,
        type: Sequelize.DATE,
        defaultValue: new Date()
      }
    });
  },
  down: (queryInterface, Sequelize) => {
    return queryInterface.dropTable('Users');
  }
};
</file>

<file path="migrations/20200428205224-create-produto.js">
'use strict';
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.createTable('Produtos', {
      id: {
        allowNull: false,
        autoIncrement: true,
        primaryKey: true,
        type: Sequelize.INTEGER
      },
      titulo: {
        type: Sequelize.STRING,
        allowNull: false,
        required: true
      },
      descricao: {
        type: Sequelize.STRING
      }
    });
  },
  down: (queryInterface, Sequelize) => {
    return queryInterface.dropTable('Produtos');
  }
};
</file>

<file path="migrations/20200429021934-create-header.js">
'use strict';
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.createTable('Headers', {
      id: {
        allowNull: false,
        autoIncrement: true,
        primaryKey: true,
        type: Sequelize.INTEGER
      },
      titulo: {
        type: Sequelize.STRING,
        allowNull: false,
        required: true,
      },
      descricao: {
        type: Sequelize.STRING
      },
      categoriaId:{
        type: Sequelize.INTEGER
      }
    });
  },
  down: (queryInterface, Sequelize) => {
    return queryInterface.dropTable('Headers');
  }
};
</file>

<file path="migrations/20200429034543-create-categoria.js">
'use strict';
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.createTable('Categoria', {
      id: {
        allowNull: false,
        autoIncrement: true,
        primaryKey: true,
        type: Sequelize.INTEGER
      },
      titulo: {
        type: Sequelize.STRING,
        allowNull: false,
        required: true
      },
      descricao: {
        type: Sequelize.STRING,
        allowNull: false
      },
      idCategoria: {
        type: Sequelize.INTEGER,
        allowNull: false,
        required: true,
      },
      idCategoriaPai: {
        type: Sequelize.INTEGER,
        allowNull: false,
        required: true
      }
    });
  },
  down: (queryInterface, Sequelize) => {
    return queryInterface.dropTable('Categoria');
  }
};
</file>

<file path="migrations/20200429034626-create-produto-categoria.js">
'use strict';
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.createTable('ProdutoCategoria', {
      id: {
        allowNull: false,
        autoIncrement: true,
        primaryKey: true,
        type: Sequelize.INTEGER
      },
      produtoId: {
        type: Sequelize.INTEGER,
        allowNull:false,
        references:{ //n:n
          model:'Produtos',
          key: 'id'
        },
        onDelete: "CASCADE"
      },
      categoriaId: {
        type: Sequelize.INTEGER,
        allowNull:false,
        references:{ //n:n
          model:'Categoria',
          key: 'id'
        },
        onDelete: "CASCADE"
      },
      createdAt: {
        allowNull: false,
        type: Sequelize.DATE,
        defaultValue: new Date()
      },
      updatedAt: {
        allowNull: false,
        type: Sequelize.DATE,
        defaultValue: new Date()
      }
    });
  },
  down: (queryInterface, Sequelize) => {
    return queryInterface.dropTable('ProdutoCategoria');
  }
};
</file>

<file path="migrations/20200525234934-useraddcolumnactiverole.js">
'use strict';

module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.addColumn('Users', 'active', {
          type: Sequelize.DataTypes.BOOLEAN,
          defaultValue: 0
        }, {transaction: t}),
        queryInterface.addColumn('Users', 'role', {
          type: Sequelize.DataTypes.STRING,
          allowNull: true
        }, {transaction: t})
      ])
    })
  },

  down: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.removeColumn('Users', 'active', {transaction: t}),
        queryInterface.removeColumn('Users', 'role', {transaction: t})
      ])
    })
  }
};
</file>

<file path="migrations/20200527042447-create-forgotcode.js">
'use strict';
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.createTable('Forgotcodes', {
      id: {
        allowNull: false,
        autoIncrement: true,
        primaryKey: true,
        type: Sequelize.INTEGER
      },
      codigo: {
        type: Sequelize.STRING
      },
      active: {
        type: Sequelize.BOOLEAN,
        allowNull:false,
        defaultValue: 0
      },
      userId:{
        type: Sequelize.INTEGER
      }
    });
  },
  down: (queryInterface, Sequelize) => {
    return queryInterface.dropTable('Forgotcodes');
  }
};
</file>

<file path="models/forgotcode.js">
'use strict';
module.exports = (sequelize, DataTypes) => {
  const Forgotcode = sequelize.define('Forgotcode', {
    codigo: DataTypes.STRING,
    active: DataTypes.BOOLEAN
  }, {timestamps: false});
  Forgotcode.associate = function(models) {
    Forgotcode.belongsTo(models.User)
  };
  return Forgotcode;
};
</file>

<file path="models/index.js">
'use strict';

const fs = require('fs');
const path = require('path');
const Sequelize = require('sequelize');
const basename = path.basename(__filename);
const env = process.env.NODE_ENV || 'development';
const config = require(__dirname + '/../config/config.json')[env];
const db = {};

let sequelize;
if (config.use_env_variable) {
  sequelize = new Sequelize(process.env[config.use_env_variable], config);
} else {
  sequelize = new Sequelize(config.database, config.username, config.password, config);
}

fs
  .readdirSync(__dirname)
  .filter(file => {
    return (file.indexOf('.') !== 0) && (file !== basename) && (file.slice(-3) === '.js');
  })
  .forEach(file => {
    const model = sequelize['import'](path.join(__dirname, file));
    db[model.name] = model;
  });

Object.keys(db).forEach(modelName => {
  if (db[modelName].associate) {
    db[modelName].associate(db);
  }
});

db.sequelize = sequelize;
db.Sequelize = Sequelize;

module.exports = db;
</file>

<file path="models/user.js">
'use strict';
module.exports = (sequelize, DataTypes) => {
  const User = sequelize.define('User', {
    firstName: DataTypes.STRING,
    lastName: DataTypes.STRING,
    admin: DataTypes.BOOLEAN,
    username: DataTypes.STRING,
    password: DataTypes.STRING,
    email:DataTypes.STRING,
    active:DataTypes.BOOLEAN,
    role:DataTypes.STRING
  }, {});
  User.associate = function(models) {
    User.hasMany(models.Forgotcode, {foreignKey: "userId", onDelete:"CASCADE"});
  };
  return User;
};
</file>

<file path="public/img/icon-produtos.svg">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 24.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 253 259" style="enable-background:new 0 0 253 259;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#85B439;}
	.st1{fill:#6DB525;}
</style>
<g>
	<path class="st0" d="M126.65,248.82c-65.3,0-118.42-53.12-118.42-118.41S61.36,12,126.65,12c65.29,0,118.4,53.12,118.4,118.41
		S191.94,248.82,126.65,248.82z M126.65,36.32c-51.89,0-94.1,42.21-94.1,94.09s42.21,94.09,94.1,94.09
		c51.88,0,94.08-42.21,94.08-94.09S178.53,36.32,126.65,36.32z"/>
</g>
<g>
	<path class="st1" d="M111.51,202.78l-17.19-17.19l54.07-54.06L93,74.57l17.43-16.96l63.74,65.55c4.64,4.77,4.58,12.37-0.12,17.08
		L111.51,202.78z"/>
</g>
</svg>
</file>

<file path="public/img/logo-dark.svg">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 24.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1216.7 327.6" style="enable-background:new 0 0 1216.7 327.6;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#2F2925;}
	.st1{fill:#87B639;}
	.st2{fill-rule:evenodd;clip-rule:evenodd;fill:#FF020C;}
</style>
<g>
	<path class="st0" d="M428.5,116.7c10.2,8.5,15.3,21.7,15.3,39.4s-5.2,30.8-15.6,39c-10.4,8.2-26.4,12.4-47.9,12.4h-26v43h-24.7V104
		h50.3C402.1,104,418.3,108.2,428.5,116.7z M411,177.2c5-5.2,7.4-12.9,7.4-23.1c0-10.1-3.1-17.3-9.4-21.5
		c-6.3-4.2-16.1-6.3-29.6-6.3h-25.2v58.7H383C396.7,185.1,406,182.5,411,177.2z"/>
	<path class="st0" d="M462.5,250.5V104h24.7v123h66.9v23.5H462.5z"/>
	<path class="st0" d="M570.6,104h24.7v146.5h-24.7V104z"/>
	<path class="st0" d="M735.5,103.9h24.7v146.5h-26.8l-83-106.9v106.9h-24.7V103.9h24.7l85.1,109.4L735.5,103.9L735.5,103.9z"/>
	<path class="st0" d="M1024.1,250.5h-27.7l-58.9-146.5h27.7l45.1,109.4l45.1-109.4h27.7L1024.1,250.5z"/>
	<path class="st0" d="M1123.7,103.9h27.7l58.9,146.5h-27.7l-45.1-109.4l-45.1,109.4h-27.7L1123.7,103.9z"/>
	<path class="st0" d="M933.3,170.2c-1.4-17.9-8.5-33-21.2-45.4c-14.3-14-32.1-21-53.2-21s-38.8,7-53.2,21
		c-14.3,14-21.5,31.5-21.5,52.4c0,20.1,6.7,37,19.9,50.7c0.5,0.5,1,1.1,1.6,1.6c14.3,14,32.1,21,53.2,21c21.1,0,38.8-7,53.2-21
		c14.3-14,21.5-31.5,21.5-52.4C933.6,174.8,933.5,172.5,933.3,170.2z M894.5,213.5c-9.7,10-21.5,15-35.6,15
		c-8.6,0-16.5-1.9-23.4-5.7c-4.4-2.4-8.4-5.5-12.2-9.3c-9.7-10-14.5-22.1-14.5-36.4c0-14.3,4.8-26.4,14.5-36.4
		c9.7-10,21.5-15,35.6-15s25.9,5,35.6,15c9.6,9.9,14.4,22,14.5,36.1c0,0.1,0,0.2,0,0.3C909,191.4,904.2,203.5,894.5,213.5z"/>
	<path class="st0" d="M227.3,104H255l58.9,146.5h-27.7l-45.1-109.4l-45.1,109.4h-27.7L227.3,104z"/>
	<path class="st1" d="M897.5,175c-2,0.5-4,1.1-5.9,1.8c-2,0.7-3.9,1.5-5.8,2.5c-2.9,1.5-5.6,3.2-8.3,5c-3.3,2.2-6.4,4.6-9.6,7
		c-2.8,2.1-5.6,4.3-8.5,6.4c-1.8,1.3-3.7,2.6-5.7,3.8c-1.6,1-3.3,1.9-5.1,2.6c-0.7,0.3-1.4,0.6-2.2,0.9c-1.6,0.6-3.3,1.2-5,1.7
		c-5.2,1.5-10.5,2.2-15.8,1.9c11,13.7,31.5,18.9,50.8,11.6c20.8-7.9,29.5-27.3,26.3-46.1C901.9,174,899.5,174.5,897.5,175z"/>
	<path class="st2" d="M569.7,291.2c0-3.5,0.1-7,0-10.5c0-1.5,0.5-1.9,1.9-1.9c7.2,0.1,14.3,0.1,21.5,0c1.3,0,1.8,0.2,1.8,1.7
		c-0.1,7.2-0.1,14.4,0,21.7c0,1.3-0.5,1.6-1.7,1.6c-7.2,0-14.5-0.1-21.7,0c-1.6,0-1.8-0.6-1.8-2
		C569.8,298.4,569.7,294.8,569.7,291.2z"/>
	<path class="st0" d="M6.3,165.5c0,69.3,45.2,132.6,110.5,155.2c-6.6-15.5-10.8-32.1-12.8-50.5c-0.3-2.7-0.5-5.4-0.6-8.1
		C69.9,234.6,50.8,191.6,50.8,144c0-21.7,4-43.3,11.9-64.1c10.8-28.3,28.2-51.8,50.6-68.6C49.7,34.9,6.3,96.5,6.3,165.5z"/>
	<path class="st1" d="M112.5,194c3.3-11.1,7.1-22.3,10.7-33.1l1.7-5.1c5-14.9,9.5-28.4,13.3-42.5c3.6-13.3,5.8-24.4,7.1-34.9
		c0.9-7.5,1.2-15.2,1.1-22.9c-0.2-7.2-0.8-14.8-1.9-22.5c-1-7.3-2.5-14.9-4.4-22.5c-0.4-1.7-0.9-3.3-1.3-5
		c-31.3,15.6-54.9,42.3-68.2,77.3C63,102.7,59.1,123.3,59.1,144c0,42.2,15.9,80.8,43.9,106.8l0-1.1c0-2,0.1-3.9,0.2-5.8l0-1
		c0-0.5,0-1.1,0.1-1.7c0.4-7.4,1.4-14.7,2.8-21.8C107.6,211.7,109.6,203.6,112.5,194z"/>
</g>
</svg>
</file>

<file path="public/img/logo-light.svg">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 24.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 1216.7 327.6" style="enable-background:new 0 0 1216.7 327.6;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
	.st1{fill:#78A83B;}
	.st2{fill-rule:evenodd;clip-rule:evenodd;fill:#F5020C;}
</style>
<path class="st0" d="M429.5,117c10.2,8.5,15.3,21.7,15.3,39.4s-5.2,30.8-15.6,39c-10.4,8.2-26.4,12.4-47.9,12.4h-26v43h-24.7V104.2
	h50.3C403,104.2,419.3,108.4,429.5,117z M412,177.4c5-5.2,7.4-12.9,7.4-23.1c0-10.1-3.1-17.3-9.4-21.5c-6.3-4.2-16.1-6.3-29.6-6.3
	h-25.2v58.7H384C397.7,185.3,407,182.7,412,177.4z"/>
<path class="st0" d="M463.4,250.7V104.2h24.7v123.1H555v23.5H463.4z"/>
<path class="st0" d="M571.6,104.2h24.7v146.5h-24.7V104.2z"/>
<path class="st0" d="M736.5,104.2h24.7v146.5h-26.8l-83-106.9v106.9h-24.7V104.2h24.7l85.1,109.4L736.5,104.2L736.5,104.2z"/>
<path class="st0" d="M1025.1,250.7h-27.7l-58.9-146.5h27.7l45.1,109.4l45.1-109.4h27.7L1025.1,250.7z"/>
<path class="st0" d="M1124.6,104.2h27.7l58.9,146.5h-27.7l-45.1-109.4l-45.1,109.4h-27.7L1124.6,104.2z"/>
<path class="st0" d="M934.3,170.4c-1.4-17.9-8.5-33-21.2-45.4c-14.3-14-32.1-21-53.2-21s-38.8,7-53.2,21
	c-14.3,14-21.5,31.5-21.5,52.4c0,20.1,6.7,37,19.9,50.7c0.5,0.5,1,1.1,1.6,1.6c14.3,14,32.1,21,53.2,21c21.1,0,38.8-7,53.2-21
	c14.3-14,21.5-31.5,21.5-52.4C934.6,175,934.5,172.7,934.3,170.4z M895.5,213.8c-9.7,10-21.5,15-35.6,15c-8.6,0-16.5-1.9-23.4-5.7
	c-4.4-2.4-8.4-5.5-12.2-9.3c-9.7-10-14.5-22.1-14.5-36.4c0-14.3,4.8-26.4,14.5-36.4c9.7-10,21.5-15,35.6-15s25.9,5,35.6,15
	c9.6,9.9,14.4,22,14.5,36.1c0,0.1,0,0.2,0,0.3C910,191.6,905.2,203.8,895.5,213.8z"/>
<path class="st0" d="M228.3,104.2H256l58.9,146.5h-27.7l-45.1-109.4l-45.1,109.4h-27.7L228.3,104.2z"/>
<path class="st1" d="M898.4,175.2c-2,0.5-4,1.1-5.9,1.8c-2,0.7-3.9,1.5-5.8,2.5c-2.9,1.5-5.6,3.2-8.3,5c-3.3,2.2-6.4,4.6-9.6,7
	c-2.8,2.1-5.6,4.3-8.5,6.4c-1.8,1.3-3.7,2.6-5.7,3.8c-1.6,1-3.3,1.9-5.1,2.6c-0.7,0.3-1.4,0.6-2.2,0.9c-1.6,0.6-3.3,1.2-5,1.7
	c-5.2,1.5-10.5,2.2-15.8,1.9c11,13.7,31.5,18.9,50.8,11.6c20.8-7.9,29.5-27.3,26.3-46.1C902.8,174.2,900.4,174.7,898.4,175.2z"/>
<path class="st2" d="M570.7,291.4c0-3.5,0.1-7,0-10.5c0-1.5,0.5-1.9,1.9-1.8c7.2,0.1,14.3,0.1,21.5,0c1.3,0,1.8,0.2,1.8,1.7
	c-0.1,7.2-0.1,14.4,0,21.7c0,1.3-0.5,1.6-1.7,1.6c-7.2,0-14.5-0.1-21.7,0c-1.6,0-1.8-0.6-1.8-2C570.7,298.6,570.7,295,570.7,291.4z"
	/>
<path class="st0" d="M7.2,165.7c0,69.3,45.2,132.6,110.5,155.2c-6.6-15.5-10.8-32.1-12.8-50.5c-0.3-2.7-0.5-5.4-0.6-8.1
	c-33.4-27.5-52.5-70.5-52.5-118.1c0-21.7,4-43.3,11.9-64.1c10.8-28.3,28.2-51.8,50.6-68.6C50.7,35.1,7.2,96.7,7.2,165.7z"/>
<path class="st1" d="M113.4,194.2c3.3-11.1,7.1-22.3,10.7-33.1l1.7-5.1c5-14.9,9.5-28.4,13.3-42.5c3.6-13.3,5.8-24.4,7.1-34.9
	c0.9-7.5,1.2-15.2,1.1-22.9c-0.2-7.2-0.8-14.8-1.9-22.5c-1-7.3-2.5-14.9-4.4-22.5c-0.4-1.7-0.9-3.3-1.3-5
	C108.4,21.3,84.8,48,71.5,83.1c-7.6,19.9-11.4,40.5-11.4,61.2c0,42.2,15.9,80.8,43.9,106.8l0-1.1c0-2,0.1-3.9,0.2-5.8l0-1
	c0-0.5,0-1.1,0.1-1.7c0.4-7.4,1.4-14.7,2.8-21.8C108.5,211.9,110.6,203.9,113.4,194.2z"/>
</svg>
</file>

<file path="public/javascript/admin/treeview.js">
const categoria = document.getElementsByClassName('cat');
const subcategoria = document.getElementsByClassName('subcat');
const produto = document.getElementById('prod');
const treeview = document.getElementsByClassName('treeview');

Array.from(categoria).forEach(function(cat){
	cat.addEventListener('click', function(catli){
		if(catli.path !== undefined){
			Array.from(catli.path[2].children).forEach(el=>{
				if(el.localName === "ul" && el.classList[0] !== "treeview"){
					el.classList.toggle('notativo');
				};
			});
		}else{
			Array.from(catli.target.parentElement.parentElement.children).forEach(el=>{
				if(el.localName === "ul" && el.classList[0] !== "treeview"){
					el.classList.toggle('notativo');
				};
			});
		}
	});
});

Array.from(subcategoria).forEach(function(sub){
		sub.addEventListener('click', function(subli){
			//catli.srcElement.offsetParent.children[0].children[0].children
			if(subli.path !== undefined){
				Array.from(subli.path[2].children).forEach(el=>{
					if(el.localName === "ul" && el.classList[0] !== "treeview"){
						el.classList.toggle('notativo');
					}
				})
			}else{
				Array.from(subli.target.parentElement.parentElement.children).forEach(el=>{
					if(el.localName === "ul"){
						el.classList.toggle('notativo');
					}
				})
			}
		})
});
</file>

<file path="public/javascript/usuario/forgot.js">
const enviar = document.getElementById('enviar');
const email = document.getElementById('email');

enviar.addEventListener('click', function(event){
    if(enviar.getAttribute('disable') === true){
        alert("Aguarde o sistema processar");
    }
    setTimeout(function(){
        if(email.value !== ""){
            enviar.classList.add("btn-cadastrar");
            enviar.setAttribute('disabled', true);
            setTimeout(function(){
                enviar.removeAttribute('disabled');
                enviar.classList.remove('btn-cadastrar');
            }, 60000)
        }
    }, 1500)
})
</file>

<file path="public/javascript/usuario/reset.js">
const reset = document.getElementById('reset');
const email = document.getElementById('email');

reset.addEventListener('click', function(event){
    if(reset.getAttribute('disable') === true){
        alert("Aguarde o sistema processar");
    }
    setTimeout(function(){
        if(email.value !== ""){
            reset.classList.add("btn-cadastrar");
            reset.setAttribute('disabled', true);
            setTimeout(function(){
                reset.removeAttribute('disabled');
                reset.classList.remove('btn-cadastrar');
            }, 60000)
        }
    }, 1500)
})
</file>

<file path="public/javascript/usuario/singup.js">
/**
 * Description: Javascript para validacao do singup
 * Author: Findi
 */
//Declaracao
const cadastrar = document.getElementById('cadastrar');
//formulario
const firstname = document.getElementById('firstname');
const lastname = document.getElementById('lastname');
const username = document.getElementById('username');
const email = document.getElementById('email');
const password = document.getElementById('password');

//Validacao do campo username
firstname.addEventListener('change', function(e){
    if(username.value === ""){
        username.value = firstname.value;
    }else{
        if(firstname.value === ""){
            username.value - lastname.value;
        }else{
            username.value = `${firstname.value}.${lastname.value}`
        }
    }
})

//Validacao do campo username
lastname.addEventListener('change', function(e){
    if(username.value === ""){
        username.value = lastname.value;
    }else{
        if(lastname.value === ""){
            username.value - firstname.value;
        }else{
            username.value += "." + lastname.value;
        }
    }
})

//Desabilita o botao cadastrar 1,5 seg apos clicar
cadastrar.addEventListener('click', function(event){
    if(cadastrar.getAttribute('disable') === true){
        alert("Aguarde o sistema processar");
    }
    setTimeout(function(){
        if(email.value !== "" && firstname.value !== "" && lastname.value !== "" && username.value !== "" && password.value !== ""){
            cadastrar.classList.add("btn-cadastrar");
            cadastrar.setAttribute('disabled', true);
            setTimeout(function(){
                cadastrar.removeAttribute('disabled');
                cadastrar.classList.remove('btn-cadastrar');
            }, 60000)
        }
    }, 1500)
})
</file>

<file path="public/stylesheets/usuarios/login.css">
* {
    font-family: Arial, Verdana, sans-serif;
    margin: 0px;
    padding: 0px;
    text-decoration: none;
    list-style: none;
    -webkit-tap-highlight-color: transparent;
}

*::selection {
    background-color: #2b71c05b;
}


body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    background: white !important;
    overflow-x: hidden;
    min-height: 100%;
    user-select: none;
}

.user_card {
    /* height: 400px; */
    width: 350px;
    margin-top: auto;
    margin-bottom: auto;
    background: #292828;
    position: relative;
    display: flex;
    justify-content: center;
    flex-direction: column;
    padding: 10px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -webkit-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -moz-box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    border-radius: 5px;

}
/*  */
.brand_logo {
    height: 150px;
    width: 150px;
    border-radius: 50%;
    border: 2px solid white;
}
.form_container {
    margin-top: 30px;
}

i{
  margin-top: 10px;
  color: white;
}

.logo {
    width: 40px;
}

.login_btn {
    width: 100%;
    background: black !important;
    color: white !important;
}

.login_btn:hover {
    background: #88B73A !important;
    color: white !important;
    box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -webkit-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -moz-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.login_btn:active {
    width: 100%;
    background: #353535 !important;
    color: white !important;
}

.login_btn:focus {
    box-shadow: none !important;
    outline: 0px !important;
}

.input-group-text {
    background:black !important;
    color: white !important;
    border: 0 !important;
    border-radius: 0.25rem 0 0 0.25rem !important;
}

.input_user,
.input_pass:focus {
    box-shadow: none !important;
    outline: 0px !important;
}


.custom-checkbox .custom-control-input:checked~.custom-control-label::before {
    background-color: #88B73A !important;
}

.groupe-liens {
    margin-top: 15px;
}

.liens {
    color: #88B73A;
}

.liens:hover {
    color:white;
}

.btn-cadastrar:disabled{
    background-color: lightgray;
    border: 1px solid lightgray;
}

.btn-cadastrar:disabled:hover{
    background-color: lightgray;
    border: 1px solid lightgray;
}
</file>

<file path="routes/usuario.js">
/**
 * middleware das rotas
 */
const express = require('express');
const {login, newUser, sendemail, forgot, createForgot, forgotReset, reset} = require('../controllers/usuario.js');
const passport = require('passport');
const {forgotLoginValidation, forgotValidation, forgotResetValidation, resetFormValidation, singupFormValidation} = require('../middlewares/formsValidation');

const routes = express.Router();

routes.get('/show', login);
routes.post('/send', forgotLoginValidation, passport.authenticate('local-signin', {
    successRedirect: '/admin',
    failureRedirect: '/login/show',
    failureFlash: true
}))
routes.get('/sendemail', sendemail);
routes.get('/signin', newUser);
routes.post('/signup', singupFormValidation, passport.authenticate('local-signup', {
    successRedirect: '/login/sendemail',
    failureRedirect: '/login/signin',
    failureFlash: true
}));
routes.get('/forgot', forgot);
routes.post('/forgot', forgotValidation, createForgot);
routes.get('/forgot/reset', forgotReset);
routes.patch('/forgot/reset', resetFormValidation, forgotResetValidation, reset);

module.exports = routes;
</file>

<file path="views/admin/footer.ejs">
</div>
    </main>
        <script src="../../public/javascript/admin/index.js"></script>
        <script src="../../public/javascript/admin/search.js"></script>
        <script src='//production-assets.codepen.io/assets/common/stopExecutionOnTimeout-b2a7b3fe212eaa732349046d8416e00a9dec26eb7fd347590fbced3ab38af52e.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
        <script src='https://use.fontawesome.com/2188c74ac9.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js'></script>
        <!--BOOTSTRAP NORMAL-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </body>
</html>
</file>

<file path="views/admin/index.ejs">
<%- include('./header') %>
<%- include('./cards')%>
    <script src="../../public/javascript/admin/cards.js"></script>
    <script src="../../public/javascript/admin/treeview.js"></script>
<%- include('./footer') %>
</file>

<file path="views/portal/categoria-item.ejs">
<div class="categoria-item">
  <img class="categoria-item__icon" src="./public/img/icon-produtos.svg" alt="Item" />
  <div class="categoria-item__text">
    <%= itemName %>
  </div>
</div>
</file>

<file path="views/usuarios/footer.ejs">
</div>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  </body>
</html>
</file>

<file path="views/usuarios/header.ejs">
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://kit.fontawesome.com/3bb5488a16.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/stylesheets/usuarios/login.css">
    <meta charset="utf-8">
    <title></title>
  </head>
  <body style="width:100%; padding:0; margin:0;">
    <div class="container h-100">
      <div class="d-flex justify-content-center h-100">
</file>

<file path="views/usuarios/login.ejs">
<%- include('./header') %>
<div class="user_card">
  <div class="d-flex justify-content-center">
    <i class="fas fa-user fa-6x"></i>
  </div>
  <div class="d-flex justify-content-center form_container">
    <form action="/login/send" method='post'>
      <div class="input-group mb-3">
        <div class="input-group-append">
          <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
        </div>
        <input type="email" name="email" class="form-control input_user" value="" placeholder="email" spellcheck="false" required>
      </div>
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <span class="input-group-text logo" id="basic-addon1"><i class="fas fa-key" style="margin: 0; padding: 0;"></i></span>
        </div>
        <input type="password" name="password" class="form-control input_pass" value="" placeholder="password" spellcheck="false" aria-label="password" aria-describedby="basic-addon1">
      </div>
      <%if(error){%>
        <div><span style="color: red;"><%=error%></span></div>
      <%}%>
      <%if(envio){%>
        <div><span style="color: red;"><%=envio%></span></div>
      <%}%>
      <div class="d-flex justify-content-center mt-3 login_container">
        <button type="submit" name="button" class="btn login_btn">Login</button>
      </div>
    </form>
  </div>
  <div class="mt-4 groupe-liens">
    <div class="d-flex justify-content-center links">
      <span style="color:white;">Don't have an account?</span> <a href="/login/signin" class="ml-2 liens">Sign Up</a>
    </div>
    <div class="d-flex justify-content-center links">
      <a href="/login/forgot" class="liens">Forgot your password?</a>
      </div>
  </div>
</div>
<%- include('./footer') %>
</file>

<file path=".gitignore">
node_modules
.env
</file>

<file path=".sequelizerc">
const path = require('path');

module.exports = {
  'config': path.resolve('config', 'config.json'),
  'models-path': path.resolve('models'),
  'seeders-path': path.resolve('seeders'),
  'migrations-path': path.resolve('migrations')
};
</file>

<file path=".tern-project">
{
  "ecmaVersion": "6",
  "libs": [
    "jquery",
    "browser"
  ],
  "loadEagerly": [],
  "dontLoad": [
    "node_modules/**"
  ],
  "plugins": {
    "doc_comment": true,
    "node": {
      "dontLoad": "",
      "load": "",
      "modules": ""
    },
    "modules": {
      "dontLoad": "",
      "load": "",
      "modules": ""
    }
  }
}
</file>

<file path="schema">
<?xml version="1.0" encoding="utf-8" ?>
<!-- SQL XML created by WWW SQL Designer, https://github.com/ondras/wwwsqldesigner/ -->
<!-- Active URL: https://kitt.lewagon.com/db/6214 -->
<sql>
<datatypes db="mysql">
  <group label="Numeric" color="rgb(238,238,170)">
    <type label="Integer" length="0" sql="INTEGER" re="INT" quote=""/>
    <type label="Small Integer" length="0" sql="SMALLINT" quote=""/>
    <type label="Big Integer" length="0" sql="BIGINT" quote=""/>
    <type label="Decimal" length="1" sql="DECIMAL" re="numeric" quote=""/>
    <type label="Serial" length="0" sql="SERIAL" re="SERIAL4" fk="Integer" quote=""/>
    <type label="Big Serial" length="0" sql="BIGSERIAL" re="SERIAL8" fk="Big Integer" quote=""/>
    <type label="Real" length="0" sql="BIGINT" quote=""/>
    <type label="Single precision" length="0" sql="FLOAT" quote=""/>
    <type label="Double precision" length="0" sql="DOUBLE" re="DOUBLE" quote=""/>
  </group>

  <group label="Character" color="rgb(255,200,200)">
    <type label="Char" length="1" sql="CHAR" quote="'"/>
    <type label="Varchar" length="1" sql="VARCHAR" re="CHARACTER VARYING" quote="'"/>
    <type label="Text" length="0" sql="TEXT" quote="'"/>
    <type label="Binary" length="1" sql="BYTEA" quote="'"/>
    <type label="Boolean" length="0" sql="BOOLEAN" quote="'"/>
  </group>

  <group label="Date &amp; Time" color="rgb(200,255,200)">
    <type label="Date" length="0" sql="DATE" quote="'"/>
    <type label="Time" length="1" sql="TIME" quote="'"/>
    <type label="Time w/ TZ" length="0" sql="TIME WITH TIME ZONE" quote="'"/>
    <type label="Interval" length="1" sql="INTERVAL" quote="'"/>
    <type label="Timestamp" length="1" sql="TIMESTAMP" quote="'"/>
    <type label="Timestamp w/ TZ" length="0" sql="TIMESTAMP WITH TIME ZONE" quote="'"/>
    <type label="Timestamp wo/ TZ" length="0" sql="TIMESTAMP WITHOUT TIME ZONE" quote="'"/>
  </group>

  <group label="Miscellaneous" color="rgb(200,200,255)">
    <type label="XML" length="1" sql="XML" quote="'"/>
    <type label="Bit" length="1" sql="BIT" quote="'"/>
    <type label="Bit Varying" length="1" sql="VARBIT" re="BIT VARYING" quote="'"/>
    <type label="Inet Host Addr" length="0" sql="INET" quote="'"/>
    <type label="Inet CIDR Addr" length="0" sql="CIDR" quote="'"/>
    <type label="Geometry" length="0" sql="GEOMETRY" quote="'"/>
  </group>
</datatypes><table x="835" y="567" name="Usuario">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="firstname" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="lastname" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="hashed_password" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="email" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="603" y="433" name="Fornecedor">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="imagem_pb_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="web_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="imagem_col_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="nome_fantasia" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="cnpj" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="email" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="ativo" null="1" autoincrement="0">
<datatype>BOOLEAN</datatype>
<default>NULL</default></row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="607" y="67" name="Post">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="imagem_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="titulo" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="descricao" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="id_Categoria post" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Categoria post" row="id" />
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="849" y="158" name="Categoria post">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="1587" y="489" name="Header">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="imagem_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="titulo" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="descricao" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="1097" y="317" name="Produto x Categoria">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="id_Produto" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Produto" row="id" />
</row>
<row name="id_Categoria" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Categoria" row="id" />
</row>
<row name="id_Subcategoria" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Subcategoria" row="id" />
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="847" y="340" name="Produto">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="titulo" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="descricao" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="imagem_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="id_Fornecedor" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Fornecedor" row="id" />
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="1366" y="395" name="Categoria">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="titulo" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="descricao" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="imagem_url" null="1" autoincrement="0">
<datatype>TEXT</datatype>
<default>NULL</default></row>
<row name="id_Header" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Header" row="id" />
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
<table x="1372" y="183" name="Subcategoria">
<row name="id" null="1" autoincrement="1">
<datatype>INTEGER</datatype>
<default>NULL</default></row>
<row name="id_Categoria" null="1" autoincrement="0">
<datatype>INTEGER</datatype>
<default>NULL</default><relation table="Categoria" row="id" />
</row>
<key type="PRIMARY" name="">
<part>id</part>
</key>
</table>
</sql>
</file>

<file path="middlewares/categoriaDestroyValidation.js">
const models = require('../models');
const Categoria = models.Categoria;

exports.categoryDestroyVal = async (req, res, next)=>{
    let cat = await Categoria.findByPk(req.params.id);
    let subCategorias = await Categoria.findAll({where:{idCategoriaPai: cat.dataValues.idCategoria}});
    let prods = [];
    for await (let sub of subCategorias){
        let prod = await sub.getProdutos();
        if(prod.length){
            prods.push(prod);
        }
    }
    console.log(prods);
    if(prods.length){
        req.flash('error', 'Esta categoria nao pode ser deletada pois possui produtos');
        return res.redirect('/admin');
    }else{
        return next();
    }
}
</file>

<file path="middlewares/httpToHttps.js">
exports.httpToHttps = (req, res, next)=>{
    const local = req.url;
    const schema = (req.headers['x-forwarded-proto'] || "").toLowerCase();
    const www = req.headers.host
    const fullUrl = `https://${www}${local}`;
    
    const notLocalHost = ()=> www.indexOf('localhost') < 0;
    if(notLocalHost() && schema !== 'https'){
        res.redirect(fullUrl);
    }
    next();
}
</file>

<file path="middlewares/languageSelection.js">
const langPt = require('../locales/pt');
const langEn = require('../locales/en');
const langEs = require('../locales/es');

exports.selectedLanguage = (req, res, next) => {
    let t = langPt;
    if (req.session.t === 'en') {
        t = langEn;
    } else if (req.session.t === 'es') {
        t = langEs;
    }

    req.params.t = t;
    next();
}
</file>

<file path="migrations/20200830201618-produtoaddcolumnengesp.js">
'use strict';

module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.addColumn('Produtos', 'tituloEng', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Produtos', 'descricaoEng', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Produtos', 'tituloEsp', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Produtos', 'descricaoEsp', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t})
      ])
    })
  },

  down: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.removeColumn('Produtos', 'tituloEng', {transaction: t}),
        queryInterface.removeColumn('Produtos', 'descricaoEng', {transaction: t}),
        queryInterface.removeColumn('Produtos', 'tituloEsp', {transaction: t}),
        queryInterface.removeColumn('Produtos', 'descricaoEsp', {transaction: t})
      ])
    })
  }
};
</file>

<file path="migrations/20200830202532-headeraddcolumnengesp.js">
'use strict';

module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.addColumn('Headers', 'tituloEng', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Headers', 'descricaoEng', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Headers', 'tituloEsp', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Headers', 'descricaoEsp', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t})
      ])
    })
  },

  down: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.removeColumn('Headers', 'tituloEng', {transaction: t}),
        queryInterface.removeColumn('Headers', 'descricaoEng', {transaction: t}),
        queryInterface.removeColumn('Headers', 'tituloEsp', {transaction: t}),
        queryInterface.removeColumn('Headers', 'descricaoEsp', {transaction: t})
      ])
    })
  }
};
</file>

<file path="migrations/20200830202942-categoriaaddcolumnengesp.js">
'use strict';

module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.addColumn('Categoria', 'tituloEng', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Categoria', 'descricaoEng', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Categoria', 'tituloEsp', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t}),
        queryInterface.addColumn('Categoria', 'descricaoEsp', {
          type: Sequelize.DataTypes.STRING,
          allowNull: false,
          required: true
        }, {transaction: t})
      ])
    })
  },

  down: (queryInterface, Sequelize) => {
    return queryInterface.sequelize.transaction(t=>{
      return Promise.all([
        queryInterface.removeColumn('Categoria', 'tituloEng', {transaction: t}),
        queryInterface.removeColumn('Categoria', 'descricaoEng', {transaction: t}),
        queryInterface.removeColumn('Categoria', 'tituloEsp', {transaction: t}),
        queryInterface.removeColumn('Categoria', 'descricaoEsp', {transaction: t})
      ])
    })
  }
};
</file>

<file path="models/categoria.js">
'use strict';
module.exports = (sequelize, DataTypes) => {
  const Categoria = sequelize.define('Categoria', {
    titulo: DataTypes.STRING,
    tituloEng: DataTypes.STRING,
    tituloEsp: DataTypes.STRING,
    descricao: DataTypes.STRING,
    descricaoEng: DataTypes.STRING,
    descricaoEsp: DataTypes.STRING,
    idCategoria: DataTypes.INTEGER,
    idCategoriaPai: DataTypes.INTEGER,
  }, {timestamps: false});
  Categoria.associate = function(models) {
    Categoria.hasOne(models.Header, {foreignKey:"categoriaId", onDelete:"CASCADE"})
    Categoria.belongsToMany(models.Produto, {through: "ProdutoCategoria", as: 'produtos', foreignKey:"categoriaId"})
  };
  return Categoria;
};
</file>

<file path="models/header.js">
'use strict';
module.exports = (sequelize, DataTypes) => {
  const Header = sequelize.define('Header', {
    titulo: DataTypes.STRING,
    tituloEng: DataTypes.STRING,
    tituloEsp: DataTypes.STRING,
    descricao: DataTypes.STRING,
    descricaoEng: DataTypes.STRING,
    descricaoEsp: DataTypes.STRING,
  }, {timestamps: false});
  Header.associate = function(models) {
    Header.belongsTo(models.Categoria)
  };
  return Header;
};
</file>

<file path="models/produto.js">
'use strict';
module.exports = (sequelize, DataTypes) => {
  const Produto = sequelize.define('Produto', {
    titulo: DataTypes.STRING,
    tituloEng: DataTypes.STRING,
    tituloEsp: DataTypes.STRING,
    descricao: DataTypes.STRING,
    descricaoEng: DataTypes.STRING,
    descricaoEsp: DataTypes.STRING,
  }, {timestamps: false});
  Produto.associate = function(models) {
    Produto.belongsToMany(models.Categoria, {through: "ProdutoCategoria", as: 'categorias', foreignKey:"produtoId"})
  };
  return Produto;
};
</file>

<file path="public/img/icons/browserconfig.xml">
<?xml version="1.0" encoding="utf-8"?>
<browserconfig><msapplication><tile><square70x70logo src="/ms-icon-70x70.png"/><square150x150logo src="/ms-icon-150x150.png"/><square310x310logo src="/ms-icon-310x310.png"/><TileColor>#ffffff</TileColor></tile></msapplication></browserconfig>
</file>

<file path="public/img/icons/manifest.json">
{
 "name": "App",
 "icons": [
  {
   "src": "\/android-icon-36x36.png",
   "sizes": "36x36",
   "type": "image\/png",
   "density": "0.75"
  },
  {
   "src": "\/android-icon-48x48.png",
   "sizes": "48x48",
   "type": "image\/png",
   "density": "1.0"
  },
  {
   "src": "\/android-icon-72x72.png",
   "sizes": "72x72",
   "type": "image\/png",
   "density": "1.5"
  },
  {
   "src": "\/android-icon-96x96.png",
   "sizes": "96x96",
   "type": "image\/png",
   "density": "2.0"
  },
  {
   "src": "\/android-icon-144x144.png",
   "sizes": "144x144",
   "type": "image\/png",
   "density": "3.0"
  },
  {
   "src": "\/android-icon-192x192.png",
   "sizes": "192x192",
   "type": "image\/png",
   "density": "4.0"
  }
 ]
}
</file>

<file path="public/img/Bolota_timeline.svg">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 24.3.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 50 51" style="enable-background:new 0 0 50 51;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
	.st1{fill:#749A3D;}
	.st2{fill:#FC020C;}
</style>
<g>
	<path class="st0" d="M47.9,25.5c0,12.53-10.16,22.69-22.69,22.69c-12.53,0-22.68-10.16-22.68-22.69
		c0-12.53,10.16-22.68,22.68-22.68C37.75,2.81,47.9,12.97,47.9,25.5z"/>
	<path class="st1" d="M25.22,50c-13.51,0-24.5-10.99-24.5-24.5S11.71,1,25.22,1s24.5,10.99,24.5,24.5S38.73,50,25.22,50z
		 M25.22,4.63c-11.51,0-20.87,9.36-20.87,20.87s9.36,20.87,20.87,20.87c11.51,0,20.87-9.36,20.87-20.87S36.73,4.63,25.22,4.63z"/>
</g>
<circle class="st2" cx="25.22" cy="25.5" r="10.86"/>
</svg>
</file>

<file path="public/img/icon-player.svg">
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 25.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 150 150" style="enable-background:new 0 0 150 150;" xml:space="preserve">
<style type="text/css">
	.st0{fill:#FFFFFF;}
</style>
<path class="st0" d="M75.25,2C34.73,2,1.88,34.85,1.88,75.37s32.85,73.37,73.37,73.37s73.37-32.85,73.37-73.37S115.78,2,75.25,2z
	 M108.38,80.88l-52.91,30.55c-4.24,2.45-9.55-0.61-9.55-5.51V44.82c0-4.9,5.3-7.96,9.55-5.51l52.91,30.55
	C112.62,72.31,112.62,78.43,108.38,80.88z"/>
</svg>
</file>

<file path="public/javascript/admin/header.js">
const inputSearch = document.getElementById('index-input-search');
const searchElement = document.getElementById('search');

//Verificando onde ira aparecer a barra de search do admin
if(location.href !== "http://localhost:3000/admin" && location.href !== "https://aplinova.herokuapp.com/admin" && location.href !== "https://aplinova.herokuapp.com/admin/#" && location.href !== "http://localhost:3000/admin/#"){
    inputSearch.classList.add("d-none");
    searchElement.classList.add("d-none");
}else{
    inputSearch.classList.remove("d-none");
    searchElement.classList.remove("d-none");
}
</file>

<file path="public/stylesheets/components/banner.css">
.banner {
    height: 80vh;
    position: relative;
}

.banner__overlay {
    background-color: rgba(0,0,0,0.5);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

.banner__header {
    color: #fff;
    font-size: 2.75rem;
    line-height: 1.25;
    letter-spacing: 0.025em;
    font-weight: 400;
}

.banner__text {
    width: 600px;
    position: absolute;
    bottom: 20%;
    left: 0%;
}

@media (max-width: 640px) {
    .banner__header {
        font-size: 2rem;
    }

    .banner__text {
        width: 100%;
    }

    .banner {
        background-position-x: 60% !important;
    }
}
</file>

<file path="seeders/20200517215303-users-seed.js">
'use strict';
const bcrypt = require('bcrypt-nodejs');
module.exports = {
  up: (queryInterface, Sequelize) => {
    return queryInterface.bulkInsert('Users', [{
      firstName: "Daniel",
      lastName: "Silva",
      admin: 1,
      username: "daniel.silva",
      password: bcrypt.hashSync("123456", bcrypt.genSaltSync(8), null),
      email: "danieldts2013@gmail.com",
      active: 1,
      role: 'desenvolvedor'
    }])
  },

  down: (queryInterface, Sequelize) => {
    
  }
};
</file>

<file path="views/portal/banner.ejs">
<div id="banner" class="banner p-0" style="background: no-repeat center/cover url(<%- imageUrl %>)">
  <div class="banner__overlay"></div>
  <div class="row h-100">
    <div class="banner__text">
      <h2 class="base-padding-left banner__header"><%- title %></h2>
    </div>
  </div>
</div>
</file>

<file path="views/portal/timeline-item.ejs">
<div class="empresa-timeline__item">
    <div class="empresa-timeline__marker">
        <hr />
        <div class="empresa-timeline__circle"><div class="empresa-timeline__circle-inner"></div></div>
    </div>
    <div class="empresa-timeline__item-content">
        <div class="empresa-timeline__item-header"></div>
        <div class="empresa-timeline__item-body"></div>
    </div>
</div>
</file>

<file path="views/usuarios/forgot.ejs">
<%- include('./header') %>
<div class="user_card">
    <div class="d-flex justify-content-start">
        <h6 style="color:white;">Entre com seu email de cadastro</h6>
    </div>
    <div class="d-flex justify-content-center form_container">
        <form action="/login/forgot" method='post'>
            <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
            </div>
            <input type="email" name="email" id="email" class="form-control input_user" value="" placeholder="email" spellcheck="false" required>
            </div>
            <%if(error){%>
            <div><span style="color: red;"><%=error%></span></div>
            <%}%>
            <%if(envio){%>
            <div><span style="color: red;"><%=envio%></span></div>
            <%}%>
            <div class="d-flex justify-content-center mt-3 login_container">
            <button type="submit" id="enviar" name="button" class="btn login_btn">Enviar</button>
            </div>
        </form>
    </div>
    <div class="mt-4 groupe-liens">
        <div class="d-flex justify-content-center links">
            <span style="color:white;">Retornar a tela anterior?</span> <a href="/login/show" class="ml-2 liens">Login</a>
        </div>
    </div>
</div>
<script src="../../public/javascript/usuario/forgot.js"></script>
<%- include('./footer') %>
</file>

<file path="views/usuarios/reset.ejs">
<%- include('./header') %>
<div class="user_card">
    <div class="d-flex justify-content-start">
        <h6 style="color:white;">Entre com seu email de cadastro</h6>
    </div>
    <div class="d-flex justify-content-center form_container">
        <form action="/login/forgot/reset" method='post'>
            <div class="input-group mb-3">
            <div class="input-group-append">
                <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
            </div>
            <input type="text" name="email" id="email" class="form-control input_user" value="" placeholder="Email" spellcheck="false">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="text" name="codigo" id="codigo" class="form-control input_user" value="" placeholder="Codigo" spellcheck="false">
            </div>
            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="password" name="password" id="password" class="form-control input_user" value="" placeholder="Novo password" spellcheck="false">
            </div>
            <!-- Incluindo input invisivel para virar patch -->
            <input class="d-none" name="method" id="method" type="text" value="patch">
            <%if(error){%>
            <div><span style="color: red;"><%=error%></span></div>
            <%}%>
            <%if(envio){%>
            <div><span style="color: red;"><%=envio%></span></div>
            <%}%>
            <div class="d-flex justify-content-center mt-3 login_container">
            <button type="submit" id="reset" name="button" class="btn login_btn">Reset</button>
            </div>
        </form>
    </div>
    <div class="mt-4 groupe-liens">
        <div class="d-flex justify-content-center links">
            <span style="color:white;">Retornar a tela anterior?</span> <a href="/login/show" class="ml-2 liens">Login</a>
        </div>
    </div>
</div>
<!-- <script src="../../public/javascript/usuario/reset.js"></script> -->
<%- include('./footer') %>
</file>

<file path="views/usuarios/signin.ejs">
<%- include('./header') %>
<div class="user_card">
    <div class="d-flex justify-content-center">
      Cadastre-se
    </div>
    <div class="d-flex justify-content-center form_container">
        <form action="/login/signup" method="post">
            <label for="firstname">First Name</label>
            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="text" name="firstname" id="firstname" class="form-control input_user" value="" placeholder="First name" spellcheck="false" required>
            </div>
            <label for="lastname">Last Name</label>
            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="text" name="lastname" id="lastname" class="form-control input_user" value="" placeholder="Last name" spellcheck="false" required>
            </div>
            <label for="username">User Name</label>
            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="text" name="username" id="username" class="form-control input_user" value="" placeholder="User name" spellcheck="false" required>
            </div>
            <label for="email">Email</label>
            <div class="input-group mb-3">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-user" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="email" name="email" id="email" class="form-control input_user" value="" placeholder="email" spellcheck="false" required>
            </div>
            <label for="email">Password</label>
            <div class="input-group mb-2">
                <div class="input-group-append">
                    <span class="input-group-text logo"><i class="fas fa-key" style="margin: 0; padding: 0;"></i></span>
                </div>
                <input type="password" id="password" name="password" class="form-control input_pass" value=""
                    placeholder="password" spellcheck="false">
            </div>
            <%if(error){%>
            <div><span style="color: red;"><%=error%></span></div>
            <%}%>
            <%if(envio){%>
            <div><span style="color: red;"><%=envio%></span></div>
            <%}%>
            <div class="d-flex justify-content-center mt-3 login_container">
                <button type="submit" name="button" id="cadastrar" class="btn login_btn">Cadastrar</button>
            </div>
        </form>
    </div>
    <div class="mt-4 groupe-liens">
        <div class="d-flex justify-content-center links">
            <span style="color:white;">Retornar a tela anterior?</span> <a href="/login/show" class="ml-2 liens">Login</a>
        </div>
    </div>
</div>
<script src="../../public/javascript/usuario/singup.js"></script>
<%- include('./footer') %>
</file>

<file path="controllers/usuario.js">
/**
 * Description: Modulo controller para o usuario
 * Author: Findi
 */

const models = require('../models');
const User = models.User;
const Forgotcode = models.Forgotcode;
const {Op} = require('sequelize');
const bcrypt = require('bcrypt-nodejs');
const mailerTransport = require('../config/mail');

 //Tela de login
exports.login = (req, res)=>{
    res.render('./usuarios/login', {error: req.flash('error'), envio: req.flash('envio')});
}

//Tela de novo usuario
exports.newUser = (req, res)=>{
    res.render('./usuarios/signin', {error: req.flash('error'), envio: req.flash('envio')});
}

//Envia email para o administrador com o novo usuario a ser ativado
exports.sendemail = (req, res)=>{
    const assunto = "Solicitacao para aprovacao de login";

    if(req._passport.session){
        User.findByPk(req._passport.session.user)
        .then(function(user){
            return sendContatoEmail('leonardo.takada.lt@apliquimica.com.br', assunto, `Usuario requisitanto solicitacao: ${user.firstName}. Email: ${user.email}`);
        })
        .then(function(result){
            req.logout();
            req.flash('envio', 'Email foi enviado ao adm');
            res.redirect('/login/show');
        })
        .catch(function(error){
            req.flash('error', 'Houve um erro no envio do email');
            res.redirect('/login/show');
        })
    }else{
        req.flash('error', 'Nao ha uma sessao valida');
        res.redirect('/login/show');
    }
}

exports.createForgot = async (req, res)=>{

    const assunto = "Codigo para reset de senha";
    const forgotCode = Math.floor(Math.random() * (9000)) + 1000;

    let user = await User.findOne({where:{email:req.body.email}});
    let fgc;
    if(!user){
        req.flash('error', 'Esse email nao existe na base.');
        res.redirect('/login/forgot');
    }else{
        fgc = await Forgotcode.update({active:1}, {where:{userid:user.dataValues.id}});
        await user.createForgotcode({codigo: String(forgotCode)}); //Criando o forgotcode

        let content = `Usuario requisitanto solicitacao: ${user.dataValues.firstName}. Codigo: ${String(forgotCode)}. Link: https://www.aplinova.com.br/login/forgot/reset`;
        await sendContatoEmail(user.dataValues.email, assunto, content);
        req.logout();
        req.flash('envio', 'Email foi enviado com codigo.');
        res.redirect('/login/show');

    }
}

exports.forgot = (req, res)=>{
    res.render('./usuarios/forgot', {error: req.flash('error'), envio: req.flash('envio')});
}

//Carregando o formulario de reset
exports.forgotReset = (req, res)=>{
    res.render('./usuarios/reset', {error: req.flash('error'), envio: req.flash('envio')});
}

//Resetando a senha do usuario PATCH
exports.reset = async (req, res)=>{
    var userInstance;

    let user = await User.findOne({where:{email: req.body.email}});
    let fgc;
    if(!user){
        req.flash('error', 'Erro ao encontrar o usuario');
        res.redirect('/login/forgot/reset');
    }else{
        fgc = await Forgotcode.findOne({where:{[Op.and]:[{active:0},{userId:user.dataValues.id}, {codigo:req.body.codigo}]}});
        if(!fgc){
            req.flash('error', 'Erro ao encontrar o codigo.');
            res.redirect('/login/forgot/reset');
        }else{
            await Forgotcode.update({active:1}, {where:{id:fgc.dataValues.id}});

            //Realizar o hash do password
            const generateHashPassword = function(password){
                return bcrypt.hashSync(password, bcrypt.genSaltSync(8), null);
            }
            let newPassword = generateHashPassword(req.body.password);
            //Realizar o update do password do usuario
            await User.update({password: newPassword}, {where:{id:user.dataValues.id}})
            req.flash('envio', 'Foi realizado o reset da senha.');
            res.redirect('/login/show');
        }
    }
}

//Funcao de envio de email
function sendContatoEmail(email, assunto, content){
    return new Promise((resolve, reject)=>{
      mailerTransport.sendMail({
        from: `Aplinova <contato@aplinova.com.br>`,
        to: email,
        subject: assunto,
        html: content
      }, (err, info)=>{
        if(err){
          console.log(err);
          reject("Ocorreu um problema ao enviar o email")
        }else{
          resolve(info);
        }
      })
    })
  }
</file>

<file path="middlewares/formsValidation.js">
/**
 * Description: Middleware para validacao de formulario e acessos
 * Author: Findi
 */

 //Importando modulos
const models = require('../models');
const User = models.User;
const Forgotcode = models.Forgotcode;
const {Op} = require('sequelize');

//Funcao que verifica se o usuario que esta logando possui um codigo ativo no banco
exports.forgotLoginValidation = async (req, res, next)=>{
    let user = await User.findOne({where:{email: req.body.email}});
    let fgc;
    if(!user){
        req.flash('error', 'Este email nao foi achado em nossa base.');
        return res.redirect('/login/show');
    }else{
        fgc = await Forgotcode.findOne({where:{[Op.and]:[{active:0}, {userId: user.dataValues.id}]}});
        if(fgc){
            return res.redirect('/login/forgot/reset');
        }else{
            return next(); 
        }
    }
}

//Verifica no formulario de forgot se o email digitado realmente existe
exports.forgotValidation = async (req, res, next)=>{
    let user = await User.findOne({where:{email: req.body.email}});
    if(!user){
        req.flash('error', 'Este email nao foi achado em nossa base.');
        return res.redirect('/login/forgot');
    }else{
        return next();
    }
}

exports.forgotResetValidation = async (req, res, next)=>{
    let user = await User.findOne({where:{email: req.body.email}});
    let fgc;
    if(!user){
        req.flash('error', 'Este email nao foi achado em nossa base.');
        return res.redirect('/login/forgot/reset');
    }else{
        fgc = await Forgotcode.findOne({where:{[Op.and]:[{userId: user.dataValues.id}, {active:0}]}})
        if(fgc){
            return next();
        }else{
            req.flash('error', 'Este codigo nao esta valido para esse email');
            return res.redirect('/login/forgot/reset');
        }
    }
}

exports.singupFormValidation = (req, res, next)=>{
    req.check('firstname', 'min 2 max 15 char para primeiro nome').isLength({min:2, max: 15});
    req.check('lastname', 'min 2 max 15 char para primeiro nome').isLength({min:2, max: 15});
    req.check('password', 'min 5 max 10 char para primeiro nome').isLength({min:5, max: 10});

    const errors = req.validationErrors();
    if(errors){
        const firstError = errors.map(error=>error.msg)[0];
        req.flash('error', firstError);
        return res.redirect('/login/signin');
    }
    next();
}

exports.resetFormValidation = (req, res, next)=>{
    req.check('email', 'Necessario ser um email.').isEmail();
    req.check('codigo', 'Minimo de 4 char').isLength({min:4});
    req.check('password', 'min 5 max 10 char para primeiro nome').isLength({min:5, max: 10});

    const errors = req.validationErrors();
    if(errors){
        const firstError = errors.map(error=>error.msg)[0];
        req.flash('error', firstError);
        return res.redirect('/login/forgot/reset');
    }
    next();
}

//Criar a validacao do formulario de reset
//Criar a validacao do formulario de signup
</file>

<file path="public/javascript/admin/newCategoria.js">
//Botoes das flags
const euaFlag = document.getElementById('eua-flag');
const espFlag = document.getElementById('esp-flag');
const ptFlag = document.getElementById('pt-flag');

window.onload = ()=>{
    //Setando as flags
    espFlag.style.opacity = 0.4;
    euaFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 1;
}


//Acao para o botao de bandeira EUA
euaFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 0.4;
    euaFlag.style.opacity = 1;
    removeFlagClass('eua');
});

//Acao para o botao de bandeira Esp
espFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espFlag.style.opacity = 1;
    euaFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 0.4;
    removeFlagClass('esp');
});

//Acao para o botao de bandeira EUA
ptFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    ptFlag.style.opacity = 1;
    euaFlag.style.opacity = 0.4;
    espFlag.style.opacity = 0.4;
    removeFlagClass('pt');
});
</file>

<file path="public/javascript/admin/userconfig.js">
const btnSalvar = document.getElementById('btn-salvar');
const password1 = document.getElementById('inputPassword1');
const password2 = document.getElementById('inputPassword2');
const method = document.getElementById('method');
const msg = document.getElementById('msg');
const btnMudarSenha = document.getElementById('btn-mudarsenha');
const btnInativo = document.getElementsByClassName('inativo');
const btnSalvarInativo = document.getElementById('btn-salvar-inativo');
const btnBloquearInativo = document.getElementById('btn-bloquear-inativo');

//Modal
const title = document.getElementById('title');
const email = document.getElementById('email');
const role = document.getElementById('role');
const username = document.getElementById('username');
const admin = document.getElementById('admin');
const active = document.getElementById('active');
const inativoMethod = document.getElementById('inativoMethod');
var id;

btnSalvar.addEventListener('click', function(event){
    event.preventDefault();
    if(password1.value !== password2.value){
        msg.innerHTML = "Passwords diferentes"
        return 0;
    }
    //Setando globalmente o ID
    id = btnMudarSenha.dataset.id;

    //Chamando a promise para verificar se a senha ja existe
    verificarSenha(password1.value)
    .then(function(result){
        return alterarSenha(password1.value, method.value);
    })
    .then(function(data){
        //Enviar alguma mensage
        if(data){
            location.reload();
        }
    })
    .catch(function(error){
        msg.innerHTML = error;
    })
    
});

function verificarSenha(newPassword){
    return new Promise((resolve, reject)=>{
        let url = 'compare/passwords';
        let data = {
            newpassword: newPassword
        }

        //POST
        $.post(url, data, function(data){
            if(!data.igual){
                resolve(data.igual);
            }else{
                reject('Insira senha diferente da atual.');
            }
        })
    });
}

function alterarSenha(newPassword, method){
    return new Promise((resolve, reject)=>{
        let url = `config/user/${id}`;
        let data = {
            password:newPassword,
            method:method
        }
        
        $.post(url, data, function(data){
            if(data){
                resolve(data);
            }else{
                reject('Nao foi possivel alterar a senha do usuario');
            }
        })
    })
}

Array.from(btnInativo).forEach(element=>{
    element.addEventListener('click', function(event){
        id = event.target.dataset.id
        console.log(id);
        let url = `config/user/${id}`;
        //Recuperando os dados do usuario
        $.get(url, function(data){
            console.log(data);
            title.innerHTML = data.user.firstName
            email.innerHTML = data.user.email
            role.innerHTML = data.user.role
            username.innerHTML = data.user.username
            console.log(admin);
            data.user.admin ? admin.setAttribute('checked', true) : admin.removeAttribute('checked');
            data.user.active ? active.setAttribute('checked', true) : active.removeAttribute('checked');
        })
    })
});

btnSalvarInativo.addEventListener('click', function(event){
    event.preventDefault();
    data = {
        active: active.checked,
        admin: admin.checked,
        method: inativoMethod.value //patch
    }
    changeUser(data);
});

btnBloquearInativo.addEventListener('click', function(event){
    event.preventDefault();
    data={
        active: false,
        admin: false,
        method: inativoMethod.value,
        role: 'bloqueado'
    }

    changeUser(data);
});

//Funcao que ira enviar os dados de mudanca do usuario
function changeUser(data){
    let url = `config/user/${id}`;

    $.post(url, data, function(data){
        location.reload();
    })
}
</file>

<file path="public/stylesheets/admin/treeview.css">
body{
	margin:0;
	padding:0;
	font-family: 'Montserrat', sans-serif;
}

.treeview{
	list-style: none;
}

.treeview ul{
	margin-left: 20px;
	padding-left: 20px;
	list-style-image: url();
	list-style: none;
}

.treeview ul li a, .treeview li a{
	text-decoration:none;
}

.notativo{
	display: none;
}

@media (max-width: 576px) {
	
}
</file>

<file path="public/stylesheets/admin/userconfig.css">
*{
    color: black;
}

.btn-danger-admin{
    background-color:#f91605;
    color: white;
    box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -webkit-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    -moz-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.btn-danger-admin:hover{
    background-color: black;
    color:white;
}
</file>

<file path="public/stylesheets/components/button.css">
.btn--expand {
    min-width: 12rem;
    max-width: 175px;
    height: auto;
    position: relative;
    display: inline-block;
    cursor: pointer;
    outline: none;
    border: 0;
    vertical-align: middle;
    background: transparent;
}
.btn--expand .btn--expand__circle {
    transition: all 0.45s cubic-bezier(0.65, 0, 0.076, 1);
    position: relative;
    display: block;
    margin: 0;
    width: 3rem;
    height: 3rem;
    background: #7B9C48;
    border: 2px solid #7B9C48;
    border-radius: 1.625rem;
}
.btn--expand .btn--expand__circle .icon {
    transition: all 0.45s cubic-bezier(0.65, 0, 0.076, 1);
    position: absolute;
    top: 0;
    bottom: 0;
    margin: auto;
    background: #fff;
}
.btn--expand .btn--expand__circle .icon.arrow {
    transition: all 0.45s cubic-bezier(0.65, 0, 0.076, 1);
    left: 0.625rem;
    width: 1.125rem;
    height: 0;
    background: none;
}
.btn--expand .btn--expand__circle .icon.arrow::before {
    position: absolute;
    content: '✚';
    color: white;
    font-size: 1.75rem;
    top: -1.35rem;
    right: 0.5rem;
    width: 0.625rem;
    height: 0.625rem;
}
.btn--expand .btn--expand__text {
    transition: all 0.45s cubic-bezier(0.65, 0, 0.076, 1);
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    padding: 0.5rem 0;
    margin: 0 0 0 1.85rem;
    color: transparent;
    font-size: 1.25rem;
    font-weight: 600;
    line-height: 1.6;
    text-align: center;
    text-transform: uppercase;
}
.btn--expand:hover .btn--expand__circle {
    width: 100%;
    background: #7B9C48;
}
.btn--expand:hover .icon.arrow::before {
    color: white;
}
.btn--expand:hover .btn--expand__text {
    color: #fff;
}

.btn--contrast {
    border: 2px solid #7B9C48;
    border-radius: 1.625rem;
    width: 8rem;
    height: 3rem;
    color: #88B73A;
    text-transform: uppercase;
    background-color: transparent;
    font-weight: 500;
    font-size: 1rem;
}

.btn--contrast:hover {
    transition-duration: 0.25s;
    color: #fff;
    border: 2px solid #88B73A;
    background-color: #88B73A;
}

.btn--contrast:focus, .btn--expand:focus {
    outline: none;
}

@media(max-width: 640px) {
    .btn--expand .btn--expand__circle {
        width: 100%;
        background: #7B9C48;
        height: 2.5rem;
    }

    .btn--expand {
        min-width: 11rem;
    }
    .btn--expand .icon.arrow::before {
        color: white !important;
    }
    .btn--expand .btn--expand__text {
        color: #fff;
        font-size: 1rem;
        padding: 0.45rem 0;
    }

    .btn--expand .btn--expand__circle .icon.arrow::before {
        font-size: 1.5rem;
        top: -1.2rem;
    }

    .btn--contrast {
        transition-duration: 0.25s;
        color: #fff;
        border: 2px solid #88B73A;
        background-color: #88B73A;
    }
}
</file>

<file path="public/stylesheets/components/produto-card.css">
.produto-card {
    border-radius: 0;
    width: 100%;
    height: 100%;
    border: none;
    max-height: 560px;
    overflow: hidden;
    position: relative;
    -webkit-transform: translateZ(0);
    -moz-transform: translateZ(0);
    -ms-transform: translateZ(0);
    transform: translateZ(0);
    will-change: transform;
}

a.produto-card {
    text-decoration: none;
}

.produto-card .produto-card__title {
    font-size: 1.75rem;
}

@media (max-width: 1270px) {
    .produto-card .produto-card__title {
        font-size: 1.35rem;
    }
}

.produto-card .card-img-top {
    border-radius: 0;
    height: 70%;
    object-fit: cover;
}

.produto-card .card-body {
    border: none;
    border-bottom: 5px solid #292828;
    color: #292828;
    font-weight: 500;
    background-color: #F0F6ED;
    text-align: center;
    text-transform: uppercase;
    padding: 0 1rem;
    height: 120px;
}

.produto-card .produto-card__overlay {
    position: absolute;
    height: 100%;
    width: 100%;
    padding-top: 3rem;
    bottom: 0;
    opacity: 0;
    transform: translateY(100%);
}

.produto-card .produto-card__overlay-content {
    height: 100%;
    width: 100%;
    background-color: #292828;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 2.5rem;
    color: transparent;
}

.produto-card:hover .produto-card__overlay {
    transition: 0.7s ease all;
    opacity: 1;
    transform: translateY(0%);
}

.produto-card .produto-card__overlay-text {
    text-align: center;
    text-transform: uppercase;
    font-size: 2rem;
    line-height: 1.125;
    position: absolute;
    top: 75px;
    padding: 0 2rem;
}

.produto-card:hover .produto-card__overlay-text {
    color: #88B73A;
}

@media (max-width: 968px) {
    .produto-card .produto-card__overlay {
        display: none;
    }
}
</file>

<file path="public/stylesheets/portal/index.css">
@import '../components/button.css';
@import '../components/footer.css';
@import '../components/navbar.css';
@import '../components/categoria-item.css';
@import '../components/subcategoria-item.css';
@import '../components/home-introduction.css';
@import '../components/home-company.css';
@import '../components/home-partners.css';
@import '../components/produto-card.css';
@import '../components/carrousel.css';
@import '../components/banner.css';
@import './contato.css';
@import './empresa.css';

html, body{
    margin:0;
    padding: 0;
    width: 100vw;
    background-color: #FFF;
    font-family: 'Montserrat', sans-serif;
    max-width: 100vw;
    overflow-x: hidden;
}

ul li{
    list-style: none;
}

.base-container {
    padding-left: 6rem;
    padding-right: calc(6rem + 16px);
}

.base-padding-left {
    padding-left: 6rem;
}

.base-padding-right {
    padding-right: 6rem;
}

@media (max-width: 640px) {
    .base-container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    .base-padding-left {
        padding-left: 1rem;
    }

    .base-padding-right {
        padding-right: 1rem;
    }
}

@media (min-width: 641px) {
    .base-container {
        padding-left: 4rem;
        padding-right: 4rem;
    }

    .base-padding-left {
        padding-left: 4rem;
    }

    .base-padding-right {
        padding-right: 4rem;
    }
}

@media (min-width: 968px) {
    .base-container {
        padding-left: 6rem;
        padding-right: calc(6rem + 16px);
    }

    .base-padding-left {
        padding-left: 6rem;
    }

    .base-padding-right {
        padding-right: 6rem;
    }
}

.truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap
}
</file>

<file path="routes/admin/admin.js">
/**
 * Description: Modulo de rotas de categorias
 * Authoe: Findi
 */

//Importando referencias
const express = require('express');
const router = express.Router();
const {isValid} = require('../../middlewares/isValidUser.js');
const {categoryDestroyVal} = require('../../middlewares/categoriaDestroyValidation');
const {
    index,
    createCategoria,
    getSubCategoria,
    getCategorias,
    newCategoria,
    getUser,
    logout,
    newProduto,
    createProduto,
    destroyProduto,
    showProduto,
    showSubCategoria,
    showCategoria,
    destroyCategoria,
    destroySubCategoria,
    updateSubCategoria,
    updateProduto,
    search,
    userconfig,
    comparePassword,
    updateUser,
    deleteUser,
    showCategoriaPrincipal,
    updateCategoria} = require('../../controllers/admin/admin.js');

//rotas
//Raiz da chamada acontece no APP.JS
router.get('/', isValid, index);
//Get formulario
router.get('/new/produto', isValid, newProduto); //Formulario do novo produto
router.get('/new/categoria',isValid, newCategoria); //Formulario da categoria - TODO : Ira sair
router.get('/produto/:id', isValid, showProduto);
router.get('/subcategoria/:id', isValid, showSubCategoria);
router.get('/categoria/:id', isValid, showCategoria);
router.get('/main/categoria/:id', isValid, showCategoriaPrincipal);
router.get('/search', search);
router.get('/userconfig',isValid, userconfig);
//Create
router.post('/produto', isValid, createProduto);
router.post('/categoria', isValid, createCategoria); //Serve para subcategoria tambem
//Destroy
router.delete('/categoria/:id', isValid, categoryDestroyVal, destroyCategoria);
router.delete('/produto/:id', isValid, destroyProduto);
router.delete('/subcategoria/:id', isValid, destroySubCategoria);
router.delete('/user/:id', isValid, deleteUser);
//Ajax
router.get('/categorias', isValid, getCategorias);
router.get('/subcategorias/:id', isValid, getSubCategoria);
router.get('/config/user/:id', isValid, getUser);
router.get('/logout', logout);
router.post('/compare/passwords', isValid, comparePassword);
//Update
router.patch('/subcategoria/:id', isValid, updateSubCategoria);
router.patch('/produto/:id', isValid, updateProduto);
router.patch('/config/user/:id', isValid, updateUser);
router.patch('/categoria/:id', isValid, updateCategoria)

//Exportando router
module.exports = router;
</file>

<file path="routes/portal/aplinova.js">
/**
 * Description: Modulo de roteamento
 * Author: Findi
 */
const express = require('express');
const {selectedLanguage} = require('../../middlewares/languageSelection');
const {
  show,
  contato,
  aromas,
  corantes,
  foodservice,
  ingredFuncionais,
  prodNaturais,
  prodVeganos,
  proteinas,
  revConfeitaria,
  subacucar,
  nossaempresa,
  contatoEmail,
  lang
} = require('../../controllers/portal/aplinova.js');
//Não preciso estar logado para acessar a plataforma
//const {isValid} = require('../middlewares/isValidUser.js');

const router = express.Router();

router.get('/', selectedLanguage, show);
router.get('/contato', selectedLanguage, contato);
router.post('/sendContato', selectedLanguage, contatoEmail);
router.get('/aromas', selectedLanguage, aromas);
router.get('/corantes', selectedLanguage, corantes);
router.get('/foodservice', selectedLanguage, foodservice);
router.get('/ingredientesfuncionais', selectedLanguage, ingredFuncionais);
router.get('/prodnaturais', selectedLanguage, prodNaturais);
router.get('/prodveganos', selectedLanguage, prodVeganos);
router.get('/proteinas', selectedLanguage, proteinas);
router.get('/revconfeitaria', selectedLanguage, revConfeitaria); //revestimento confeitaria
router.get('/subacucar', selectedLanguage, subacucar);
router.get('/nossaempresa', selectedLanguage, nossaempresa);
router.get('/lang/:ln', lang);

module.exports = router;
</file>

<file path="views/portal/card.ejs">
<a href="<%- produto.href %>" class="card produto-card pt-4 pt-md-5">
    <img src="<%- produto.imageUrl %>" class="card-img-top" alt="<%- produto.title %>">
    <div class="card-body px-2 d-flex flex-column justify-content-center align-items-center">
        <div class="produto-card__title"><%- produto.title %></div>
    </div>
    <div class="produto-card__overlay">
        <div class="produto-card__overlay-content">
            <div class="produto-card__overlay-text"><%- produto.title %></div>
            <button class="btn--contrast">Saiba mais</button>
        </div>
    </div>
</a>
</file>

<file path="config/mail.js">
const nodemailer = require('nodemailer');
require('dotenv').config();

const config={
    host: process.env.MAILHOST,
    port: process.env.MAILPORT,
    secure: false,
    auth:{
        user: process.env.MAILUSER,
        pass: process.env.MAILPASS
    }
}

module.exports = nodemailer.createTransport(config);
</file>

<file path="public/javascript/portal/contato.js">
/**
 * Description: Modulo para envio do email de contato
 */

// const { default: fetch } = require("node-fetch");

//Botao enviar
const sendEmail = document.getElementById('sendEmail');
//components do formulario
const nome = document.getElementById('nome');
const email = document.getElementById('email');
const telefone = document.getElementById('telefone');
const empresa = document.getElementById('empresa');
const mensagem = document.getElementById('mensagem');

const textInner = document.getElementById('demo');

//Botao que ira enviar o email para administrador e para o usuario como resposta
sendEmail.addEventListener('click', function(event){
    event.preventDefault();
    //Validacao do formulario
    if(nome.value === "" || email.value === "" || telefone.value === "" || empresa.value === "" || mensagem.value === ""){
        document.getElementById("demo").innerHTML = "Todas os campos precisam ser preenchidos";
        textInner.style.color = "red";
        return 0;
    }

    //Validando as infos do formulario
    if(!validacaoFormulario()){
        return 0;
    }

    //criando os dados que sera enviados
    const data = {
        nome: nome.value,
        email: email.value,
        telefone: telefone.value,
        empresa: empresa.value,
        mensagem: mensagem.value
    }
    
    const options = {
        method: 'POST',
        headers: {"Content-type":"application/json"},
        body: JSON.stringify(data)
    };

    enviandoMensagem();

    fetch("/sendContato", options)
    .then(result=>{
        return result.json();
    })
    .then(result=>{
        console.log(result);
        if(result.done === true){
            nome.value = "";
            email.value = "";
            telefone.value = "";
            empresa.value = "";
            mensagem.value = "";
            document.getElementById("demo").classList.remove('blinking');
            document.getElementById("demo").innerHTML = "Seu email foi enviado com sucesso";
            textInner.style.color = "lightgray";
            habilitaEntradas();
        }else{
            document.getElementById("demo").classList.remove('blinking');
            document.getElementById("demo").innerHTML = "Houve um problema ao enviar o email";
            textInner.style.color = "red";
            habilitaEntradas();
        }
    })
    .catch(err=>{
        console.log(err);
        document.getElementById("demo").classList.remove('blinking');
        document.getElementById("demo").innerHTML = "Houve um problema ao enviar o email";
        textInner.style.color = "red";
        habilitaEntradas();
    })
});

function validacaoFormulario(){
    limpaBorder(); //limpando as borders;
    let msg = "";
    if((nome.value).length < 2){
        msg = "O nome precisa ter mais caracteres para ser válido.";
        nome.style.borderBottom = '1px solid red';
    }else if(!(/([0-9a-zA-Z]+([_.-]?[0-9a-zA-Z]+)*@[0-9a-zA-Z]+[0-9,a-z,A-Z,.,-]*(.){1}[a-zA-Z]{2,4})+/.test(email.value))){
        msg = "O email precisa ser válido.";
        email.style.borderBottom = '1px solid red';
    }else if((telefone.value).length > 14 || (telefone.value).length < 10){
        msg = "O telefone esta com numero de caracteres errado.";
        telefone.style.borderBottom = '1px solid red';
    }else if(/([a-zA-Z])/.test(telefone.value)){
        msg = "O telefone nao pode conter letras.";
        telefone.style.borderBottom = '1px solid red';
    }else if(!(/(\(*\d{2}\)*)\s*(\d{4,5})\-*(\d{4,6})/.test(telefone.value))){
        msg = "O telefone precisa ter um padrao de (area) nnnnnnnnn";
        telefone.style.borderBottom = '1px solid red';
    }else if((empresa.value).length < 2){
        msg = "A empresa precisa ter mais caracteres.";
        empresa.style.borderBottom = '1px solid red';
    }else if((mensagem.value).length < 5){
        msg = "A mensagem esta com poucos caracteres";
        mensagem.style.borderBottom = '1px solid red';
    }

    if(msg !== "") document.getElementById("demo").innerHTML = msg;
    if(msg !== "") textInner.style.color = "red";
    if(msg !== "") return false;
    return true;
}

function enviandoMensagem(){
    desabilitaEntradas()
    let msg = "Enviando email...";
    document.getElementById("demo").innerHTML = msg;
    document.getElementById("demo").classList.add('blinking');
}

function limpaBorder(){
    email.style.borderBottom = '1px solid #ececec';
    nome.style.borderBottom = '1px solid #ececec';
    empresa.style.borderBottom = '1px solid #ececec';
    mensagem.style.borderBottom = '1px solid #ececec';
    telefone.style.borderBottom = '1px solid #ececec';
    document.getElementById("demo").innerHTML = "";
}

function desabilitaEntradas(){
    sendEmail.disabled = true;
    nome.readOnly = true;
    email.readOnly = true;
    empresa.readOnly = true;
    mensagem.readOnly = true;
    telefone.readOnly = true;
}

function habilitaEntradas(){
    sendEmail.disabled = false;
    nome.readOnly = false;
    email.readOnly = false;
    empresa.readOnly = false;
    mensagem.readOnly = false;
    telefone.readOnly = false;
}
</file>

<file path="public/stylesheets/admin/cards.css">
.cat{
    border: 1px solid black;
    padding: 10px;
    background-color: white;
    border-radius: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
}

.subcat{
    border: 1px solid black;
    padding: 10px;
    margin-top: 2px;
    background-color: white;
    border-radius: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
}

#prod{
    border: 1px solid black;
    padding: 10px;
    margin-top: 2px; 
    background-color: white;
    border-radius: 5px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
}

.update-cat{
    margin-right: 1rem;
}

.update-cat i{
    color: red;
}
</file>

<file path="public/stylesheets/components/carrousel.css">
#carouselBanner .carousel, #carouselBanner .carousel-inner {
    height: 500px;
}

@media (min-width: 640px) {
    #carouselBanner .carousel, #carouselBanner .carousel-inner {
        height: 80vh;
    }

    #carouselBanner .carousel-control-prev {
        width: 5%;
    }

    #carouselBanner .carousel-control-next {
        width: 7.5%;
    }

    #carouselBanner .carousel-caption {
        width: 375px;
        position: absolute;
        left: 100px;
        top: 200px;
        text-align: left;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    #carouselBanner .carousel-caption .carousel-caption__text {
        font-size: 2.625rem;
        font-weight: 400;
        line-height: 1.25;
    }
}

#carouselBanner .carousel-item:after {
    content:'';
    position:absolute;
    left:0; top:0;
    width:100%; height:100%;
    display:inline-block;
    background: linear-gradient(180deg, rgba(0,0,0,1) 0%, rgba(0,0,0,0) 83%);
}

#carouselBanner .carousel-item {
    width: 100%;
    height: 100%;
}

#carouselBanner .carousel-item.carousel-item--proteinas img {
    height: 130%;
}

#carouselBanner .carousel-item img {
    position:relative;
    display: block;
    object-fit: cover;
    width: 100%;
    height: 100%;
}

#carouselBanner .carousel-caption {
    margin-bottom: 6rem;
}

#carouselBanner .carousel-caption__text {
    font-size: 1.75rem;
    font-weight: 400;
    line-height: 1.25;
}

#carouselBanner .carousel-indicators li {
    height: 10px;
    width: 10px;
    background-color: #fff;
    opacity: 50%;
    border-radius: 100%;
    margin: 0 0.375rem;
}

#carouselBanner .carousel-indicators li.active {
    background-color: #fff;
    opacity: 100%;
}

@media (max-width: 640px) {

    #carouselBanner .carousel-item .carousel-item__prodveganos {
        object-position: right;
    }
}
</file>

<file path="public/stylesheets/components/categoria-item.css">
.categoria-item {
    width: 100%;
    display: flex;
    padding-left: 0.75rem;
    margin-top: 0.75rem;
    align-items: start;
    justify-content: center;
}

.categoria-item .categoria-item__icon {
    width: 1rem;
    height: 1rem;
    margin-right: 0.5rem;
    margin-top: 0.25rem;
}

.categoria-item .categoria-item__text {
    font-weight: 700;
    color: #292828;
    font-size: 1.25rem;
    line-height: 1.375;
    width: 90%;
}

@media (min-width: 640px) {
    .categoria-item {
        width: 33.333333%;
    }

    .categoria-item .categoria-item__text {
        width: 50%;
        min-width: 275px;
        font-size: 1.6rem;
    }
}
</file>

<file path="public/stylesheets/components/footer.css">
.footer {
    background-color: #292828;
    color: #ececec;
    border-top: 6px #88B73A solid;
    padding-top: 3.5rem;
    padding-bottom: 3.5rem;
}

.footer .footer__header {
    text-transform: uppercase;
    font-weight: bold;
    font-size: 1.5rem;
}

.footer .footer__subheader {
    letter-spacing: 0.05em;
    font-size: 1.075rem;
    font-weight: bold;
    text-decoration: none;
    color: #ececec;
}

.footer .footer__text {
    letter-spacing: 0.05em;
    line-height: 1.375;
    font-size: 1.125rem;
    font-weight: 200;
    opacity: 75%;
    letter-spacing: 0;
}

.footer .footer__link {
    display: flex;
    align-items: center;
    color: white;
    font-weight: 600;
    text-decoration: none;
}

.footer .footer__link i {
    color: #88B73A;
}

.footer .footer__link div {
    text-decoration: underline;
}

.footer .footer_social-icons > a {
    font-size: .875rem;
    text-align: center;
    padding: 0.375rem;
    width: 1.5rem;
    height: 1.5rem;
    border-radius: 100%;
    background-color: #88B73A;
    cursor: pointer;
    text-decoration: none !important;
    color: white;
}

.footer .footer__logo {
    width: 16rem;
}

@media (max-width: 1024px) {
    .footer .footer__logo {
        width: 12rem;
    }

    .footer .footer__subheader {
        font-size: .875rem;
    }
}
</file>

<file path="public/stylesheets/components/home-company.css">
.home-company {
    width: 100%;
    min-height: 424px;
    border-top: 6px #88B73A solid;
}

.home-company .home-company__header {
    display: flex;
    flex-direction: row;
    align-items: center;
    color: #88B73A;
    font-size: 2.5rem;
    line-height: 1.25;
}

.home-company .home-company__header i {
    color: red;
    font-size: medium;
}

.home-company .home-company__content {
    background-color: #292828;
    padding: 2rem 4rem 2rem 6rem;
}

@media (max-width: 640px) {
    .home-company .home-company__header {
        font-size: 2rem;
    }

    .home-company .home-company__content {
        background-color: #292828;
        padding: 2rem 1rem 2rem 1rem;
    }
}

@media (min-width: 641px) and (max-width: 968px) {
    .home-company .home-company__header {
        font-size: 2rem;
    }

    .home-company .home-company__content {
        background-color: #292828;
        padding: 2rem 2rem 2rem 4rem;
    }
}

.home-company .home-company__text {
    color: #F0F6ED;
    font-size: 1.125rem;
}

.home-company img {
    object-fit: cover;
}
</file>

<file path="public/stylesheets/portal/contato.css">
.input-form {
  width: 100%;
  border: none;
  border-bottom: 2px solid #ececec;
  outline: none;
  padding-bottom: 0.5rem;
  padding-left: 0.5rem;
  font-weight: 600;
}


.button-form {
  border-radius: 9999px;
  padding: 0.75rem 2.5rem;
  background-color: #88B73A;
  border: #88B73A;
  color: #fff;
  letter-spacing: 0.1em;
}

.button-form:disabled{
  background-color: lightgray;
  border: 1px solid gray;
}

.contato__container {
  display: flex;
  flex-direction: column;
  max-width: 480px;
}

.contato__header {
  display: flex;
  flex-direction: row;
  align-items: center;
  color: #292828;
  font-weight: 400;
  line-height: 1.25;
  font-size: 2.5rem;
}

@media (max-width: 640px) {
  .contato__header {
    font-size: 2.5rem;
  }
}

.contato__header i {
  color: red;
  font-size: medium;
}

.contato__content {
  display: flex;
  flex-direction: column;
}

.contato__main-text, .contato__main-text a {
  color: #292828;
  line-height: 1.25;
  font-size: 1.5rem;
  padding-right: 0.75rem;
  width: 100%;
  font-weight: 400;
  text-decoration: none;
}

.blinking{
  animation:blinkingText 1.2s infinite;
}
@keyframes blinkingText{
  0%{     color: lightgray;    }
  49%{    color:lightgray }
  60%{    color: transparent; }
  99%{    color:transparent;  }
  100%{   color: lightgray;    }
}

input:read-only{
  color: lightgray;
}
</file>

<file path="views/portal/home-company.ejs">
<div class="home-company row mt-5 mx-0 w-100">
    <div class="col-12 col-lg-6 home-company__content">
        <div class="home-company__header">
            <i class="fas fa-square fas-sm mr-3"></i>
            <%- t.home.ourCompany %>
        </div>
        <div class="home-company__text my-4">
            <p>
                <%- t.home.foundedIn1987 %>
            </p>
            <p>
                <%- t.home.aLongEstablished %>
            </p>
            <p>
                <%- t.home.ourTeamIs %>
            </p>
        </div>
        <a href="/nossaempresa" class="btn--expand">
                <span class="btn--expand__circle">
                  <span class="icon arrow"></span>
                </span>
            <span class="btn--expand__text"><%- t.home.learnMore %></span>
        </a>
    </div>
    <img src="./public/img/home-nossa-empresa.jpg" class="d-none d-lg-block col-md-6 p-0" />
</div>
</file>

<file path="views/portal/home-introduction.ejs">
<div id="content" class="introduction__container base-container">
    <div class="introduction__content">
        <div class="introduction__main-text pt-4 pt-md-3">
            <i class="fas fa-square fas-sm mr-1"></i>
            <%- t.home.providingQualityProducts %>
        </div>
        <div class="introduction__secondary-text pt-3">
            <p><%- t.home.weOfferA %></p>
            <div><%- t.home.weAreConstantly %></div>
        </div>
    </div>

</div>
</file>

<file path="views/portal/subcategoria-item.ejs">
<div class="card-body subcategoria-item">
  <div class="row subcategoria-item__title">
      <img class="subcategoria-item__icon" src="./public/img/icon-produtos.svg" alt="Item" />
      <div class="subcategoria-item__text">
          <%= hit.dataValues[`titulo${t.code}`]%>
      </div>
  </div>
  <div class="row subcategoria-item__list-container">
      <% if (hit.dataValues.produtos && hit.dataValues.produtos.length) {%>
          <ul class="subcategoria-item__list">
              <% hit.dataValues.produtos.forEach(produto => {%>
                  <li><p><%= produto.dataValues[`titulo${t.code}`] %></p></li>
              <% }) %>
          </ul>
      <% } %>
  </div>
</div>
</file>

<file path="public/javascript/admin/search.js">
/**
 * Description: Modulo de search do admin
 * Author: Findi
 * log:
 * 07/09/2020 - Recuperada a pesquisa, os dados sao salvos em um array para recuperar os valores das traducoes da pesquisa realizada
*/

 //Declaracao de variaveis
const search = document.getElementById('search');
const searchText = document.getElementById('searchText');
const treeviewDiv = document.getElementById('treeviewDiv');
const searchResult = document.getElementById('searchResult');
const tableCategoria = document.getElementById('tableCategoria');
const tableProduto = document.getElementById('tableProduto');
const divSub = document.getElementById('divSubcategoria');
const divProd = document.getElementById('divProdutos')

let dataSearchCat;
let dataSearchProd;

//Apertando no botao de search
search.addEventListener('click', ev=>{
    const url = `/admin/search?prod=${searchText.value}`;
    tableCategoria.innerHTML = "";
    tableProduto.innerHTML = "";
    //Realiza AJAX para procura 
    $.get(url, data=>{
        dataSearchCat = data.result.resultCat; //Atribuindo os valores do search para um array
        dataSearchProd = data.result.resultProd; //Atribuindo os valores do search para um array

        treeviewDiv.classList.add("d-none");
        searchResult.classList.remove("d-none");
        if(data.result.resultCat){
            //Carregando os dados na tabela prod
            data.result.resultCat.forEach(element=>{
                let row = tableCategoria.insertRow(0);
                row.classList.add("categoria");
                row.insertCell(0).innerHTML = element.id;
                row.insertCell(1).innerHTML = element.titulo;
                row.insertCell(2).innerHTML = element.descricao;
                //Recupera a categoria pai da subcategoria
                if(element.idCategoria === 0){
                    let urlP = `/admin/categoria/${element.idCategoriaPai}`;
                    getCategoria(urlP)
                    .then(el=>{
                        row.insertCell(3).innerHTML = el.categoria.titulo;
                        row.insertCell(4).innerHTML = `<a href="/admin/subcategoria/${element.id}?method=delete" data-method="delete"><i class="fas fa-trash-alt" style="color: red;"></i></a>`
                    })
                }
            });
            if(dataSearchCat.length) divSub.classList.remove('d-none');

        }

        if(data.result.resultProd){
            //Carregando os dados na tabela produto
            data.result.resultProd.forEach(element=>{
                let row = tableProduto.insertRow(0);
                row.classList.add("produto");
                row.insertCell(0).innerHTML = element.id;
                row.insertCell(1).innerHTML = element.titulo;
                row.insertCell(2).innerHTML = element.descricao;
                row.insertCell(3).innerHTML = element.categorias.length ? element.categorias[0].titulo : "";
                row.insertCell(4).innerHTML = `<a class="btn" href="/admin/produto/${element.id}?method=delete" data-method="delete"><i class="fas fa-trash-alt" style="color: red;"></i></a>`
            });

            if(dataSearchProd.length)divProd.classList.remove('d-none');
        }
        //Recuperando a row categoria
        const categoriaRow = document.getElementsByClassName('categoria');
        //Adicionando um event listener a linha da categoria
        Array.from(categoriaRow).forEach(cat=>{
            cat.addEventListener('click', event=>{
                let filterCat = dataSearchCat.filter(hit=>hit.id === parseInt(event.path[1].children[0].innerText));
                elementType = "sub";
                formTitulo.value = filterCat[0].titulo;
                formTituloEng.value = filterCat[0].tituloEng;
                formTituloEsp.value = filterCat[0].tituloEsp;
                formDescricao.value = filterCat[0].descricao;
                formDescricaoEng.value = filterCat[0].descricaoEng;
                formDescricaoEsp.value = filterCat[0].descricaoEsp;
                formSubcategoria.value = '-';
                if(event.path[1].children[3]){ //Caso tenha categoria, entao e uma subcategoria
                    if(event.path[1].children[3].innerText){
                        elementId = parseInt(event.path[1].children[0].innerText);
                        formCategoria.value = event.path[1].children[3].innerText;
                        removeAttributeForm();
                        atualizar.disabled = false;
                    }
                }else{
                    setAttributeForm()
                    atualizar.disabled = true;
                }
                
            })
        })
        //Recuperando a row produto
        const produtoRow = document.getElementsByClassName('produto');
        //Adicionando um event listener para cada row
        Array.from(produtoRow).forEach(prod=>{
            prod.addEventListener('click', event=>{
                let filterProd = dataSearchProd.filter(hit=>hit.id === parseInt(event.path[1].children[0].innerText));
                elementType = "prod";
                elementId = parseInt(event.path[1].children[0].innerText);
                //Recuperando os valores array
                formTitulo.value = filterProd[0].titulo;
                formTituloEng.value = filterProd[0].tituloEng;
                formTituloEsp.value = filterProd[0].tituloEsp;
                formDescricao.value = filterProd[0].descricao;
                formDescricaoEng.value = filterProd[0].descricaoEng;
                formDescricaoEsp.value = filterProd[0].descricaoEsp;
                formCategoria.value = event.path[1].children[3].innerText;
                formSubcategoria.value = '-';
                removeAttributeForm();
                atualizar.disabled = false;
            })
        })
    })
});

function removeAttributeForm(){
    formTitulo.removeAttribute('readonly');
    formDescricao.removeAttribute('readonly');
    formTituloEng.removeAttribute('readonly');
    formDescricaoEng.removeAttribute('readonly');
    formTituloEsp.removeAttribute('readonly');
    formDescricaoEsp.removeAttribute('readonly');
}

function setAttributeForm(){
    formTitulo.setAttribute('readonly', true);
    formDescricao.setAttribute('readonly', true);
    formTituloEng.setAttribute('readonly', true);
    formDescricaoEng.setAttribute('readonly', true);
    formTituloEsp.setAttribute('readonly', true);
    formDescricaoEsp.setAttribute('readonly', true);
}
</file>

<file path="public/javascript/portal/navbar.js">
const productsLink = document.getElementsByClassName('navbar__item--products')[0];
const productsDropdown = document.getElementsByClassName('navbar__products-dropdown')[0];
let dropdownActive = false
const productsLinkMobile = document.getElementsByClassName('navbar__item--products-mobile')[0];
const productsDropdownMobile = document.getElementsByClassName('navbar__products-dropdown-mobile')[0];
let dropdownActiveMobile = false

if (productsLink) {
    productsLink.addEventListener('mouseenter', () => {
        productsDropdown.classList.add('navbar__products-dropdown--active')
    })
    productsLink.addEventListener('mouseleave', () => {
        if (!dropdownActive) {
            productsDropdown.classList.remove('navbar__products-dropdown--active')
        }
    })

    productsLink.addEventListener('click', () => {
        if (!dropdownActive) {
            productsDropdown.classList.add('navbar__products-dropdown--active')
        } else {
            productsDropdown.classList.remove('navbar__products-dropdown--active')
        }
        dropdownActive = !dropdownActive
    })
}

if (productsLinkMobile) {
    productsLinkMobile.addEventListener('click', () => {
        if (!dropdownActiveMobile) {
            productsDropdownMobile.classList.add('navbar__products-dropdown-mobile--active')
            productsLinkMobile.classList.add('navbar__item--products-mobile--active')
        } else {
            productsDropdownMobile.classList.remove('navbar__products-dropdown-mobile--active')
            productsLinkMobile.classList.remove('navbar__item--products-mobile--active')
        }
        dropdownActiveMobile = !dropdownActiveMobile
    })
}

$(document).ready(function () {
    const navBar = $('.navbar');
    const closeIcon = $('.navbar__close-icon');
    const menuIcon = $('.navbar__menu-icon');

    let isScrolling = false;
    let isMenuOpen = false;

    menuIcon.click(function () {
        isMenuOpen = true;
        navBar.addClass('navbar--menu-state');
        navBar.removeClass('navbar--initial-state');
        navBar.removeClass('navbar--scrolled-state');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    })

    closeIcon.click(function () {
        isMenuOpen = false;
        navBar.removeClass('navbar--menu-state');
        checkState();
    })

    $(window).scroll(() => isScrolling = true);

    function switchInto() {
        if (!isMenuOpen) {
            navBar.removeClass('navbar--initial-state');
            navBar.addClass('navbar--scrolled-state');
        }
    };

    function switchStart() {
        if (!isMenuOpen) {
            navBar.removeClass('navbar--scrolled-state');
            navBar.addClass('navbar--initial-state');
        }
    }

    function checkState() {
        if ($(window).scrollTop() > 100) {
                switchInto();
        } else {
                switchStart();
        }
    }

    setInterval(() => {
        if (isScrolling) {
            isScrolling = false;
            checkState();
        }
    }, 100);
})

const langSelector = document.getElementById('langSelector');
const langPt = document.getElementById('langPt');
const langEn = document.getElementById('langEn');
const langEs = document.getElementById('langEs');

langSelector.addEventListener('click', (e) => {
    langSelector.classList.toggle('navbar__lang-selector--active')
});

langPt.addEventListener('click', (e) => {
    let url = '/lang/pt';
    const options = {
        method: 'GET',
        headers: {"Content-type":"application/json"}
    };

    fetch(url, options)
        .then(data => data.json())
        .then(_ => window.location.reload());
})

langEs.addEventListener('click', (e) => {
    let url = '/lang/es';
    const options = {
        method: 'GET',
        headers: {"Content-type":"application/json"}
    };

    fetch(url, options)
        .then(data => data.json())
        .then(_ => window.location.reload());
})

langEn.addEventListener('click', (e) => {
    let url = '/lang/en';
    const options = {
        method: 'GET',
        headers: {"Content-type":"application/json"}
    };

    fetch(url, options)
        .then(data => data.json())
        .then(_ => window.location.reload());
})


const langPtMobile = document.getElementById('langPtMobile');
const langEnMobile = document.getElementById('langEnMobile');
const langEsMobile = document.getElementById('langEsMobile');

langPtMobile.addEventListener('click', (e) => {
    let url = '/lang/pt';
    const options = {
        method: 'GET',
        headers: {"Content-type":"application/json"}
    };

    fetch(url, options)
        .then(data => data.json())
        .then(_ => window.location.reload());
})

langEsMobile.addEventListener('click', (e) => {
    let url = '/lang/es';
    const options = {
        method: 'GET',
        headers: {"Content-type":"application/json"}
    };

    fetch(url, options)
        .then(data => data.json())
        .then(_ => window.location.reload());
})

langEnMobile.addEventListener('click', (e) => {
    let url = '/lang/en';
    const options = {
        method: 'GET',
        headers: {"Content-type":"application/json"}
    };

    fetch(url, options)
        .then(data => data.json())
        .then(_ => window.location.reload());
})
</file>

<file path="views/admin/menulateral.ejs">
<div class="l-sidebar">
    <div class="logo">
      <div class="logo__txt"><a href="/admin" style="text-decoration: none; color:white;"><img id="logo-admin" src="../../public/img/logo-br-img.png" alt="" style="width: 30px;"></a></div>
    </div>
    <div class="l-sidebar__content">
      <nav class="c-menu js-menu">
        <ul class="u-list">
          <%if(usuario.admin && usuario.role === "desenvolvedor"){%>
            <li class="c-menu__item" data-toggle="tooltip" title="Adicionar Categoria">
              <a href="/admin/new/categoria" style="text-decoration: none; color:white">
              <div class="c-menu__item__inner"><i class="fa fa-history" style=" color:white;"></i>
                <div class="c-menu-item__title"><span style=" color:white;">Adicionar categorias</span></div>
              </div>
              </a>
            </li>
            <%}%>
            <!--is-active : classe para tornar um item ativo-->
          <li class="c-menu__item" data-toggle="tooltip" title="Adicionar produtos">
            <a href="/admin/new/produto" style="text-decoration: none;">
            <div class="c-menu__item__inner"><i class="fa fa-file-text-o" style=" color:white;"></i>
              <div class="c-menu-item__title"><span style=" color:white;">Adicionar Produtos</span></div>
            </div>
            </a>
          </li>
          
          <li class="c-menu__item" data-toggle="tooltip" title="Configuracoes">
            <a href="/admin/userconfig"style="text-decoration: none; color:white">
              <div class="c-menu__item__inner"><i class="fa fa-cogs" style=" color:white;"></i>
                <div class="c-menu-item__title"><span style=" color:white;">Settings</span></div>
              </div>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</file>

<file path="views/portal/index.ejs">
<%- include('./header') %>
<%- include('./carrousel') %>
<div class="introduction__header">
    <hr>
    <div class="introduction__header-content mx-auto">
        <%- t.home.apliquimicaIsNow %>
        <span class="d-none d-md-inline-block">
            <%- t.home.aNewConcept %>
            <a class="introduction__header-video-link  d-inline-block pb-1 text-white" href="<%- t.home.videoLink %>" target="_blank">
                <img class="mx-1" src="./public/img/icon-player.svg" alt="" style="width: .825rem; height: .825rem; object-fit: contain" />
                <u><%- t.home.watchTheVideo %></u>
            </a>
        </span>
        <a class="introduction__header-video-link d-md-none d-inline-block pb-1 text-white" href="<%- t.home.videoLink %>" target="_blank">
            <img class="mx-1" src="./public/img/icon-player.svg" alt="" style="width: .825rem; height: .825rem; object-fit: contain" />
            <u><%- t.home.watchTheVideo %></u>
        </a>
    </div>
</div>
<%- include('./home-introduction') %>
<div class="row base-container">
    <% produtos.forEach((produto) => { %>
        <div class="col-sm-12 col-md-6 col-lg-4"><%- include('./card', {produto}) %></div>
    <% }); %>
</div>
<%- include('./home-company') %>
<%- include('./home-partners') %>
<%- include('./footer') %>
</file>

<file path="app.js">
/**
 * Description: Arquivo app principal da aplicacao
 * Author: Findi
 */

 //Declaracoes
const express = require('express');
const favicon = require('serve-favicon')
const app = express();
const dotEnv = require('dotenv');
dotEnv.config();
const morgan = require('morgan');
const usuario = require('./routes/usuario.js');
const aplinova = require('./routes/portal/aplinova.js');
const admin = require('./routes/admin/admin.js');
const path = require('path');
const {bdConnection} = require('./db/connection.js');
const models = require('./models');
const passport = require('passport');
const bodyParser = require('body-parser');
const expressValidator = require('express-validator');
const session = require('express-session');
const flash = require('connect-flash');
const {httpToHttps} = require('./middlewares/httpToHttps');
const {verbTreat} = require('./middlewares/httpverb')

//Variavel global na aplicacao do sequelize
global.sequelize = bdConnection();

//Passando para o modulo passport o proprio passport e o modulo de usuario
require('./config/passport/passport.js')(passport, models.User);

//Setando configuracoes da aplicacao
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'ejs');
app.use('/public', express.static('public'));
app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')))

app.use(httpToHttps);
app.use(bodyParser.urlencoded({extended:true}));
app.use(bodyParser.json());
app.use(morgan('dev'));
//Express validator para formularios
app.use(expressValidator());

//Configurando as sessoes para o passport e connect flash
app.use(session({
    secret: 'aplinova',
    resave: false,
    saveUninitialized: false
}));
//Connect flash
app.use(flash());
app.use(passport.initialize());
app.use(passport.session());

app.use('/login', verbTreat, usuario);
app.use('/', aplinova);
app.use('/admin', verbTreat, admin); //verbtreat muda o req.method

app.listen(process.env.PORT || 3000);
</file>

<file path="public/stylesheets/admin/index.css">
@import './treeview.css';
@import './userconfig.css';
@import './cards.css';
body {
    font-family: 'Roboto', sans-serif;
    font-weight: 400;
    background-color: #f0f3f5;
    margin-top:40px;
}
/*==============================*/
/*====== Recently connected  heading =====*/
/*==============================*/
.memberblock {
	width: 100%;
	float: left;
	clear: both;
	margin-bottom: 15px
}
.member {
	width: 24%;
	float: left;
	margin: 2px 1% 2px 0;
	background: #ffffff;
	border: 1px solid #d8d0c3;
	padding: 3px;
	position: relative;
	overflow: hidden
}
.memmbername {
	position: absolute;
	bottom: -30px;
	background: rgba(0, 0, 0, 0.8);
	color: #ffffff;
	line-height: 30px;
	padding: 0 5px;
	white-space: nowrap;
	text-overflow: ellipsis;
	overflow: hidden;
	width: 100%;
	font-size: 11px;
	transition: 0.5s ease all;
}
.member:hover .memmbername {
	bottom: 0
}
.member img {
	width: 100%;
	transition: 0.5s ease all;
}
.member:hover img {
	opacity: 0.8;
	transform: scale(1.2)
}

.panel-default>.panel-heading {
    color: #607D8B;
    background-color: #ffffff;
    font-weight: 400;
    font-size: 15px;
    border-radius: 0;
    border-color: #e1eaef;
}

.page-header.small {
    position: relative;
    line-height: 22px;
    font-weight: 400;
    font-size: 20px;
}

.favorite i {
    color: #eb3147;
}

.btn i {
    font-size: 17px;
}

.panel {
    box-shadow: 0px 2px 10px 0 rgba(0, 0, 0, 0.05);
    -moz-box-shadow: 0px 2px 10px 0 rgba(0, 0, 0, 0.05);
    -webkit-box-shadow: 0px 2px 10px 0 rgba(0, 0, 0, 0.05);
    -ms-box-shadow: 0px 2px 10px 0 rgba(0, 0, 0, 0.05);
    transition: all ease 0.5s;
    -moz-transition: all ease 0.5s;
    -webkit-transition: all ease 0.5s;
    -ms-transition: all ease 0.5s;
    margin-bottom: 35px;
    border-radius: 0px;
    position: relative;
    border: 0;
    display: inline-block;
    width: 100%;
}
.pad {
    padding-top:10px;
    padding-bottom:20px;
    padding-left:10px;
    padding-right:10px;
}


html, body {
  height: 100%;
  width: 100%;
}

body {
  margin: 0;
  padding: 0;
  font-family: "Open Sans";
  font-size: 14px;
  font-weight: 400;
  background-color: #ececec;
  color: #607D8B;
}

* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

::-webkit-input-placeholder {
  color: #c3c3c3;
}

h1 {
  font-size: 24px;
}

h2 {
  font-size: 20px;
}

h3 {
  font-size: 18px;
}

.u-list {
  margin: 0;
  padding: 0;
  list-style: none;
}

.u-input {
  outline: 0;
  border: 1px solid #d0d0d0;
  padding: 5px 10px;
  height: 35px;
  font-size: 12px;
  -webkit-border-radius: 10px;
  border-radius: 10px;
  background-clip: padding-box;
}

.c-badge {
  font-size: 10px;
  font-weight: 700;
  min-width: 17px;
  padding: 5px 4px;
  border-radius: 100px;
  display: block;
  line-height: 0.7;
  color: #fff;
  text-align: center;
  white-space: nowrap;
  background-color: #f91605;
}
.c-badge--header-icon {
  position: absolute;
  bottom: -9px;
}

.tooltip {
  width: 120px;
}
.tooltip-inner {
  padding: 8px 10px;
  color: #fff;
  text-align: center;
  background-color: #292828;
  font-size: 12px;
  border-radius: 3px;
}
.tooltip-arrow {
  border-right-color: #051835 !important;
}

.hamburger-toggle {
  position: relative;
  padding: 0;
  background: transparent;
  border: 1px solid transparent;
  cursor: pointer;
  order: 1;
}
.hamburger-toggle [class*='bar-'] {
  display: block;
  background: black;
  -webkit-transform: rotate(0deg);
  transform: rotate(0deg);
  -webkit-transition: .2s ease all;
  transition: .2s ease all;
  border-radius: 2px;
  height: 2px;
  width: 24px;
  margin-bottom: 4px;
}
.hamburger-toggle [class*='bar-']:nth-child(2) {
  width: 18px;
}
.hamburger-toggle [class*='bar-']:last-child {
  margin-bottom: 0;
  width: 12px;
}
.hamburger-toggle.is-opened {
  left: 3px;
}
.hamburger-toggle.is-opened [class*='bar-'] {
  background: black;
}
.hamburger-toggle.is-opened .bar-top {
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
  -webkit-transform-origin: 15% 15%;
  transform-origin: 15% 15%;
}
.hamburger-toggle.is-opened .bar-mid {
  opacity: 0;
}
.hamburger-toggle.is-opened .bar-bot {
  -webkit-transform: rotate(45deg);
  transform: rotate(-45deg);
  -webkit-transform-origin: 15% 95%;
  transform-origin: 15% 95%;
  width: 24px;
}
.hamburger-toggle:focus {
  outline-width: 0;
}
.hamburger-toggle:hover [class*='bar-'] {
  background: #88B73A;
}

.header-icons-group {
  display: flex;
  order: 3;
  margin-left: auto;
  height: 100%;
  border-left: 1px solid #cccccc;
}
.header-icons-group .c-header-icon:last-child {
  border-right: 0;
}

.c-header-icon {
  position: relative;
  display: flex;
  float: left;
  width: 70px;
  height: 100%;
  align-items: center;
  justify-content: center;
  line-height: 1;
  cursor: pointer;
  border-right: 1px solid #cccccc; 
}

.c-header-icon a i {
  font-size: 18px;
  line-height: 40px;
  color: #cccccc;
}
.c-header-icon--in-circle {
  border: 1px solid #d0d0d0;
  border-radius: 100%;
}
.c-header-icon:hover i {
  color: #88B73A;
}

.l-header {
  padding-left: 70px;
  position: fixed;
  top: 0;
  right: 0;
  z-index: 10;
  width: 100%;
  background: #ffffff;
  -webkit-transition: padding 0.5s ease-in-out;
  -moz-transition: padding 0.5s ease-in-out;
  -ms-transition: padding 0.5s ease-in-out;
  -o-transition: padding 0.5s ease-in-out;
  transition: padding 0.5s ease-in-out;
}
.l-header__inner {
  height: 100%;
  width: 100%;
  display: flex;
  height: 70px;
  align-items: center;
  justify-content: stretch;
  border-bottom: 1px solid;
  border-color: #cccccc;
}
.sidebar-is-expanded .l-header {
  padding-left: 220px;
}

.c-search {
  display: flex;
  height: 100%;
  width: 350px;
}
.c-search__input {
  border-top-right-radius: 0px;
  border-bottom-right-radius: 0px;
  border-right: 0;
  flex-basis: 100%;
  height: 100%;
  border: 0;
  font-size: 14px;
  padding: 0 20px;
  -webkit-transition: all 0.3s ease-in-out;
  -moz-transition: all 0.3s ease-in-out;
  -ms-transition: all 0.3s ease-in-out;
  -o-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
}

.c-dropdown {
  opacity: 0;
  text-align: left;
  position: absolute;
  flex-direction: column;
  display: none;
  width: 300px;
  top: 30px;
  right: -40px;
  background-color: #fff;
  overflow: hidden;
  min-height: 300px;
  border: 1px solid #d0d0d0;
  -webkit-border-radius: 10px;
  border-radius: 10px;
  background-clip: padding-box;
  -webkit-box-shadow: 0px 5px 14px -1px #cecece;
  -moz-box-shadow: 0px 5px 14px -1px #cecece;
  box-shadow: 0px 5px 14px -1px #cecece;
  -webkit-transition: all 0.3s ease-in-out;
  -moz-transition: all 0.3s ease-in-out;
  -ms-transition: all 0.3s ease-in-out;
  -o-transition: all 0.3s ease-in-out;
  transition: all 0.3s ease-in-out;
}

.l-sidebar {
  width: 70px;
  position: fixed;
  z-index: 10;
  left: 0;
  top: 0;
  /* bottom: 0; */
  height: 100%;
  background: #292828;
  -webkit-transition: width 0.5s ease-in-out;
  -moz-transition: width 0.5s ease-in-out;
  -ms-transition: width 0.5s ease-in-out;
  -o-transition: width 0.5s ease-in-out;
  transition: width 0.5s ease-in-out;
}
.l-sidebar .logo {
  width: 100%;
  height: 70px;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: black;
}
.l-sidebar .logo .logo__txt {
  font-size: 26px;
  line-height: 1;
  color: #fff;
  text-align: center;
  font-weight: 700;
}
.l-sidebar__content {
  height: 100%;
  position: relative;
  /* border: 1px solid red; */
}
.sidebar-is-expanded .l-sidebar {
  width: 220px;
}

.c-menu > ul {
  display: flex;
  flex-direction: column;
}
.c-menu > ul .c-menu__item {
  color: #fff;
  max-width: 100%;
  overflow: hidden;
}
.c-menu > ul .c-menu__item__inner {
  display: flex;
  flex-direction: row;
  align-items: center;
  min-height: 60px;
  position: relative;
  cursor: pointer;
  -webkit-transition: all 0.5s ease-in-out;
  -moz-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  -o-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;
}

/*Item selecionado*/
.c-menu > ul .c-menu__item__inner:before {
  position: absolute;
  content: " ";
  height: 0;
  width: 2px;
  left: 0;
  top: 50%;
  margin-top: -18px;
  background-color: white;
  opacity: 0;
  -webkit-transition: all 0.5s ease-in-out;
  -moz-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  -o-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;
}
.c-menu > ul .c-menu__item.is-active .c-menu__item__inner {
  border-left-color: white;
  background-color: #88B73A;
}
.c-menu > ul .c-menu__item.is-active .c-menu__item__inner i {
  color: white;
}
.c-menu > ul .c-menu__item.is-active .c-menu__item__inner .c-menu-item__title span {
  color:white;
}
.c-menu > ul .c-menu__item.is-active .c-menu__item__inner:before {
  height: 36px;
  opacity: 1;
}
.c-menu > ul .c-menu__item:not(.is-active):hover .c-menu__item__inner {
  background-color: #88B73A;
  border-left-color: #88B73A;
}
.c-menu > ul .c-menu__item i {
  flex: 0 0 70px;
  font-size: 18px;
  font-weight: normal;
  text-align: center;
  -webkit-transition: all 0.5s ease-in-out;
  -moz-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  -o-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;
}
.c-menu > ul .c-menu__item .c-menu-item__expand {
  position: relative;
  left: 100px;
  padding-right: 20px;
  margin-left: auto;
  -webkit-transition: all 1s ease-in-out;
  -moz-transition: all 1s ease-in-out;
  -ms-transition: all 1s ease-in-out;
  -o-transition: all 1s ease-in-out;
  transition: all 1s ease-in-out;
}
.sidebar-is-expanded .c-menu > ul .c-menu__item .c-menu-item__expand {
  left: 0px;
}
.c-menu > ul .c-menu__item .c-menu-item__title {
  flex-basis: 100%;
  padding-right: 10px;
  position: relative;
  left: 220px;
  opacity: 0;
  -webkit-transition: all 0.7s ease-in-out;
  -moz-transition: all 0.7s ease-in-out;
  -ms-transition: all 0.7s ease-in-out;
  -o-transition: all 0.7s ease-in-out;
  transition: all 0.7s ease-in-out;
}
.c-menu > ul .c-menu__item .c-menu-item__title span {
  font-weight: 400;
  font-size: 14px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  -webkit-transition: all 0.5s ease-in-out;
  -moz-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  -o-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;
}
.sidebar-is-expanded .c-menu > ul .c-menu__item .c-menu-item__title {
  left: 0px;
  opacity: 1;
}
.c-menu > ul .c-menu__item .c-menu__submenu {
  background-color: #292828;
  padding: 15px;
  font-size: 12px;
  display: none;
}
.c-menu > ul .c-menu__item .c-menu__submenu li {
  padding-bottom: 15px;
  margin-bottom: 15px;
  border-bottom: 1px solid;
  border-color: #292828;
  color: #88B73A;
}
.c-menu > ul .c-menu__item .c-menu__submenu li:last-child {
  margin: 0;
  padding: 0;
  border: 0;
}

main.l-main {
  width: 100vw;
  height: 100%;
  padding: 70px 0 0 70px;
  -webkit-transition: padding 0.5s ease-in-out;
  -moz-transition: padding 0.5s ease-in-out;
  -ms-transition: padding 0.5s ease-in-out;
  -o-transition: padding 0.5s ease-in-out;
  transition: padding 0.5s ease-in-out;
}

main.l-main .content-wrapper {
  padding: 25px;
  height: 100%;
}
main.l-main .content-wrapper .page-content {
  border-top: 1px solid #d0d0d0;
  padding-top: 25px;
}
main.l-main .content-wrapper--with-bg .page-content {
  background: #fff;
  border-radius: 3px;
  border: 1px solid #d0d0d0;
  padding: 25px;
}
main.l-main .page-title {
  font-weight: 400;
  margin-top: 0;
  margin-bottom: 25px;
}
.sidebar-is-expanded main.l-main {
  padding-left: 220px;
}

a.list-group-item {
    height:auto;
    min-height:120px;
}
a.list-group-item.active small {
    color:#fff;
}

.btn-admin{
  background-color:#88B73A;
  color: white;
  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  -webkit-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  -moz-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.btn-admin:hover{
  background-color: black;
  color:white;
}

.btn-admin:active {
  background: #353535 !important;
  color: white !important;
}

.btn-admin:focus {
  box-shadow: none !important;
  outline: 0px !important;
}

.btn-admin:disabled{
  background-color: #353535 ;
  color:white;
}

.new-input{
  width: 100%;
  border: none;
  border-bottom: 2px solid #353535;
  border-left: 2px solid #353535;
  border-right: 2px solid #353535;
  outline: none;
  padding-bottom: 0.5rem;
  border-radius: 2px 2px 10px 10px;
  padding-left: 0.5rem;
  font-weight: 600;
  background-color: transparent;
}

.new-select{
  background-color: transparent;
  border: none;
  border-bottom: 2px solid #353535;
  border-left: 2px solid #353535;
  border-right: 2px solid #353535;
  border-radius: 2px 2px 10px 10px;
  padding-bottom: 0.5rem;
  padding-left: 0.5rem;
  font-weight: 600;
  outline: none;
  /* text-shadow:0 1px 0 #88B73A; */
}
.input-text-prepend{
  display: flex;
  justify-content: center;
  align-items: center;
  width: 40px;
  border-top: 2px solid #353535;
  border-bottom: 2px solid #353535;
  border-left: 2px solid #353535;
  background-color: #88B73A;
  border-radius: 5px 2px 2px 5px;
  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  -webkit-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  -moz-box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

.input-text-prepend:hover{
  background-color: #353535;
}


#novo-produto input[type=text]:focus, textarea:focus {
  border-right: 2px solid #88B73A;
  border-bottom: 2px solid #88B73A;
  border-left: 2px solid #88B73A;
}

#novo-produto select:focus{
  border-right: 2px solid #88B73A !important;
  border-bottom: 2px solid #88B73A !important;
  border-left: 2px solid #88B73A !important;
}

.header-title{
  display: flex;
  flex-direction: row;
  justify-content: center;
  margin-bottom: 30px;
  background-color: #88B73A;
  height: 60px;
  align-items: center;
  color: white;
  font-weight: bold;
  font-size: 20px;
}

.translater-icon{
  width: 30px;
}

.modal-header{
  align-items: center !important;
}

.cabecalho-input-form{
  font-size: 1.2rem;
  color: black;
}

@media (max-width: 576px) {
  body{
    font-size: 10px;
  }

  .c-header-icon{
    width: 55px;
  }

  .c-header-icon a i{
    font-size: 18px;
  }

  .c-header-icon i{
    font-size: 18px;
  }

  .c-header-icon.js-hamburger {
    display: none;
  }

  .c-header-icon.has-dropdown {
    display: none;
  }
  .c-search__input{
    padding: 0;
  }

  .translater-icon{
    width: 20px;
    height: 20px;
  }

  .header-title{
    height: 40px;
    font-size: 15px;
    margin-bottom: 10px;
  }

  .treeview{
    margin-bottom: 20px;
  }

  .btn-finalizacao-acao{
    text-align: center;
  }

  .form-mobile{
    margin-top: 20px;
  }

  .cabecalho-input-form{
    font-size: 1rem;
  }
}
</file>

<file path="public/stylesheets/components/home-introduction.css">
.introduction__container {
    display: flex;
    flex-direction: column;
    width: 100%;
}

@media (min-width: 640px) {
    .introduction__container {
        padding: 1rem 1rem 0 1rem;
    }
}

.introduction__header {
    background-color: #292828;
    display: flex;
    flex-direction: row;
    align-items: center;
    color: white;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.25;
    width: 100%;
    padding: 0.75rem 0;
    position: relative;
}

.introduction__header-content {
    width: 70%;
    text-align: center;
    font-weight: normal;
    font-size: 1.125rem;
    z-index: 20;
    background-color: #292828;
    padding: 0 1rem;
}

.introduction__header-video-link {
    font-size: .825rem;
}

.introduction__header hr {
    background-color: #88B73A;
    height: 5px;
    width: 100%;
    font-size: medium;
    margin: 0;
    position: absolute;
}

.introduction__content {
    display: flex;
    flex-direction: column;
}

.introduction__main-text {
    color: #292828;
    line-height: 1.25;
    font-size: 1.75rem;
    width: 100%;
    font-weight: bolder;
}

.introduction__main-text .introduction__main-text--lighter {
    font-weight: 300;
}

.introduction__main-text i {
    font-size: 1rem;
    color: #f91605;
    position: relative;
    top: -5px;
}

.introduction__secondary-text {
    width: 100%;
    font-size: 1.25rem;
    line-height: 1.25;
}

@media (min-width: 640px) {
    .introduction__container {
        padding: 2rem 3rem 0 3rem;
    }

    .introduction__content {
        flex-direction: row;
    }

    .introduction__header-video-link {
        font-size: 1rem;
    }

    .introduction__main-text {
        font-size: 2.5rem;
        width: 50%;
        margin-right: 1rem;
        padding-right: 4rem;
        font-weight: bolder;
    }

    .introduction__main-text i {
        font-size: 1rem;
        color: #f91605;
        position: relative;
        top: -5px;
    }

    .introduction__main-text .introduction__main-text--lighter {
        font-weight: 300;
    }

    .introduction__secondary-text {
        width: 50%;
    }

    .introduction__header {
        font-size: 1.25rem;
    }

    .introduction__header-content {
        min-width: 80%;
        font-size: 1.5rem;
        padding: 0 1.5rem;
    }
}

@media (min-width: 1280px) {
    .introduction__header-content {
        min-width: 85%;
    }
}

@media (min-width: 1640px) {
    .introduction__header-content {
        width: 80%;
        padding: 0 0.5rem;
    }
}
</file>

<file path="views/admin/header.ejs">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!-- <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->
<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8">
    <title>Aplinova Adm</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://kit.fontawesome.com/3bb5488a16.js" crossorigin="anonymous"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
    <style class="cp-pen-styles">@import url("https://fonts.googleapis.com/css?family=Open+Sans:300,400,400i,600,700&subset=latin-ext");</style>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="/public/stylesheets/admin/index.css">
    <link rel="apple-touch-icon" sizes="57x57" href="/public/img/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/public/img/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/public/img/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/public/img/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/public/img/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/public/img/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/public/img/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/public/img/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/public/img/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/public/img/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/img/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/public/img/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/img/icons/favicon-16x16.png">
    <link rel="manifest" href="/public/img/icons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/public/img/icons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>

<body>
  <header class="l-header">
    <div class="l-header__inner clearfix">
      <div class="c-header-icon js-hamburger">
        <div class="hamburger-toggle">
          <span class="bar-top"></span>
          <span class="bar-mid"></span>
          <span class="bar-bot"></span>
        </div>
      </div>
      <div class="c-header-icon has-dropdown">
        <%if(usuario.admin){%>
        <span class="c-badge c-badge--header-icon animated shake">
          <%=inativos%>
        </span>
        <%}%>
        <a href="/admin/userconfig"><i class="fa fa-bell"></i></a>
        <div class="c-dropdown c-dropdown--notifications">
          <div class="c-dropdown__header"></div>
          <div class="c-dropdown__content"></div>
        </div>
      </div>
      <div class="c-search" id="index-input-search">
        <input class="c-search__input u-input" id="searchText" placeholder="Search..." type="text"/>
      </div>
      <div class="c-header-icon" id="search"><i class="fas fa-search"></i></div>
      <div class="header-icons-group">
        <div class="c-header-icon logout"><a href="/admin/logout"><i class="fa fa-power-off" style="color:black;"></i></a></div>
      </div>
    </div>
  </header>
  <%-include('./menulateral')%>
</body>
<main class="l-main" >
  <!-- content-wrapper content-wrapper--with-bg -->
  <div>
<script src="../../public/javascript/admin/header.js"></script>
</file>

<file path="views/admin/userconfig.ejs">
<%- include('./header') %>
<div style="display: flex; flex-direction: row; justify-content: center; margin-bottom: 50px; background-color: #88B73A; height: 60px; align-items: center; color: white; font-weight: bold; font-size: 20px;">CONFIG USUARIO</div>
<div class="container-fluid">
    <div class="row justify-content-start">
        <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xs-4">
            <div class="card text-center" style="background-color: transparent;">
                <h5 class="card-header">Usuario Logado</h5>
                <div class="card-body">
                    <div class="row justify-content-center">
                        <div class="card shadow-sm" style="width: 18rem;">
                            <div class="d-flex flex-row justify-content-center align-items-center mt-3"><i class="far fa-user-circle fa-8x"></i></div>
                            <%if(usuario){%>
                            <div class="card-body">
                              <h5 class="card-title"><%=usuario.firstName%> <%=usuario.lastName%></h5>
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item"><%=usuario.email%></li>
                                <li class="list-group-item">admin: <%=usuario.admin%></li>
                                <li class="list-group-item">role: <%=usuario.role%></li>
                                <li class="list-group-item">username: <%=usuario.username%></li>
                                <li class="list-group-item"><a href="#" class="btn btn-admin" data-toggle="modal" data-target="#exampleModal" data-id=<%=usuario.id%> id="btn-mudarsenha">Mudar senha</a></li>
                              </ul>
                              <%}%>
                        </div>
                    </div>
                </div>
              </div>
        </div>
        <div class="col-12 col-sm-12 col-md-12 col-lg-8 col-xs-8">
          <div class="card text-center" style="background-color: transparent;">
            <h5 class="card-header">Lista de Usuários do Sistema</h5>
            <%if(usuario.admin){%>
            <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Nome</th>
                  <th scope="col">Sobrenome</th>
                  <th scope="col">Email</th>
                  <th scope="col">Ativo</th>
                  <th scope="col">Admin</th>
                  <th scope="col">Papel</th>
                  <th scope="col">Ações</th>
                </tr>
              </thead>
              <tbody>
                <%if(ativos && ativos.filter(hit=>(usuario.admin && usuario.role === "desenvolvedor" ? hit.active === true && hit.id !== usuario.id : hit.active===true && hit.id !== usuario.id && hit.role === 'visitante')).length){%>
                  <%ativos.filter(hit=>(usuario.admin && usuario.role === "desenvolvedor" ? hit.active === true && hit.id !== usuario.id : hit.active===true && hit.id !== usuario.id && hit.role === 'visitante')).forEach(hit=>{%>
                    <tr>
                      <th scope="row"><%=hit.id%></th>
                      <td><%=hit.firstName%></td>
                      <td><%=hit.lastName%></td>
                      <td><%=hit.email%></td>
                      <td><%=hit.active%></td>
                      <td><%=hit.admin%></td>
                      <td><%=hit.role%></td>
                      <td>
                        <a href="/admin/user/<%=hit.id%>?method=delete" class="deleteItem" data-method="delete">
                          <i class="far fa-times-circle fa-lg" style="color: #88B73A;"></i>
                        </a>
                      </td>
                    </tr>
                  <%})%>
                <%}%>
              </tbody>
            </table>
            </div>
            <%}else{%>
              <p>Lista de usuarios somente para administradores</p>
            <%}%>
          </div>
        </div>
    </div>
    <%if(usuario.admin){%>
    <div class="row mt-4 justify-content-start">
        <div class="col-12 col-sm-12 col-md-12 col-lg-4 col-xl-4">
            <div class="card text-center" style="background-color: transparent;">
                <div class="card-header">Lista de requisicao de usuario</div>
                <div class="card-body">
                    <div class="row shadow-sm border rounded list-group">
                        <%if(ativos && ativos.filter(hit=>(hit.active === false && hit.role === 'visitante')).length){%>
                          <%ativos.filter(hit=>(hit.active === false && hit.role === 'visitante')).forEach(hit=>{%>
                            <button class="list-group-item list-group-item-action inativo" data-toggle="modal" data-target="#inativos" data-id=<%=hit.id%>><%=hit.firstName%></button>
                          <%})%>
                        <%}else{%>
                          <p>Nao ha usuarios inativos</p>
                        <%}%>
                    </div>
                </div>
                <!-- <%#if(ativos  && ativos.length){%>
                <div class="card-footer text-muted">

                  Menos de 2 dias atras
                </div>
                <%#}else{%>
                <div class="card-footer text-muted">
                    Nenhuma data
                </div>
                <%#}%> -->
              </div>
        </div>
        <!-- <div class="col-md-8"></div> -->
    </div>
    <%}%>
</div>
 
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content" style="background-color: #f0f3f5;">
        <div class="modal-header" style="background-color:#88B73A;">
          <h5 class="modal-title" id="exampleModalLabel" style="color: white;">MUDE SUA SENHA</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"><i class="fas fa-times-circle" style="color: white;"></i></span>
          </button>
        </div>
        <div class="modal-body">
            <form>
                <div class="form-group">
                    <label for="exampleInputEmail1">New Password</label>
                    <input type="password" class="form-control" id="inputPassword1" placeholder="Enter password">
                </div>
                <div class="form-group">
                    <label for="exampleInputPassword1">Repeat Password</label>
                    <input type="password" class="form-control" id="inputPassword2" placeholder="Repeat password">
                </div>
                <p id="msg" style="color:red; font-family: sans-serif;"></p>
                <button type="submit" class="btn btn-admin" id="btn-salvar">Salvar</button>
            </form>
        </div>
        <input class="d-none" type="text" id="method" name="method" value="patch">
      </div>
    </div>
  </div>


  <!-- Modal Inativos -->
  <div class="modal fade" id="inativos" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content" style="background-color: #f0f3f5;">
        <div class="modal-header" style="background-color:#88B73A;">
          <h5 class="modal-title" id="exampleModalLabel" style="color: white;">CONFIGURACOES DO USUARIO</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"><i class="fas fa-times-circle" style="color: white;"></i></span>
          </button>
        </div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row justify-content-center">
              <div class="card shadow-sm" style="width: 18rem;">
                <div class="d-flex flex-row justify-content-center align-items-center mt-3"><i class="far fa-user-circle fa-8x"></i></div>
                <div class="card-body text-center">
                  <h5 class="card-title" id="title"></h5>
                </div>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item" id="email"></li>
                  <li class="list-group-item" id="role"></li>
                  <li class="list-group-item" id="username"></li>
                </ul>
              </div>
            </div>
            <div class="row justify-content-start">
              <form class="w-100">
                <%if(usuario.admin && usuario.role === "desenvolvedor"){%>
                  <div class="custom-control custom-switch mt-2">
                      <input type="checkbox" class="custom-control-input" name="admin" id="admin">
                      <label class="custom-control-label" for="admin">Admin</label>
                  </div>
                <%}else{%>
                  <div class="custom-control d-none custom-switch mt-2">
                    <input type="checkbox" class="custom-control-input" name="admin" id="admin">
                    <label class="custom-control-label" for="admin">Admin</label>
                  </div>
                <%}%>
                <div class="custom-control custom-switch mt-2">
                  <input type="checkbox" class="custom-control-input" name="active" id="active">
                  <label class="custom-control-label" for="active">Active</label>
                </div>
                <input class="d-none" type="text" id="inativoMethod" value="patch">
                <p id="msg" style="color:red; font-family: sans-serif;"></p>
                <div class="w-100 d-flex justify-content-between">
                  <button type="submit" class="btn btn-admin" id="btn-salvar-inativo">Salvar</button>
                  <button type="submit" class="btn btn-danger-admin" id="btn-bloquear-inativo">Bloquear</button>
                </div>
              </form>
            </div>
        </div>
        </div>
        <input class="d-none" type="text" id="method" name="method" value="patch">
      </div>
    </div>
  </div>
  <script src="../../public/javascript/admin/userconfig.js"></script>
<%- include('./footer') %>
</file>

<file path="views/portal/produtos/corantes.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner">
  <div class="row justify-content-center h-100" style="background: no-repeat center/cover url('./public/img/corantes.jpg')">

  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.colors %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap mt-3 produto-view__categories">
    <%if(corantes){%>
      <% corantes.forEach((item) => { %>
        <%- include('../categoria-item', {itemName: item.dataValues[`titulo${t.code}`]}) %>
      <% })%>
    <%}%>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.colors %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/foodservice.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner" style="background: no-repeat center/cover url('./public/img/food_service.jpg')">
  <div class="row justify-content-center h-100">
    <!-- foodService -->
  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.foodService %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-3 produto-view__categories produto-view__categories--foodservice produto-view__categories--subcategories">
    <% if(foodservice){ %>
      <% foodservice.forEach(hit => { %>
        <%- include('../subcategoria-item', {hit}) %>
      <%})%>
    <% } %>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.foodService %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/ingredientesfuncionais.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner">
  <div class="row justify-content-center h-100" style="background: no-repeat center/cover url('./public/img/ingredientes_funcionais.jpg')">
    <!-- functionalIngredients -->
  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.functionalIngredients %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap mt-3 produto-view__categories produto-view__categories--ingfuncionais">
    <% if(ingredientes){ %>
      <% ingredientes.forEach(hit => { %>
        <%- include('../subcategoria-item', {hit}) %>
      <%})%>
    <% } %>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.functionalIngredients %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/produtosnaturais.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner">
  <div class="row justify-content-center h-100" style="background: no-repeat center/cover url('./public/img/produtos_naturais.jpg')">
    <!-- naturalProducts -->
  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.naturalIngredients %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap mt-3 produto-view__categories">
    <%if(produtos){%>
      <% produtos.forEach((item) => { %>
        <%- include('../categoria-item', {itemName: item.dataValues[`titulo${t.code}`]}) %>
      <% })%>
    <%}%>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.naturalProducts %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/produtosveganos.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner">
  <div class="row justify-content-center h-100" style="background: no-repeat center/cover url('./public/img/prod_veganos.jpg')">
    <!-- veganAndOrganic -->
  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2"></div>
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.veganAndOrganic %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap mt-3 produto-view__categories produto-view__categories--prodveganos">
    <% if(veganos){ %>
      <% veganos.forEach(hit => { %>
        <%- include('../subcategoria-item', {hit}) %>
      <%})%>
    <% } %>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.veganProducts %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/proteinas.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner" style="background: no-repeat center/cover url('./public/img/proteinas.jpg')">
  <div class="row justify-content-center h-100">

  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.proteins %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-3 produto-view__categories produto-view__categories--proteinas produto-view__categories--subcategories">
    <% if(proteinas){ %>
      <% proteinas.forEach(hit => { %>
        <%- include('../subcategoria-item', {hit}) %>
      <%})%>
    <% } %>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.proteins %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/subacucarfibras.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner">
  <div class="row justify-content-center h-100" style="background: no-repeat center/cover url('./public/img/subs_acucar.jpg')">
    <!-- sugarSubstitutesAnd -->
  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.sugarSubstitutesAnd %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap mt-3 produto-view__categories produto-view__categories--subacucar">
    <% if(subsAc){ %>
      <% subsAc.forEach(hit => { %>
        <%- include('../subcategoria-item', {hit}) %>
      <%})%>
    <% } %>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.sugarSubstitutes %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/header.ejs">
<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script src="https://kit.fontawesome.com/3bb5488a16.js" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/swiper@5.4.1/js/swiper.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="./public/stylesheets/portal/index.css">
        <link rel="stylesheet" href="./public/stylesheets/portal/produto-view.css">
        <link rel="stylesheet" href="https://unpkg.com/swiper@5.4.1/css/swiper.min.css">
        <title>Aplinova</title>
    </head>
    <body style="max-width: 100vw;">
        <div id="main" class="row p-0 mx-0" style="width: 100%">
            <div id="mainCol" class="col px-0 mx-0" style="width: 100%">
                <div class="base-container navbar navbar--initial-state mx-0">
                    <a href="/">
                        <img class="navbar__logo navbar__logo--light" src="./public/img/logo-light.svg" alt="Logo" />
                        <img class="navbar__logo navbar__logo--dark" src="./public/img/logo-dark.svg" alt="Logo" />
                    </a>
                    <div class="ml-auto navbar__items-initial">
                        <div class="navbar__initial-item d-none d-xl-inline-block">+55 11 2949-6644</div>
                        <a class="navbar__initial-item" href="https://web.whatsapp.com/send?phone=5511964741323" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                            +55 (11) 96474-1323
                        </a>
                        <div class="navbar__lang-container">
                            <div id="langSelector" class="navbar__lang-selector">
                                <div class="navbar__lang-option navbar__lang-option--active"><%- t.navbarCode %></div>
                                <div id="langPt" class="navbar__lang-option <%- t.code === '' ? 'navbar__lang-option--selected' : '' %>">
                                    PT
                                </div>
                                <div id="langEn" class="navbar__lang-option <%- t.code === 'Eng' ? 'navbar__lang-option--selected' : '' %>">
                                    EN
                                </div>
                                <div id="langEs" class="navbar__lang-option <%- t.code === 'Esp' ? 'navbar__lang-option--selected' : '' %>">
                                    ES
                                </div>
                            </div>
                        </div>
                        <i class="pl-5 navbar__item navbar__icon navbar__menu-icon fas fa-bars fa-2x"></i>
                    </div>
                    <div class="ml-auto navbar__items-active">
                        <div class="navbar__item navbar__item--products">
                          <div class="navbar__products-dropdown-container">
                            <div class="navbar__products-dropdown">
                              <a class="navbar__products-dropdown-item" href="/aromas"><%- t.home.flavors %></a>
                              <a class="navbar__products-dropdown-item" href="/corantes"><%- t.home.colors %></a>
                                <a class="navbar__products-dropdown-item" href="/prodveganos"><%- t.home.veganAndOrganic %></a>
                                <a class="navbar__products-dropdown-item" href="/proteinas"><%- t.home.proteins %></a>
                                <a class="navbar__products-dropdown-item" href="/subacucar"><%- t.home.sugarSubstitutesAnd %></a>
                                <a class="navbar__products-dropdown-item" href="/prodnaturais"><%- t.home.naturalIngredients %></a>
                                <a class="navbar__products-dropdown-item" href="/revconfeitaria"><%- t.home.confectioneryCoatings %></a>
                                <a class="navbar__products-dropdown-item text-lowercase" href="/foodservice"><%- t.home.foodService %></a>
                                <a class="navbar__products-dropdown-item" href="/ingredientesfuncionais"><%- t.home.functionalIngredients %></a>
                            </div>
                          </div>
                          <a class="navbar__link"><%- t.home.products %></a>
                        </div>
                        <a class="navbar__item navbar__link text-lowercase" href="/nossaempresa"><%- t.home.company %></a>
                        <a class="navbar__item navbar__link text-lowercase" href="/#parceiros"><%- t.home.partners %></a>
                        <a class="navbar__item navbar__link text-lowercase" href="/contato"><%- t.home.contact %></a>
                        <div class="navbar__item navbar__icon navbar__close-icon fas fa-times fa-2x"></div>
                    </div>
                    <i class="ml-auto d-md-none navbar__item navbar__icon navbar__menu-icon fas fa-bars fa-2x"></i>
                    <div class="ml-auto d-md-none navbar__item navbar__icon navbar__close-icon fas fa-times fa-2x"></div>
                    <div class="col p-0 pt-5 d-md-none navbar__items-mobile">
                        <div class="navbar__item navbar__item--products-mobile">
                            <a class="navbar__link text-lowercase"><%- t.home.products %></a>
                            <img class="navbar__products-icon" src="./public/img/icon-produtos.svg" alt="Item" />
                        </div>
                        <div class="navbar__products-dropdown-mobile-container">
                            <div class="navbar__products-dropdown-mobile">
                                <a class="navbar__products-dropdown-item" href="/aromas"><%- t.home.flavors %></a>
                                <a class="navbar__products-dropdown-item" href="/corantes"><%- t.home.colors %></a>
                                <a class="navbar__products-dropdown-item" href="/prodveganos"><%- t.home.veganAndOrganic %></a>
                                <a class="navbar__products-dropdown-item" href="/proteinas"><%- t.home.proteins %></a>
                                <a class="navbar__products-dropdown-item" href="/subacucar"><%- t.home.sugarSubstitutesAnd %></a>
                                <a class="navbar__products-dropdown-item" href="/prodnaturais"><%- t.home.naturalIngredients %></a>
                                <a class="navbar__products-dropdown-item" href="/revconfeitaria"><%- t.home.confectioneryCoatings %></a>
                                <a class="navbar__products-dropdown-item text-lowercase" href="/foodservice"><%- t.home.foodService %></a>
                                <a class="navbar__products-dropdown-item" href="/ingredientesfuncionais"><%- t.home.functionalIngredients %></a>
                            </div>
                        </div>
                        <a class="navbar__item navbar__link" href="/nossaempresa"><%- t.home.company %></a>
                        <a class="navbar__item navbar__link" href="/#parceiros"><%- t.home.partners %></a>
                        <a class="navbar__item navbar__link" href="/contato"><%- t.home.contact %></a>
                        <div class="row mx-1 mt-5 mb-4 justify-content-between">
                            <div id="langPtMobile" class="navbar__mobile-lang-btn <%= t.code === '' ? 'navbar__mobile-lang-btn--active' : '' %>">
                                POR
                            </div>
                            <div id="langEsMobile" class="navbar__mobile-lang-btn <%= t.code === 'Esp' ? 'navbar__mobile-lang-btn--active' : '' %>">ESP</div>
                            <div id="langEnMobile" class="navbar__mobile-lang-btn <%= t.code === 'Eng' ? 'navbar__mobile-lang-btn--active' : '' %>">ENG</div>
                        </div>
                    </div>
                </div>
</file>

<file path="controllers/admin/admin.js">
/**
 * Description: Modulo de controle de troca de dados com o banco mysql
 * Author: Findi
 */

//Importando referencias aos modulos de banco de dados
const models = require('../../models');
const Categoria = models.Categoria;
const Header = models.Header;
const User = models.User;
const Produto = models.Produto;
const {Op} = require('sequelize');
const bcrypt = require('bcrypt-nodejs');

//Funcao de envio de mensagens e status para todas as telas
async function sendingData(req, res, urlView, argumentos){
    //Recuperando o usuario da session criada
    const userId = req._passport.session.user;
    //Verificando se existe argumentos
    if(!argumentos)argumentos={};
    //Verifica se existe erro e mensagens setadas
    if(argumentos){
      if(!argumentos.message) argumentos.message=undefined;
      if(!argumentos.error) argumentos.error=undefined;
    }

    let user = await User.findByPk(userId);
    let qtd;
    if(user){
      argumentos.usuario = user.dataValues;
      qtd = await User.count({where:{[Op.and]:[{active:0},{role:{[Op.notLike]:'bloqueado'}}]}});
      //[Op.like]:`%${req.query.prod}%`
      //{[Op.and]:[{idCategoriaPai: req.params.id},{idCategoria:0}]}
      argumentos.inativos = qtd
      res.render(urlView, argumentos);
    }else{
      argumentos.usuario = undefined;
      argumentos.inativos = undefined;
      res.render(urlView, argumentos);
    }
}

exports.newCategoria = async (req, res)=>{
  //Formulario de criacao de categoria
  await sendingData(req, res, './admin/newcategoria');
}

//Funcao de mostrar tela principal do admin
exports.index = async (req, res)=>{
  //Lista de categorias, subcategorias e produtos
  let categorias = await Categoria.findAll({include:{model:Produto, as: 'produtos'}});
  if(categorias){
    //Envia erros da validacao de delecao de categoria
    await sendingData(req, res, './admin/index', {categorias: categorias, error: req.flash('error')});
  }else{
    await sendingData(req, res, './admin/index', {message: "Nao foram encontradas nenhuma categoria"});
  }
}

//Funcao de criar uma nova categoria
//Para criar uma nova categoira e necessario seguir os passos adiante
//Todas as funcoes referentes "createCategoria" se inciam com "cc"
exports.createCategoria = async (req, res)=>{
  var categoria = {};
  //2 - Verificar se e uma categoria ou subcategoria
  if(req.body.categoriaChecked !== 'on'){
    //4 - Caso seja subcategoria: colocar 0 no idCategoria e idCategoriaPai recebera o id do select categoria
    categoria.titulo = req.body.categoriaTitulo;
    categoria.tituloEng = req.body.categoriaTituloEng;
    categoria.tituloEsp = req.body.categoriaTituloEsp;
    categoria.descricao = req.body.categoriaDescricao;
    categoria.descricaoEng = req.body.categoriaDescricaoEng;
    categoria.descricaoEsp = req.body.categoriaDescricaoEsp;
    categoria.idCategoria = 0;
    categoria.idCategoriaPai = parseInt(req.body.categoriaPai);

  }else{
    categoria.titulo = req.body.categoriaTitulo;
    categoria.tituloEng = req.body.categoriaTituloEng;
    categoria.tituloEsp = req.body.categoriaTituloEsp;
    categoria.descricao = req.body.categoriaDescricao;
    categoria.descricaoEng = req.body.categoriaDescricaoEng;
    categoria.descricaoEsp = req.body.categoriaDescricaoEsp;
    //3 - Caso seja categoria: Verificar qual o ultimo registro da categoria e recuperar o idCategoria e somar + 1
    await Categoria.max('idCategoria')
    .then(async function(categoriaIdMax){
      let nextCategoria;
      if(!categoriaIdMax){
        nextCategoria = 1;
      }else{
        nextCategoria = await parseInt(categoriaIdMax) + 1;
      }
      categoria.idCategoria = nextCategoria;
      categoria.idCategoriaPai = nextCategoria;
    })
    .catch(function(error){
      //Tratar erro que ira retornar ao usuario
      console.log(error);
    })
  }

  Categoria.create(categoria)
  .then(function(newCategoria){
    let data = {
      titulo: req.body.headerTitulo,
      tituloEng: req.body.headerTituloEng,
      tituloEsp: req.body.headerTituloEsp,
      descricao: req.body.headerDescricao,
      descricaoEng: req.body.headerDescricaoEng,
      descricaoEsp: req.body.headerDescricaoEsp
    }
    newCategoria.createHeader(data)
    return newCategoria;
  })
  .then(function(done){
    //Connect flash done
    req.body.categoriaChecked === "on" ? res.redirect('/admin') : res.json(done);
  })
  .catch(function(error){
    req.body.categoriaChecked === "on" ? res.redirect('/admin') : res.json(error);
  })
}

//Funcao que retorna o formulario de novo produto 
exports.newProduto = (req, res)=>{
  sendingData(req, res, './admin/newProduto');
}

//Criacao de um novo produto - Todas as funcoes referente a criacao de produto possuem "cp" como
//primeiro caracter
exports.createProduto = (req, res)=>{
  //1 - criar o produto com titulo e descricao
  const dataBody = {
    titulo: req.body.prodTitulo,
    tituloEng: req.body.prodTituloEng,
    tituloEsp: req.body.prodTituloEsp,
    descricao: req.body.prodDescricao,
    descricaoEng: req.body.prodDescricaoEng,
    descricaoEsp: req.body.prodDescricaoEsp
  }

  var novoProduto;

  Produto.create(dataBody)
  .then(function(novoProd){
    novoProduto = novoProd;
    return Categoria.findOne({where:{idCategoria: parseInt(req.body.categoriaPai)}})
  })
  .then(function(categoria){
    if(req.body.subCategoriaChecked === 'on'){
      //2 - criar o vinculo entre o produto e a categoria / subcategoria
      return novoProduto.setCategorias(categoria);
    }else{
      return novoProduto.setCategorias([req.body.subCategoria]);
    }
  })
  .then(function(vinculoCatProd){
    // TODO: adicionar um connect flash
    res.redirect('/admin');
  })
  .catch(function(error){
    // TODO:  Verificar a necessidade de enviar um connect flash
    console.log(error);
  })
}

//Somente deleta a categoria caso ela nao tenha produtos
exports.destroyCategoria = async (req, res)=>{
  //1 - Achar a categoria que foi escolhida
  //2 - Recuperar todas as subcategorias
  //3 - Deletar tanto categorias quanto subcategorias e produtos
  
  let categoria = await Categoria.findByPk(req.params.id); //1
  let categorias = await Categoria.findAll({where: {idCategoriaPai: categoria.dataValues.idCategoria}}); //2
  let arrayIdCats = categorias.map(hit=>hit.dataValues.id);
  await Categoria.destroy({where: {id: arrayIdCats}}); //3
  res.redirect('/admin');
}

//Funcao que realiza o destroy do produto
exports.destroyProduto = (req, res)=>{
  //Caso seja um produto
  Produto.destroy({where:{id:req.params.id}})
  .then(function(result){
    res.redirect('/admin');
  })
  .catch(function(error){
    //Tratar com connect flash
    console.log(error);
  });
}

//Funcao que realiza o destroy da categoria
exports.destroySubCategoria = (req, res)=>{
  //Caso seja uma subcategoria
  Categoria.destroy({where:{id: req.params.id}})
  .then(function(result){
    res.redirect('/admin');
  })
  .catch(function(error){
    //Tratar com connect flash
    console.log(error);
  });
}

//Ajax que retorna o produto para a tela
exports.showProduto = (req, res)=>{
  Produto.findOne({where:{id: req.params.id}, include:{model:Categoria, as: 'categorias'}})
  .then(function(produto){
    res.json({produto});
  })
  .catch(function(error){
    res.json({error});
  });
}

//Ajax que retorna o produto para a tela - ssc
exports.showSubCategoria = (req, res)=>{
  Categoria.findOne({where:{id: req.params.id}})
    .then(function(subCategoria){
      res.json({subCategoria});
    })
    .catch(function(error){
      res.json({error});
    });
}

//Ajax que retorna a categoria
exports.showCategoria = (req, res)=>{
  Categoria.findOne({where: {idCategoria: req.params.id}})
  .then(function(categoria){
    res.json({categoria});
  })
  .catch(function(error){
    res.json({error});
  })
}

exports.showCategoriaPrincipal=(req, res)=>{
  Categoria.findOne({where: {id: req.params.id}})
  .then(function(categoria){
    res.json({categoria});
  })
  .catch(function(error){
    res.json({error});
  })
}

//Ajax para atualizar a subcategoria
exports.updateSubCategoria = (req, res)=>{
  const data = {
    titulo: req.body.titulo,
    tituloEng: req.body.tituloEng,
    tituloEsp: req.body.tituloEsp,
    descricao: req.body.descricao,
    descricaoEng: req.body.descricaoEng,
    descricaoEsp: req.body.descricaoEsp
  }

  Categoria.update(data, {where: {id: req.params.id}})
  .then(function(categoria){
    res.json({update:"ok"});
  })
  .catch(function(error){
    res.json({error});
  })
}

//Ajax para atualizar o produto
exports.updateProduto = (req, res)=>{
  const data = {
    titulo: req.body.titulo,
    tituloEng: req.body.tituloEng,
    tituloEsp: req.body.tituloEsp,
    descricao: req.body.descricao,
    descricaoEng: req.body.descricaoEng,
    descricaoEsp: req.body.descricaoEsp
  }
  
  Produto.update(data, {where: {id: req.params.id}})
  .then(function(produto){
    res.json({update:"ok"});
  })
  .catch(function(error){
    res.json({error});
  })
}

exports.updateCategoria = (req, res)=>{
  const data = {
    titulo: req.body.titulo,
    tituloEng: req.body.tituloEng,
    tituloEsp: req.body.tituloEsp,
    descricao: req.body.descricao,
    descricaoEng: req.body.descricaoEng,
    descricaoEsp: req.body.descricaoEsp
  }
  Categoria.update(data, {where:{id: req.params.id}})
  .then(function(categoria){
    res.json({update:"ok"});
  })
  .catch(function(error){
    res.json({error});
  })
}

//AJAX Search da pagina principal
exports.search = (req, res)=>{
  var result = {
  }

  Produto.findAll({where:{titulo:{[Op.like]:`%${req.query.prod}%`}}, include:{model:Categoria, as:'categorias'}})
  .then(function(resultProd){
    if(resultProd.length){
      result.resultProd = resultProd;
    }
    return Categoria.findAll({where:{titulo:{[Op.like]:`%${req.query.prod}%`}}, include:{model:Produto, as:'produtos'}})
  })
  .then(function(resultCat){
    result.resultCat = resultCat;
    res.json({result});
  })
  .catch(function(error){
    res.json({error});
  })
}

//Funcao para capturar as categorias do banco
//Categoria (idCategoria) === 0  -> subcategoria
//Categoria === (?!==0) -> categoria principal (idCategoriaPai)
exports.getCategorias = (req, res)=>{
  var errors;
  Categoria.findAll({where:{idCategoria: {[Op.ne]:0}}})
  .then(result=>{
    res.json({data: result, error:undefined});
  })
  .catch(error=>{
    errors = "Nao foi possivel recuperar as categorias"
    res.json({data:undefined, error:error});
  });
}

exports.getSubCategoria = (req, res)=>{
  Categoria.findAll({where:{[Op.and]:[{idCategoriaPai: req.params.id},{idCategoria:0}]}})
  .then(function(subCategoria){
    res.json({data: subCategoria, error:undefined});
  })
  .catch(function(error){
    errors = "Nao foi possivel recuperar as subcategorias"
    res.json({data:undefined, error:error});
  })
}

//Recuperando as configuracoes de usuario
exports.userconfig = async (req, res)=>{
  let users = await User.findAll();
  if(users){
    await sendingData(req, res, './admin/userconfig', {ativos: users.map(hit=>hit.dataValues)});
  }else{
    await sendingData(req, res, './admin/userconfig', {error: 'Houve um problema ao buscar os usuarios nao ativos', ativos: undefined});
  }
}

//Logout da aplicacao
exports.logout = (req, res)=>{
  req.logout();
  res.redirect('/login/show');
}

//Ajax para comparar passwords entre o novo password e o atual do usuario
exports.comparePassword = (req, res)=>{
  var isValidPassword = function(userpass, password){
    return bcrypt.compareSync(password, userpass);
  }

  User.findByPk(req._passport.session.user)
  .then(function(user){
    if(!user){
      res.json({igual:false});
    }
    res.json({igual: isValidPassword(user.password, req.body.newpassword)});
  })
  .catch(function(error){
    //pensar o que vou fazer com esse retorno
    res.json({error});
  })
}

exports.updateUser = (req, res)=>{

  const generateHashPassword = function(password){
    return bcrypt.hashSync(password, bcrypt.genSaltSync(8), null);
  }

  var data = {}

  if(req.body.role){
    data = {
      admin: req.body.admin,
      active: req.body.active,
      role: req.body.role
    }
  }else if(req.body.admin && req.body.active){
    data = {
      admin: req.body.admin,
      active: req.body.active
    }
  }
  
  if(req.body.password){
    data = {};
    data.password = generateHashPassword(req.body.password);
  }
  
  User.update(data, {where:{id:req.params.id}})
  .then(function(rowsUpdated){
    res.json({rowsUpdated});
  })
  .catch(function(error){
    res.json({error});
  })
}

exports.deleteUser = (req, res)=>{
  // User.update({active: false, role: 'bloqueado'},{where:{id: req.params.id}})
  User.destroy({where:{id: req.params.id}})
  .then(function(result){
    res.redirect('/admin/userconfig');
  })
  .catch(function(error){
    //Tratar com connect flash
    console.log(error);
  });
}

exports.getUser = (req, res)=>{
  User.findByPk(req.params.id)
  .then(function(user){
    res.json({user});
  })
  .catch(function(error){
    res.json({error});
  })
}
</file>

<file path="public/javascript/admin/newProduto.js">
/**
 * Javascript que trata os dados de insercao de subcategorias e produtos
 * Author: Daniel
 */

 //Declaracao de variaveis
const categoriaPai = document.getElementById("categoriaPai");
const divSubCategoria = document.getElementById("divSubCategoria");
const subCategoria = document.getElementById("subCategoria");
const naoSou = document.getElementById('subCategoriaChecked');
const newSubcategoria = document.getElementById('newSubcategoria');
const msgsubinfo = document.getElementById('msgsubinfo');

//Elementos para o form dentro da modal
const headerTitulo = document.getElementById('headerTitulo');
const headerDescricao = document.getElementById('headerDescricao');
const headerTituloEng = document.getElementById('headerTituloEng');
const headerDescricaoEng = document.getElementById('headerDescricaoEng');
const headerTituloEsp = document.getElementById('headerTituloEsp');
const headerDescricaoEsp = document.getElementById('headerDescricaoEsp');
const categoriaTitulo = document.getElementById('categoriaTitulo');
const categoriaDescricao = document.getElementById('categoriaDescricao');
const categoriaTituloEng = document.getElementById('categoriaTituloEng');
const categoriaDescricaoEng = document.getElementById('categoriaDescricaoEng');
const categoriaTituloEsp = document.getElementById('categoriaTituloEsp');
const categoriaDescricaoEsp = document.getElementById('categoriaDescricaoEsp');
const testeFechar = document.getElementById('testeFechar');

//Formulario
const formTituloPt = document.getElementById('formTituloPt');
const formTituloEng = document.getElementById('formTituloEng');
const formTituloEsp = document.getElementById('formTituloEsp');
const formDescricaoPt = document.getElementById('formDescricaoPt');
const formDescricaoEsp = document.getElementById('formDescricaoEsp');
const formDescricaoEng = document.getElementById('formDescricaoEng');

//Botoes das flags
const euaFlag = document.getElementById('eua-flag');
const espFlag = document.getElementById('esp-flag');
const ptFlag = document.getElementById('pt-flag');

//Botoes das flags de categoria
const euaCatFlag = document.getElementById('eua-cat-flag');
const espCatFlag = document.getElementById('esp-cat-flag');
const ptCatFlag = document.getElementById('pt-cat-flag');

//Carregamento da pagina
window.onload = event=>{
    if(categoriaPai.options.length === 0){
        getCategorias()
        .then(function(data){
            if(data !== 0){
                data.data.forEach((element, index, array)=>{
                    categoriaPai[index] = new Option(element.titulo, element.idCategoria, false, false);
                });
                return getSubCategoria(categoriaPai.options[categoriaPai.selectedIndex].value);
            }
        })
        .then(function(sub){
            if(sub !== 0){
                sub.data.forEach((element, index, array)=>{
                    subCategoria[index] = new Option(element.titulo, element.id, false, false);
                })
            }
        })
        .catch(function(error){
            console.log("Nao ha subcategorias");
        });
    }

    //Setando as flags
    espFlag.style.opacity = 0.4;
    euaFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 1;

    //Setando as flags das categorias
    espCatFlag.style.opacity = 0.4;
    euaCatFlag.style.opacity = 0.4;
    ptCatFlag.style.opacity = 1;
}

//Variacao do nao ser uma subcategoria
naoSou.addEventListener('change', function(event){
    if(event.srcElement.checked){
        divSubCategoria.style.display = 'none';
    }else{
        divSubCategoria.style.display = 'block';
    }
  });


categoriaPai.addEventListener('change', function(event){
    subCategoria.options.length = 0;
    getSubCategoria(categoriaPai.options[categoriaPai.selectedIndex].value)
    .then(function(sub){
        if(sub !== 0){
            sub.data.forEach((element, index, array)=>{
                subCategoria[index] = new Option(element.titulo, element.id, false, false);
            });
            if(!naoSou.checked){
                divSubCategoria.style.display = 'block';
            } 
        }
    })
    .catch(function(erro){
        subCategoria.options.length = 0;
        // alert("Esta categoria nao possui subcategoria");
    })
})

function getCategorias(){
    return new Promise((resolve, reject)=>{
        $.get('/admin/categorias', function(data){
            if(data.data.length){
                resolve(data);
            }else{
                reject(0);
            }
        })
    })
}

function getSubCategoria(categoriaPaiId){
    return new Promise((resolve, reject)=>{
        $.get(`/admin/subcategorias/${categoriaPaiId}`, function(data){
            if(data.data.length){
                resolve(data);
            }else{
                reject(0);
            }
        })
    })
}

//Ajax da nova subCategoria
newSubcategoria.addEventListener('click', function(event){
    event.preventDefault();
    newSubcategoria.disabled = true;

    if(headerTitulo.value === "" || headerTituloEng.value === "" || headerTituloEsp.value === "" || categoriaTitulo.value === "" || categoriaTituloEng.value === "" || categoriaTituloEsp.value === ""){
        msgsubinfo.innerHTML = "Todas os campos precisam ser preenchidos";
        msgsubinfo.style.color = "red";
        return 0;
    }

    postAdminSubCategoria()
    .then(function(newSubCategoria){
        return getSubCategoria(newSubCategoria.idCategoriaPai);
    })
    .then(function(sub){
        if(sub !== 0){
            sub.data.forEach((element, index, array)=>{
                subCategoria[index] = new Option(element.titulo, element.id, false, false);
            });
            //$('#exampleModalCenter').modal('toggle');
            msgsubinfo.innerHTML = "Sua subcategoria foi inserida";
            msgsubinfo.style.color = "blue";
            newSubcategoria.disabled = false;
        }
    })
    .catch(function(error){
        msgsubinfo.innerHTML = "Nao foi possivel inserir a nova subcategoria";
        msgsubinfo.style.color = "red";
        newSubcategoria.disabled = false;
    });    

});

//Funcao que realiza o AJAX para criacao de uma subcategoria
function postAdminSubCategoria(){
     //Ler do formulario os dados
    const body = {
        headerTitulo: headerTitulo.value,
        headerTituloEng: headerTituloEng.value,
        headerTituloEsp: headerTituloEsp.value,
        headerDescricao: headerDescricao.value,
        headerDescricaoEng: headerDescricaoEng.value,
        headerDescricaoEsp: headerDescricaoEsp.value,
        categoriaChecked: '0', //Not on para ser sub
        categoriaTitulo: categoriaTitulo.value,
        categoriaTituloEng: categoriaTituloEng.value,
        categoriaTituloEsp: categoriaTituloEsp.value,
        categoriaDescricao: categoriaDescricao.value,
        categoriaDescricaoEng: categoriaDescricaoEng.value,
        categoriaDescricaoEsp: categoriaDescricaoEsp.value,
        categoriaPai: categoriaPai.options[categoriaPai.selectedIndex].value //numero
    }
    return new Promise((resolve, reject)=>{
        $.post("/admin/categoria", body, function(data){
            if(data){
                resolve(data);
            }else{
                reject(0)
            }
        }, "json");
    })
}

//Acao para o botao de bandeira EUA
euaFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 0.4;
    euaFlag.style.opacity = 1;
    removeFlagClass('eua');
});

//Acao para o botao de bandeira Esp
espFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espFlag.style.opacity = 1;
    euaFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 0.4;
    removeFlagClass('esp');
});

//Acao para o botao de bandeira EUA
ptFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    ptFlag.style.opacity = 1;
    euaFlag.style.opacity = 0.4;
    espFlag.style.opacity = 0.4;
    removeFlagClass('pt');
});

//Acao para o botao de bandeira EUA
euaCatFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espCatFlag.style.opacity = 0.4;
    ptCatFlag.style.opacity = 0.4;
    euaCatFlag.style.opacity = 1;
    removeCatFlagClass('eua');
});

//Acao para o botao de bandeira Esp
espCatFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espCatFlag.style.opacity = 1;
    euaCatFlag.style.opacity = 0.4;
    ptCatFlag.style.opacity = 0.4;
    removeCatFlagClass('esp');
});

//Acao para o botao de bandeira EUA
ptCatFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    ptCatFlag.style.opacity = 1;
    euaCatFlag.style.opacity = 0.4;
    espCatFlag.style.opacity = 0.4;
    removeCatFlagClass('pt');
});

 //Removendo a flag class dos botes e bandeiras
 function removeCatFlagClass(flag){
    const eleEua = document.getElementsByClassName('cat-eua');
    const elePt = document.getElementsByClassName('cat-pt');
    const eleEsp = document.getElementsByClassName('cat-esp');

    Array.from(eleEua).forEach(hit=>{
        flag === 'eua' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
    
    Array.from(elePt).forEach(hit=>{
        flag === 'pt' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
    
    Array.from(eleEsp).forEach(hit=>{
        flag === 'esp' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
}
</file>

<file path="public/stylesheets/components/subcategoria-item.css">
.subcategoria-item {
    width: 100%;
    display: flex;
    flex-direction: column;
    padding: 0 0 0 0.75rem;
    align-items: center;
}

.subcategoria-item .subcategoria-item__icon {
    width: 1.125rem;
    height: 1.125rem;
    margin-right: 0.5rem;
    margin-top: 0.5rem;
}

.subcategoria-item .subcategoria-item__text {
    font-weight: 700;
    color: #292828;
    font-size: 1.6rem;
    line-height: 1.375;
    width: 90%;
}

.subcategoria-item ul li {
    list-style: initial !important;
}

.subcategoria-item .subcategoria-item__list {
    margin-top: 1rem;
}

.subcategoria-item .subcategoria-item__list p {
    margin-bottom: 0.75rem;
    font-size: 1.4rem;
    padding-right: 0.5rem;
    min-width: 275px;
    max-width: 310px;
}

@media (max-width: 640px) {
    .subcategoria-item__list-container {
        width: 100%;
    }

    .subcategoria-item__title {
        width: 100%;
    }
}

@media (min-width: 641px) and (max-width: 960px) {
    .subcategoria-item {
        width: 40%;
        height: 100%;
    }
}

@media (min-width: 641px) and (max-width: 1025px){
    .produto-view__categories--foodservice .subcategoria-item {
        width: 40% !important;
    }
}

@media (min-width: 961px) {
    .subcategoria-item {
        width: 33.333333%;
        height: 100%;
    }

    .subcategoria-item .subcategoria-item__text {
        width: 60% !important;
    }

    .produto-view__categories--subacucar .subcategoria-item__text {
        width: 69% !important;
    }
}
</file>

<file path="public/stylesheets/portal/empresa.css">
.empresa__container {
    display: flex;
    flex-direction: column;
    padding-right: 1rem;
}

@media (min-width: 640px) {
    .empresa__container {
        padding-right: 1rem;
    }
}

.empresa__header {
    display: flex;
    flex-direction: row;
    align-items: center;
    color: #292828;
    line-height: 1.25;
    font-size: 2.5rem;
}

.empresa__header i {
    color: red;
    font-size: medium;
}

.empresa__content {
    display: flex;
    flex-direction: column;
}

.empresa__main-text {
    color: #292828;
    line-height: 1.25;
    font-size: 1.25rem;
    width: 100%;
    font-weight: 400;
    text-decoration: none;
}

.empresa-estrutura {
    width: 100%;
    border-top: 6px #88B73A solid;
}

.empresa-estrutura .empresa-estrutura__header {
    display: flex;
    flex-direction: row;
    align-items: center;
    color: #88B73A;
    font-size: 2.5rem;
    font-weight: 400;
    line-height: 1.25;
}

.empresa-estrutura .empresa-estrutura__header i {
    color: red;
    font-size: medium;
}

.empresa-estrutura .empresa-estrutura__content {
    background-color: #292828;
    padding-top: 2rem;
    padding-bottom: 2rem;
    padding-left: 4rem;
}

.empresa-estrutura .empresa-estrutura__text {
    color: #F0F6ED;
    font-size: 1.125rem;
}

.empresa__secondary-text {
    font-size: 2rem;
    line-height: 1.125;
    width: 100%;
}

.empresa__bottom-images-container {
    height: 600px;
    margin-bottom: 5rem;
}

.empresa__bottom-first-image {
    width: 35%;
    margin-right: 2rem;
}

.empresa__bottom-second-image {
    width: 60%;
}

.empresa__subheader {
    padding: 0 8rem 0.75rem 8rem;
    font-size: 1.75rem;
    text-align: center;
    line-height: 1.25;
}

.timeline {
    display: flex;
    flex-direction: row;
    width: 100%;
    justify-content: center;
    margin: 6rem 0;
    padding-top: 2rem;
}

.timeline .timeline__divider {
    position: relative;
    height: unset;
    width: 1px;
    margin: 0;
}

.timeline .timeline__divider:before {
    position: absolute;
    content: ' ';
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;
    border-right: 2px dotted #88B73A;
}

.timeline .timeline__container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding-bottom: 0.5rem;
    padding-top: 1.5rem;
}

@media (max-width: 370px) {
    .empresa-estrutura .empresa-estrutura__header {
        font-size: 2rem;
    }

    .empresa-estrutura .empresa-estrutura__content {
        padding: 2rem 1rem;
    }

    .empresa__header {
        font-size: 2rem;
    }

    .empresa__subheader {
        padding: 0 15px;
        text-align: left;
    }

    .timeline {
        margin: 3rem 0;
    }

    .timeline .timeline__container.timeline__container--left .timeline__item {
        display: none;
    }

    .timeline .timeline__container .timeline__item .timeline__item-body img {
        width: 250px;
    }

    .timeline .timeline__container .timeline__item {
        margin-bottom: 2.5rem !important;
    }

    .timeline .timeline__container .timeline__item .timeline__item-body {
        max-width: 250px;
    }

    .timeline__marker hr {
        width: 12px !important;
    }
}

@media (min-width: 371px) and (max-width: 640px) {
    .empresa-estrutura .empresa-estrutura__header {
        font-size: 2rem;
    }

    .empresa-estrutura .empresa-estrutura__content {
        padding: 2rem 1rem;
    }

    .empresa__header {
        font-size: 2rem;
    }

    .empresa__subheader {
        padding: 0 15px;
        text-align: left;
    }

    .timeline {
        margin: 3rem 0;
    }

    .timeline .timeline__container.timeline__container--left .timeline__item {
        display: none;
    }

    .timeline .timeline__container .timeline__item .timeline__item-body img {
        width: 275px;
    }

    .timeline .timeline__container .timeline__item {
        margin-bottom: 2.5rem !important;
    }

    .timeline .timeline__container .timeline__item .timeline__item-body {
        max-width: 275px;
    }

    .timeline__marker hr {
        width: 20px !important;
    }
}

@media (min-width: 641px) and (max-width: 834px) {
    .timeline .timeline__container .timeline__item .timeline__item-body img {
        width: 300px;
    }

    .timeline .timeline__container .timeline__item .timeline__item-body {
        max-width: 300px;
    }
}


.timeline .timeline__container .timeline__item:last-child {
    margin-bottom: 0;
}

.timeline .timeline__item--first {
    margin-top: -2.75rem;
    padding-top: 0 !important;
}

.timeline .timeline__container .timeline__item {
    display: flex;
    flex-direction: row;
    margin-bottom: 4.5rem;
}

.timeline .timeline__container.timeline__container--left .timeline__item {
    flex-direction: row-reverse;
    align-self: flex-start;
    justify-content: flex-start;
    text-align: right;
}

.timeline .timeline__container.timeline__container--left .timeline__marker {
    flex-direction: row-reverse;
}

.timeline__marker {
    display: flex;
    flex-direction: row;
    padding-top: 0.75rem;
}

.timeline__marker hr {
    height: 1px;
    width: 32px;
    margin: 0.5rem 0 0 0;
    border-top: 2px dotted #88B73A;
}

.timeline__marker img {
    width: 20px;
    height: 20px;
}

.timeline__item-content {
    padding: 0 0.25rem;
    margin-top: -0.25rem;
    margin-right: 0.25rem;
    margin-left: 0.25rem;
}

.timeline__item-header {
    color: #88B73A;
    font-size: 2rem;
    font-weight: 700;
    vertical-align: top;
}

.timeline__item-body {
    max-width: 350px;
}

.timeline__item-body img {
    margin-top: 1rem;
    width: 350px;
}
</file>

<file path="views/portal/produtos/aromas.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner">
  <div class="row justify-content-center h-100" style="background: no-repeat center/cover url('./public/img/aromas.jpg')">

  </div>
</div>
<div class="produto-view__content">
  <div class="row my-4">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="col-md-8 col-lg-6">
          <div class="row align-items-end" style="height:100%;">
            <div class="col d-flex justify-content-center align-items-center produto-view__title">
              <span><%- t.home.flavors %></span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap produto-view__categories">
    <%if(aromas){%>
      <% aromas.forEach(item=>{ %>
        <%- include('../categoria-item', {itemName: item.dataValues[`titulo${t.code}`]}) %>
      <%})%>
    <%}%>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.flavors %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/produtos/revconfeitaria.ejs">
<%- include('../header') %>
<div id="banner" class="produto-view__banner" style="background: no-repeat center/cover url('./public/img/rev_confeitaria.jpg')">
  <div class="row justify-content-center h-100">
    <!-- confectioneryCoatings -->
  </div>
</div>
<div class="produto-view__content">
  <div class="row mt-3">
    <div class="col">
      <div class="row justify-content-center px-2">
        <div class="row align-items-center" style="height:100%;">
          <div class="col d-flex justify-content-center align-items-center produto-view__title">
            <span><%- t.home.confectioneryCoatings %></span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-wrap mt-3 produto-view__categories produto-view__categories--revconfeitaria">
    <%if(revestimento){%>
      <% revestimento.forEach((item) => { %>
        <%- include('../categoria-item', {itemName: item.dataValues[`titulo${t.code}`]}) %>
      <% })%>
    <%}%>
  </div>
  <div class="row base-container my-3 my-md-4 mx-0">
    <div class="col produto-view__segments">
      <div class="row flex-nowrap align-items-start p-3">
        <i class="fas fa-square" style="margin-top: 0.6rem;"></i><span><b><%- t.produtos.segments%>:</b> <%- t.produtos.confectioneryCoatings %></span>
      </div>
    </div>
  </div>
</div>
<%- include('../footer') %>
</file>

<file path="views/portal/carrousel.ejs">
<div id="banner" class="row px-0 mx-0 w-100">
    <div class="col px-0">
    <div id="carouselBanner" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
          <li data-target="#carouselBanner" data-slide-to="0" class="active"></li>
          <li data-target="#carouselBanner" data-slide-to="1"></li>
          <li data-target="#carouselBanner" data-slide-to="2"></li>
          <li data-target="#carouselBanner" data-slide-to="3"></li>
          <li data-target="#carouselBanner" data-slide-to="4"></li>
          <li data-target="#carouselBanner" data-slide-to="5"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="./public/img/slider_subs_acucar.jpg">
                <div class="carousel-caption">
                    <div class="carousel-caption__text"><%- t.home.theBestSolutionsInSugar %></div>
                    <a href="/subacucar" class="btn--expand mt-3">
                <span class="btn--expand__circle">
                  <span class="icon arrow"></span>
                </span>
                        <span class="btn--expand__text"><%- t.home.learnMore %></span>
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img class="carousel-item__prodveganos" src="./public/img/slider_prod_veganos.jpg">
                <div class="carousel-caption">
                    <div class="carousel-caption__text"><%- t.home.theBestSolutionsInVegan %></div>
                    <a href="/prodveganos" class="btn--expand mt-3">
                <span class="btn--expand__circle">
                  <span class="icon arrow"></span>
                </span>
                        <span class="btn--expand__text"><%- t.home.learnMore %></span>
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="./public/img/slider_corantes.jpg">
                <div class="carousel-caption">
                    <div class="carousel-caption__text"><%- t.home.theBestSolutionsInColors %></div>
                    <a href="/corantes" class="btn--expand mt-3">
                <span class="btn--expand__circle">
                  <span class="icon arrow"></span>
                </span>
                        <span class="btn--expand__text"><%- t.home.learnMore %></span>
                    </a>
                </div>
            </div>
          <div class="carousel-item carousel-item--proteinas">
            <img src="./public/img/slider_proteinas.jpg">
            <div class="carousel-caption">
                <div class="carousel-caption__text">
                    <%- t.home.theBestSolutionsInProteins %>
                </div>
                <a href="/proteinas" class="btn--expand mt-3">
                  <span class="btn--expand__circle">
                    <span class="icon arrow"></span>
                  </span>
                  <span class="btn--expand__text"><%- t.home.learnMore %></span>
                </a>
            </div>
          </div>
            <div class="carousel-item">
                <img src="./public/img/slider_aromas.jpg">
                <div class="carousel-caption">
                    <div class="carousel-caption__text"><%- t.home.theBestSolutionsInFlavors %></div>
                    <a href="/aromas" class="btn--expand mt-3">
                <span class="btn--expand__circle">
                  <span class="icon arrow"></span>
                </span>
                        <span class="btn--expand__text"><%- t.home.learnMore %></span>
                    </a>
                </div>
            </div>
          <div class="carousel-item">
            <img src="./public/img/slider_food.jpg">
            <div class="carousel-caption">
              <div class="carousel-caption__text"><%- t.home.theBestSolutionsInFood %></div>
              <a href="/foodservice" class="btn--expand mt-3">
                <span class="btn--expand__circle">
                  <span class="icon arrow"></span>
                </span>
                <span class="btn--expand__text"><%- t.home.learnMore %></span>
              </a>
            </div>
          </div>
        </div>
        <a class="carousel-control-prev" href="#carouselBanner" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselBanner" role="button" data-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>
    </div>
</div>
</file>

<file path="package.json">
{
  "name": "projeto-aplinova",
  "version": "1.0.0",
  "description": "Projeto para empresa aplinova",
  "main": "index.js",
  "scripts": {
    "start": "node app.js",
    "dev": "nodemon app.js"
  },
  "author": "Daniel & Gabriel",
  "license": "ISC",
  "dependencies": {
    "bcrypt-nodejs": "0.0.3",
    "body-parser": "^1.19.0",
    "connect-flash": "^0.1.1",
    "dotenv": "^8.2.0",
    "ejs": "^3.0.2",
    "express": "^4.17.1",
    "express-session": "^1.17.1",
    "express-validator": "^5.3.1",
    "morgan": "^1.10.0",
    "mysql2": "^2.1.0",
    "node-fetch": "^2.6.0",
    "nodemailer": "^6.4.8",
    "nodemon": "^2.0.3",
    "passport": "^0.4.1",
    "passport-local": "^1.0.0",
    "path": "^0.12.7",
    "sequelize": "^5.21.13",
    "serve-favicon": "^2.5.0"
  },
  "devDependencies": {
    "sequelize-cli": "^5.5.1"
  }
}
</file>

<file path="locales/es.js">
module.exports = {
  code: 'Esp',
  navbarCode: 'ES',
  home: {
    products: 'productos',
    flavors: 'sabores',
    colors: 'colores',
    proteins: 'Proteínas',
    sugarSubstitutesAnd: 'edulcorantes y fibras solubres',
    naturalIngredients: 'productos naturales',
    veganAndOrganic: 'productos veganos y orgánicos',
    functionalIngredients: 'ingredientes funcionales',
    confectioneryCoatings: 'capas para confitería',
    foodService: 'Food Service',
    company: 'Compañía',
    partners: 'Socios',
    contact: 'Contacto',
    theBestSolutionsInProteins: 'Las mejores soluciones <p><strong>en proteínas</p></strong>',
    theBestSolutionsInFlavors: 'Las mejores soluciones <p><strong>en sabores</p></strong>',
    theBestSolutionsInVegan: 'Las mejores soluciones <p><strong>en productos veganos</p></strong>',
    theBestSolutionsInSugar: 'Las mejores soluciones <p><strong>en edulcorantes y fibras solubres</p></strong>',
    theBestSolutionsInColors: 'Las mejores soluciones <p><strong>en corantes</p></strong>',
    theBestSolutionsInFood: 'Las mejores soluciones <p><strong>en food service</p></strong>',
    learnMore: 'APRENDA MÁS',
    apliquimicaIsNow: 'Apliquimica ahora es <b>Aplinova</b>.',
    aNewConcept: 'Un nuevo concepto con el mismo compromiso.',
    watchTheVideo: 'Mira el video',
    videoLink: 'https://youtu.be/gr3FVl8XQEU',
    providingQualityProducts: '<span class="introduction__main-text--lighter">Productos de</span> calidad <span class="introduction__main-text--lighter">para ayudar a nuestros</span> clientes <span class="introduction__main-text--lighter">lograr sus</span> objetivos',
    weOfferA: 'Ofrecemos una línea diversificada de sabores, edulcorantes, proteínas, extractos vegetales y otros ingredientes para las industrias de alimentos, bebidas, suplementos, nutrición de animal, cosméticos y otras.',
    weAreConstantly: 'Estamos en constante búsqueda de nuevos productos, siempre priorizando un estándar de alta calidad.',
    ourCompany: '<span class="font-weight-light">Nuestra</span> <b class="ml-2">compañía</b>',
    foundedIn1987: 'Fundada en 1987, inicialmente bajo el nombre de Apliquimica, Aplinova es una compañía brasileña con sede administrativa, laboratorio de aplicaciones, almacén y planta ubicados en la ciudad de São Paulo.',
    aLongEstablished: 'Como proveedora tradicional de ingredientes para el mercado brasileño, la compañía está siempre buscando innovaciones que puedan ayudar a los clientes a lanzar productos diferenciados, naturales, funcionales, veganos y además competitivos en precio.',
    ourTeamIs: 'Contamos con profesionales con amplia experiencia en este mercado que acatan a la cultura de la compañía a priorizar al cliente, valorar el profesionalismo y la competencia, y respetar nuestros estándares éticos.',
    ourPartners: '<span class="font-weight-light">Nuestros</span> <b class="ml-2">socios</b>',
    aplinovaPartnersWith: 'Aplinova cuenta con socios internacionales de alto nivel, que se destacan por su competencia comercial, tecnológica e innovadora en sus respectivos campos de actividad.',
    locations: 'LOCACIONES',
    headquarters: 'Dirección',
    manufacturingPlant: 'Planta',
    map: 'Mapa',
    allRightsReserved: 'Todos los derechos reservados.',
  },
  produtos: {
    segments: 'Segmentos',
    flavors: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosméticos, Nutrición de Animal y Pet Food.',
    colors: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosméticos, Nutrición de Animal y Pet Food.',
    proteins: 'Alimentos, Bebidas, Suplementos, Nutrición de Animal y Pet Food.',
    sugarSubstitutes: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosméticos, Nutrición de Animal y Pet Food.',
    naturalProducts: 'Alimentos, Bebidas, Suplementos, Nutrición de Animal y Pet Food.',
    veganProducts: 'Alimentos, Bebidas, Suplementos, Nutrición de Animal y Pet Food.',
    functionalIngredients: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosméticos, Nutrición de Animal y Pet Food.',
    confectioneryCoatings: 'Chocolates y Confitería.',
    foodService: 'Panadería, Confitería, Heladería, Lácteos, Frutas y Verduras.',
    titles: {
      sugarSubstitutesAnd: 'Edulcorantes y<br> Fibras Solubres',
      naturalIngredients: 'Productos <br>Naturales',
    }
  },
  nossaempresa: {
    aTrajectoryBuilt: '<span class="font-weight-light">Una trayectoria de</span> <b>credibilidad</b> <span class="font-weight-light">e</span> <b>innovación</b>',
    ourCompany: 'Nuestra compañía',
    youCanHave: '“Usted puede tener todo el dinero del mundo, pero si usted no es una persona ética y moral, no tiene nada.”',
    henryRKravis: 'Henry R. Kravis, cofundador de Kohlberg Kravis Roberts & Co.',
    facilities: 'Estructura',
    aplinovasFacilitiesInclude: 'Aplinova cuenta con una sede administrativa/comercial, laboratorio de aplicación y calidad, almacén y planta propios ubicados en la ciudad de São Paulo. Los laboratorios permiten que nuevos productos y aplicaciones sean desarrollados.',
    inAdditionTo: 'Además del desarrollo constante de nuevos productos, la estructura instalada de la compañía garantiza el control de un alto estándar de calidad de productos, así como de las materias primas recibidas.',
    ourManufactoringUnit: 'La planta cuenta con una infraestructura completa para la producción de sabores, extractos, colorantes, edulcorantes y otros productos. El equipo está compuesto por un personal técnico con experiencia que ha colaborado con la compañía desde hace muchos años.',
    aplinovaStrivesFor: 'Aplinova valora la calidad de sus productos, trabajando para mejorar constantemente su planta y laboratorios.',
  },
  ourHistory: {
    title: '<span class="font-weight-light">Nuestra</span> <b class="font-weight-bold ml-2">Historia</b>',
    timeline: {
      year1987: {
        title: 'Fundación',
        body: 'Apliquimica establece su sede en la ciudad de São Paulo y comienza la distribución de productos químicos.',
      },
      year1990: {
        title: 'Expansión de infraestructura',
        body: 'La compañía adquiere un terreno en la ciudad de São Paulo y construye su planta.'
      },
      year1995: {
        title: 'Asociaciones con proveedores estadounidenses',
        body: 'Apliquimica se asocia con fabricantes estadounidenses tales como Sethness Caramel Color y Universal Flavors y comienza la distribución de ingredientes para la industria de alimentos.',
      },
      year2000: {
        title: 'Producción propia',
        body: 'Apliquimica desarrolla la tecnología y la estructura para su propia producción de sabores, extractos vegetales y mezclas de colores y edulcorantes.',
      },
      year2009: {
        title: 'Nueva gestión',
        body: 'Nueva generación de profesionales asume la gestión de la compañía.',
      },
      year2017: {
        title: '2017 - Nueva sede administrativa',
        body: 'La compañía traslada la sede administrativa a un entorno más espacioso.',
      },
      year2018: {
        title: 'Nuevo liderazgo',
        body: 'Su nueva estructura societaria y de gestión pasa a contar con profesionales experimentados del mercado de ingredientes, así como con asesores de negocios y financieros.',
      },
      year2019a: {
        title: 'Nueva sede administrativa y laboratorio de aplicación',
        body: 'La compañía inaugura su nuevo laboratorio de aplicación, así como una nueva sede administrativa, más espaciosa y moderna. ',
      },
      year2019b: {
        title: 'Expansión del portafolio',
        body: 'La compañía amplía la gama de productos ofreciendo nuevos ingredientes naturales, orgánicos y funcionales.',
      },
      year2020: {
        title: 'Una nueva cara para una nueva fase',
        body: 'Apliquimica se reinventa como Aplinova.',
      }
    },
  },
  contato: {
    aplinovaIsAlways: 'Nuestra atención al cliente marca nuestra diferencia',
    letsChat: 'Contáctenos',
    fillOutThe: 'Rellene el formulario y nuestro equipo técnico se pondrá en contacto lo antes posible.',
    orIfYou: 'O si prefiere, envíenos su solicitud a: ',
    name: 'NOMBRE',
    email: 'E-mail',
    phone: 'TELÉFONO',
    company: 'COMPAÑÍA',
    message: 'MENSAJE',
    submit: 'Enviar'
  },
}
</file>

<file path="locales/pt.js">
module.exports = {
  code: '',
  navbarCode: 'PT',
  home: {
    products: 'produtos',
    flavors: 'Aromas',
    colors: 'Corantes',
    proteins: 'Proteínas',
    sugarSubstitutesAnd: 'Substitutos de Açúcar e Fibras',
    naturalIngredients: 'Produtos Naturais',
    veganAndOrganic: 'Produtos Veganos e Orgânicos',
    functionalIngredients: 'Ingredientes Funcionais',
    confectioneryCoatings: 'Revestimentos Para Confeitaria',
    foodService: 'Food Service',
    company: 'Empresa',
    partners: 'Parceiros',
    contact: 'Contato',
    theBestSolutionsInProteins: 'As melhores soluções <p><strong>em proteínas</p></strong>',
    theBestSolutionsInFlavors: 'As melhores soluções <p><strong>em aromas</p></strong>',
    theBestSolutionsInVegan: 'As melhores soluções <p><strong>em produtos veganos</p></strong>',
    theBestSolutionsInSugar: 'As melhores soluções <p><strong>em substitutos de açúcar</p></strong>',
    theBestSolutionsInColors: 'As melhores soluções <p><strong>em corantes</p></strong>',
    theBestSolutionsInFood: 'As melhores soluções <p><strong>em food service</p></strong>',
    learnMore: 'SAIBA MAIS',
    apliquimicaIsNow: 'Apliquimica agora é <b>Aplinova</b>.',
    aNewConcept: 'Um novo conceito com o mesmo compromisso.',
    watchTheVideo: 'Veja o vídeo',
    videoLink: 'https://youtu.be/J53jZ2PgMIk',
    providingQualityProducts: 'Qualidade <span class="introduction__main-text--lighter">para ajudar os nossos</span> clientes <span class="introduction__main-text--lighter">a alcançarem seus</span> objetivos',
    weOfferA: 'Oferecemos uma linha diversificada de aromas, corantes, substitutos de açúcar, proteínas, extratos vegetais entre outros ingredientes para as indústrias de alimentos, bebidas, suplementos, nutrição animal, cosméticos e outras.',
    weAreConstantly: 'Estamos em constante busca por novos produtos priorizando sempre um alto padrão de qualidade.',
    ourCompany: '<span class="font-weight-light">Nossa</span> <b class="ml-2">Empresa</b>',
    foundedIn1987: 'Fundada em 1987, inicialmente como Apliquimica, a <b>Aplinova</b> é uma empresa brasileira com sede administrativa, laboratório de aplicação, depósito e unidade fabril na cidade de São Paulo.',
    aLongEstablished: 'Tradicional fornecedora de ingredientes no mercado brasileiro, a empresa está em constante busca de inovações para ajudar os clientes a lançarem produtos diferenciados, naturais, funcionais, veganos e também competitivos em custo.',
    ourTeamIs: 'Contamos com profissionais com larga experiência neste mercado que aderem à cultura da empresa de priorizar o cliente, valorizar o profissionalismo e respeitar os nossos padrões éticos.',
    ourPartners: '<span class="font-weight-light">Nossos</span> <b class="ml-2">parceiros</b>',
    aplinovaPartnersWith: 'A <b>Aplinova</b> conta com parcerias internacionais de alto nível que primam pela competência comercial, tecnológica e inovativa em seus respectivos campos de atuação.',
    locations: 'Localização',
    headquarters: 'Endereço',
    manufacturingPlant: 'Fábrica',
    map: 'Ver no mapa',
    allRightsReserved: 'Todos os direitos reservados.',
  },
  produtos: {
    segments: 'Segmentos',
    flavors: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosmético, Nutrição Animal e Pet Food.',
    colors: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosmético, Nutrição Animal e Pet Food.',
    proteins: 'Alimentos, Bebidas, Suplementos, Nutrição Animal e Pet Food.',
    sugarSubstitutes: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Cosmético, Nutrição Animal e Pet Food.',
    naturalProducts: 'Alimentos, Bebidas, Suplementos, Nutrição Animal e Pet Food.',
    veganProducts: 'Alimentos, Bebidas, Suplementos, Nutrição Animal e Pet Food.',
    functionalIngredients: 'Alimentos, Bebidas, Suplementos, Farma, Oral Care, Nutrição Animal e Pet Food.',
    confectioneryCoatings: 'Chocolates e Confeitaria.',
    foodService: 'Panificação, Confeitaria, Sorveteria, Lácteos, Frutas e Hortaliças.',
    titles: {
      sugarSubstitutesAnd: 'Substitutos de <br>Açúcar e Fibras',
      naturalIngredients: 'Produtos <br>Naturais',
    }
  },
  nossaempresa: {
    aTrajectoryBuilt: '<span class="font-weight-light">Uma trajetória de</span> <b>credibilidade</b> <span class="font-weight-light">e</span> <b>inovação</b>',
    ourCompany: 'Nossa empresa',
    youCanHave: '“Você pode ter todo o dinheiro do mundo mas se você não é uma pessoa com ética e moral, você não é ninguém.”',
    henryRKravis: 'Henry R. Kravis, cofundador do Kohlberg Kravis Roberts & Co',
    facilities: 'Estrutura',
    aplinovasFacilitiesInclude: 'A <b>Aplinova</b> conta com seu escritório administrativo/comercial, laboratório de aplicação e de qualidade, unidade fabril e depósito próprios na cidade de São Paulo. Os laboratórios permitem o desenvolvimento de novos produtos e aplicações.',
    inAdditionTo: 'Além de possibilitar o desenvolvimento de novos produtos, a estrutura instalada da empresa garante o controle de um alto padrão de qualidade dos produtos assim como das matérias-primas recebidas.',
    ourManufactoringUnit: 'A unidade fabril conta com uma infraestrutura completa para a produção de aromas, extratos, corantes, edulcorantes entre outros produtos. O quadro de funcionários é composto por pessoas técnicas experientes que há muitos anos colaboram com a empresa.',
    aplinovaStrivesFor: 'A <b>Aplinova</b> preza pela qualidade dos seus produtos, trabalhando constantemente para melhorar sua unidade fabril e laboratórios.',
  },
  ourHistory: {
    title: '<span class="font-weight-light">Nossa</span> <b class="font-weight-bold ml-2">História</b>',
    timeline: {
      year1987: {
        title: 'Fundação',
        body: 'Apliquimica estabelece a sua sede na cidade de São Paulo e inicia a distribuição de produtos químicos.',
      },
      year1990: {
        title: 'Expansão da infraestrutura',
        body: 'A empresa adquire um terreno na cidade de São Paulo e constrói seu depósito próprio.'
      },
      year1995: {
        title: 'Parcerias com fornecedores americanos',
        body: 'Apliquimica inicia parcerias com fabricantes americanos como Sethness Caramel Color e Universal Flavors e inicia a distribuição de ingredientes para a indústria alimentícia.',
      },
      year2000: {
        title: 'Produção própria',
        body: 'Apliquimica desenvolve a tecnologia e a estrutura para produção própria de aromas, extratos vegetais e mix de corantes e edulcorantes.',
      },
      year2009: {
        title: 'Nova gestão',
        body: 'Nova geração de profissionais assume a gestão da empresa.',
      },
      year2017: {
        title: 'Novo escritório',
        body: 'A empresa muda sua sede para um escritório mais espaçoso.',
      },
      year2018: {
        title: 'Nova liderança',
        body: 'A sua nova estrutura societária e de gestão passa a contar com profissionais experientes do mercado de ingredientes assim como consultores de negócios e financeiros.',
      },
      year2019a: {
        title: 'Novo escritório e laboratório de aplicação',
        body: 'A empresa inaugura o seu novo laboratório de aplicação assim como a sua nova sede, mais espaçosa e moderna.',
      },
      year2019b: {
        title: 'Expansão do portfólio',
        body: 'A empresa amplia o leque de produtos oferecendo novos ingredientes naturais, orgânicos e funcionais.',
      },
      year2020: {
        title: 'Nova cara para uma nova fase',
        body: 'Apliquimica se torna Aplinova.',
      }
    },
  },
  contato: {
    aplinovaIsAlways: '<span class="font-weight-light">Um bom <br>atendimento <br>faz toda a</span> <br><b>diferença</b>',
    letsChat: "Fale <b class=\"ml-2\">conosco</b>",
    fillOutThe: 'Preencha o formulário e nossa equipe técnica entrará em contato o mais breve possível.',
    orIfYou: 'Ou se preferir, envie sua solicitação para: ',
    name: 'Nome',
    email: 'E-mail',
    phone: 'Telefone',
    company: 'Empresa',
    message: 'Mensagem',
    submit: 'Enviar'
  },
}
</file>

<file path="public/javascript/admin/index.js">
/**
 * Description: modulo javascript
 */
//Botoes das Flags

"use strict";

var Dashboard = function () {
	var global = {
		tooltipOptions: {
			placement: "right"
		},
		menuClass: ".c-menu"
	};

	// var menuChangeActive = function menuChangeActive(el) {
	// 	var hasSubmenu = $(el).hasClass("has-submenu");

	// 	$(global.menuClass + " .is-active").removeClass("is-active");
	// 	$(el).addClass("is-active");
		
	// 	if (hasSubmenu) {
	// 		$(el).find("ul").slideDown();
	// 	}
	// };

	var sidebarChangeWidth = function sidebarChangeWidth() {
		var $menuItemsTitle = $("li .menu-item__title");
		var imgLogo = document.getElementById('logo-admin');
		imgLogo.setAttribute('src', "../../public/img/logo-br-img.png");
		imgLogo.style.transition="all 0s";
		imgLogo.style.width = "30px";

		$("body").toggleClass("sidebar-is-reduced sidebar-is-expanded");
		$(".hamburger-toggle").toggleClass("is-opened");

		if ($("body").hasClass("sidebar-is-expanded")) {
		   imgLogo.setAttribute('src', "../../public/img/logo-light.svg");
		   imgLogo.style.transition="all 2s";
		   imgLogo.style.width = "150px";
		   $('[data-toggle="tooltip"]').tooltip("disable");
		} else {
			$('[data-toggle="tooltip"]').tooltip(global.tooltipOptions);
			$('[data-toggle="tooltip"]').tooltip("enable");
		}
	};

	return {
		init: function init() {
			if(screen.width > 800){
				sidebarChangeWidth();
			}
			
			$(".js-hamburger").on("click", sidebarChangeWidth);

			// $(".js-menu li").on("click", function (e) {
			// 	menuChangeActive(e.currentTarget);
			// });

			$('[data-toggle="tooltip"]').tooltip(global.tooltipOptions);
		},
		getSideBar: ()=>{
			sidebarChangeWidth();
		}
	};
}();

Dashboard.init();
//# sourceURL=pen.js

//Verificando media query
var x = window.matchMedia("(max-width: 600px)");
	x.addEventListener("change", (x)=>{
		if(x.matches){
			Dashboard.getSideBar();
		}
	});

//Na mudanca de media query verifico o tamanho exato para reload
window.addEventListener('resize', ()=>{
	x = window.matchMedia("(max-width: 600px)");
	if(x.matches){
		window.location.reload();
	}	
})

//Removendo a flag class dos botes e bandeiras
function removeFlagClass(flag){
    const eleEua = document.getElementsByClassName('eua');
    const elePt = document.getElementsByClassName('pt');
    const eleEsp = document.getElementsByClassName('esp');

    Array.from(eleEua).forEach(hit=>{
        flag === 'eua' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
    
    Array.from(elePt).forEach(hit=>{
        flag === 'pt' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
    
    Array.from(eleEsp).forEach(hit=>{
        flag === 'esp' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
}
</file>

<file path="public/stylesheets/components/navbar.css">
.navbar {
    width: 100%;
    transition: 0.4s;
    position: fixed;
    z-index: 30;
    padding: 0;
    display: flex;
    flex-direction: row;
}

.navbar.navbar--initial-state {
    height: 160px;
    background: transparent;
    color: #fff;
}

.navbar--scrolled-state {
    height: 120px;
    background: #fff;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.navbar--menu-state {
    height: 160px;
    background: #fff !important;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04) !important;
}

.navbar.navbar--initial-state .navbar__link {
    color: #fff;
}

.navbar.navbar--initial-state .navbar__logo.navbar__logo--dark {
    display: none;
}
.navbar.navbar--initial-state .navbar__logo.navbar__logo--light {
    display: inline-block;
}
.navbar.navbar--scrolled-state .navbar__logo.navbar__logo--dark {
    display: inline-block;
}
.navbar.navbar--scrolled-state .navbar__logo.navbar__logo--light {
    display: none;
}

.navbar.navbar--menu-state .navbar__logo.navbar__logo--dark {
    display: inline-block !important;
}
.navbar.navbar--menu-state .navbar__logo.navbar__logo--light {
    display: none !important;
}

.navbar.navbar--initial-state .navbar__items-active {
    display: none;
}
.navbar:not(.navbar--initial-state) .navbar__items-active {
    display: flex;
}
.navbar:not(.navbar--menu-state) .navbar__close-icon {
    display: none;
}
.navbar:not(.navbar--initial-state) .navbar__items-initial {
    display: none;
}

.navbar__logo {
    width: 16rem;
}

.navbar .navbar__items-initial {
    height: 100%;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
}

.navbar__initial-item {
    display: flex;
    align-items: center;
    font-weight: 500;
    font-size: 1.125rem;
    letter-spacing: 0.05em;
    padding: 0 4rem 0 0;
    text-decoration: none !important;
    color: #fff;
}

a.navbar__initial-item:hover {
    color: #88B73A;
}

.navbar__initial-item i {
    font-size: 1.75rem;
    padding-right: 0.5rem;
    color: #88B73A;
}

.navbar .navbar__items-active {
    height: 100%;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
}

.navbar .navbar__item {
    height: 100%;
    padding: 0 0 0 2.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
    text-transform: lowercase;
}

.navbar .navbar__products-dropdown-container {
    position: relative;
    height: 0px;
    transition: 0.5s ease all;
}

.navbar .navbar__products-dropdown {
    position: absolute;
    top: 60px;
    display: none;
    padding: 0.75rem 1.75rem;
    width: 24rem;
    z-index: 0;
    background-color: #292828;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5), 0 4px 6px 3px rgba(0, 0, 0, 0.5);
    border-radius: 0.125rem;
    opacity: 0;
    transition: opacity 0.5s linear;
}

.navbar.navbar--menu-state .navbar__products-dropdown {
    top: 80px;
}

.navbar .navbar__products-dropdown--active {
    z-index: 30;
    opacity: 1;
    display: flex;
    flex-direction: column;
}

.navbar .navbar__item.navbar__item--products {
    cursor: pointer;
}

.navbar .navbar__products-dropdown > a {
    text-decoration: none;
    color: white;
    font-size: 1.25rem;
    padding: 0.25rem 0;
    opacity: 75%;
}

.navbar .navbar__products-dropdown > a:hover {
    color: #88B73A;
}

.navbar .navbar__item--products-mobile {
    display: flex;
    flex-direction: row;
}

.navbar .navbar__products-dropdown-mobile {
    display: none;
    padding: 0.75rem 1.75rem;
    background-color: #292828;
    width: 100%;
    transition: 0.5s ease all;
}

.navbar .navbar__products-dropdown-mobile--active {
    display: flex;
    flex-direction: column;
}

.navbar .navbar__products-dropdown-mobile-container {
    transition: 0.5s ease all;
}

.navbar .navbar__products-dropdown-mobile > a {
    text-decoration: none;
    color: white;
    font-size: 1rem;
    padding: 0.25rem 0;
    opacity: 75%;
    text-transform: lowercase;
}

.navbar .navbar__products-icon {
    width: 1.125rem;
    height: 1.125rem;
    margin-left: auto;
    margin-right: 0.5rem;
    margin-top: 0.25rem;
    transition: 0.25s ease all;
}

.navbar .navbar__item--products-mobile--active .navbar__link {
    color: #88B73A;
}

.navbar .navbar__item--products-mobile--active .navbar__products-icon {
    transform: rotate(90deg);
}

.navbar .navbar__link {
    cursor: pointer;
    text-decoration: none;
    color: #292828;
    font-weight: 600;
    font-size: larger;
}

.navbar .navbar__link:hover {
    color: #88B73A;
}

.navbar .navbar__icon {
    height: 100%;
    cursor: pointer;
}

.navbar .navbar__icon:hover {
    color: #88B73A;
}

.navbar__mobile-lang-btn {
    color: #88B73A;
    text-transform: uppercase;
    font-size: 1rem;
    font-weight: 600;
    border: 1px solid #88B73A;
    border-radius: 6px;
    text-align: center;
    padding: 0.125rem 0.5rem;
}

.navbar__mobile-lang-btn.navbar__mobile-lang-btn--active {
    background-color: #88B73A;
    color: white;
}

.navbar__lang-container {
    margin-top: 9.5%;
    align-self: flex-start;
}

@media (max-width: 1024px) {
    .navbar__lang-container {
        margin-top: 14%;
    }
}

.navbar__lang-selector {
    border: 1px solid white;
    border-radius: 6px;
    padding: 0.25rem 0;
    position: relative;
    transition: 0.5s ease all;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    height: 35px;
    align-self: flex-start;
}

.navbar__lang-selector.navbar__lang-selector--active {
    height: 90px;
}

.navbar__lang-selector.navbar__lang-selector--active:before {
    transform: rotate(180deg);
}

.navbar__lang-selector:hover {
    border-color: #88B73A;
}

.navbar__lang-option {
    transition: 0.5s ease color, 0.5s ease font-weight, 0.5s ease background-color;
    padding: 0.125rem 1.25rem 0.125rem 0.5rem;
    color: white;
}

.navbar__lang-option:not(.navbar__lang-option--active):hover {
    color: #88B73A;
    font-weight: bold;
    background-color: rgba(136, 183, 58, 0.1);
}

.navbar__lang-selector:hover:before {
    border-color: transparent transparent #88B73A transparent;
}

.navbar__lang-selector:before {
    content:"\A";
    border-style: solid;
    border-width: 0 5px 7.5px 5px;
    border-color: transparent transparent #fff transparent;
    position: absolute;
    right: 4px;
    top: 12px;
    transition: 0.5s ease all;
}

.navbar__lang-option.navbar__lang-option--selected {
    display: none;
}

.navbar__lang-selector:not(.navbar__lang-selector--active) .navbar__lang-option:not(.navbar__lang-option--active) {
    visibility: hidden;
}

@media (max-width: 640px) {
    .navbar {
        padding-left: 1.5rem !important;
        padding-right: 1.5rem !important;
    }

    .navbar__items-initial, .navbar__items-active {
        display: none !important;
    }

    .navbar--scrolled-state {
        height: 100px;
    }

    .navbar__logo {
        width: 12rem;
    }

    .navbar.navbar--menu-state .navbar__menu-icon {
        display: none !important;
    }
.navbar.navbar--menu-state .navbar__close-icon {
        display: flex !important;
    }

    .navbar:not(.navbar--menu-state) .navbar__items-mobile {
        display: none !important;
    }

    .navbar__items-mobile .navbar__item {
        padding: 0.5rem 0 0.6rem 0;
        border-bottom: 1px solid #292828;
        justify-content: flex-start;
    }

    .navbar.navbar--initial-state {
        height: 100px;
    }

    .navbar--menu-state {
        padding-top: 1.5rem;
        padding-bottom: 1.5rem;
        position: absolute;
        height: unset;
        min-height: 160px !important;
    }
}

@media (min-width: 640px) and (max-width: 968px) {
    .navbar__initial-item {
        font-size: 1rem;
        letter-spacing: 0em;
        padding: 0 2.5rem 0 0;
    }

    .navbar .navbar__link {
        font-size: 1rem;
    }

    .navbar .navbar__item {
        padding: 0 0 0 1.5rem;
    }

    .navbar__logo {
        width: 13rem;
    }

    .navbar__lang-container {
        margin-top: 17.5%;
    }
}

@media (min-width: 969px) and (max-width: 1280px) {
    .navbar .navbar__item {
        padding: 0 0 0 2rem;
    }
}
</file>

<file path="views/admin/newcategoria.ejs">
<%- include('./header')%>
    <!-- cadastro de header -->
    <div class="header-title">NOVA CATEGORIA</div>
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <form action="/admin/categoria" method="post">
            <div id="header">
              <div style="display: flex; flex-direction: row; justify-content: space-between; flex-wrap: wrap;">
                <span class="cabecalho-input-form" >Cabeçalho da categoria</span>
                <div>
                  <img class="translater-icon" src="../../public/img/eng-flag.png" alt="" id="eua-flag">
                  <img class="translater-icon" src="../../public/img/spain-flag.png" alt="" id="esp-flag">
                  <img class="translater-icon" src="../../public/img/brazil-flag.png" alt="" id="pt-flag" class="active">
                </div>
              </div>
              
              <div class="form-group pt" style="margin-bottom: 4rem; margin-top: 2rem;">
                <input class="new-input" type="text" placeholder="TITULO" name="headerTitulo" required>
              </div>
              <div class="form-group d-none eua" style="margin-bottom: 4rem; margin-top: 2rem;">
                <input class="new-input" type="text" placeholder="TITULO" name="headerTituloEng" required>
              </div>
              <div class="form-group d-none esp" style="margin-bottom: 4rem; margin-top: 2rem;">
                <input class="new-input" type="text" placeholder="TITULO" name="headerTituloEsp" required>
              </div>
              <div class="form-group pt" style="margin-bottom: 4rem;">
                <textarea class="new-input" name="headerDescricao" placeholder="DESCRICAO" cols="30" rows="5"></textarea>
              </div>
              <div class="form-group d-none eua" style="margin-bottom: 4rem;">
                <textarea class="new-input" name="headerDescricaoEng" placeholder="DESCRICAO" cols="30" rows="5"></textarea>
              </div>
              <div class="form-group d-none esp" style="margin-bottom: 4rem;">
                <textarea class="new-input" name="headerDescricaoEsp" placeholder="DESCRICAO" cols="30" rows="5"></textarea>
              </div>
            </div>
          <!-- cadastro de categoria -->
          <!-- Uma categoria nao pode ter o id proprio repetido dentro da tabela -->
            <div id="categoria">
              <span class="cabecalho-input-form" >Categoria</span>
                <!--Sempre sera incluida uma categoria-->
                <input class="d-none" id="categoriaChecked" name="categoriaChecked" type="text" value="on">
              <div class="form-group pt" style="margin-bottom: 4rem; margin-top: 2rem;">
                <input class="new-input" type="text" placeholder="TITULO" name="categoriaTitulo" required>
              </div>
              <div class="form-group d-none eua" style="margin-bottom: 4rem; margin-top: 2rem;">
                <input class="new-input" type="text" placeholder="TITULO" name="categoriaTituloEng" required>
              </div>
              <div class="form-group d-none esp" style="margin-bottom: 4rem; margin-top: 2rem;">
                <input class="new-input" type="text" placeholder="TITULO" name="categoriaTituloEsp" required>
              </div>
              <div class="form- pt" style="margin-bottom: 4rem;">
                <textarea class="new-input" name="categoriaDescricao" placeholder="DESCRICAO" rows="5" cols="30"></textarea>
              </div>
              <div class="form-group d-none eua" style="margin-bottom: 4rem;">
                <textarea class="new-input" name="categoriaDescricaoEng" placeholder="DESCRICAO" rows="5" cols="30"></textarea>
              </div>
              <div class="form-group d-none esp" style="margin-bottom: 4rem;">
                <textarea class="new-input" name="categoriaDescricaoEsp" placeholder="DESCRICAO" rows="5" cols="30"></textarea>
              </div>
            </div>
            <div class="btn-finalizacao-acao">
              <button class="btn btn-admin" type="submit">Salvar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
<script src="../../public/javascript/admin/newCategoria.js"></script>
<%- include('./footer')%>
</file>

<file path="views/portal/home-partners.ejs">
<div id="parceiros" class="home-partners__header pt-3">
    <i class="fas fa-square fas-sm mr-3"></i>
    <%- t.home.ourPartners %>
</div>
<div class="home-partners__subheader"><%- t.home.aplinovaPartnersWith %></div>
<div class="swiper-container d-none d-md-block px-5 mb-5">
    <div class="swiper-wrapper">
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="https://www.virginiadare.com/" target="_blank">
                <img src="./public/img/partners/virginiadare.png" alt="Virginia Dare" />
            </a>
            <a class="home-partners__slide-item" href="https://www.fingres.com/"  target="_blank">
                <img src="./public/img/partners/Fingres.png" alt="Fingres" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="https://www.sethness.com/"  target="_blank">
                <img src="./public/img/partners/sethness.png" alt="Sethness" />
            </a>
            <a class="home-partners__slide-item" href="http://cfigroup.com.my/" target="_blank">
                <img src="./public/img/partners/CFG.png" alt="CFG" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item" href="http://www.ingredients-solutions.com/por/home.html"  target="_blank">
                <img src="./public/img/partners/IS.jpg" alt="IS" />
            </a>
            <a class="home-partners__slide-item">
                <img src="./public/img/partners/gloripan.png" alt="Gloripan" />
            </a>
            <a class="home-partners__slide-item" href="http://www.maltitol.com.cn" target="_blank">
                <img src="./public/img/partners/Lujian.png" alt="Shandong Lujian" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="https://www.mantrose.com/" target="_blank">
                <img src="./public/img/partners/mantrose.png" alt="mantrose" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--smaller" href="http://www.blb-cn.com/index.php?lang=en" target="_blank">
                <img src="./public/img/partners/BLB.jpg" alt="BLB" />
            </a>
            <a class="home-partners__slide-item" href="https://boublenza.com/" target="_blank">
                <img src="./public/img/partners/caruma.png" alt="Caruma" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="http://www.huasweet.com/index_en.html" target="_blank">
                <img src="./public/img/partners/Huasweet.png" alt="Huasweet" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--smaller" href="http://www.jinnongbio.com/html/en/" target="_blank">
                <img src="./public/img/partners/jinnong.png" alt="Jinnongbio" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--smaller" href="http://en.jianyuangroup.com/" target="_blank">
                <img src="./public/img/partners/Jianyuan.png" alt="Jianyuan" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--smaller" href="http://www.sunwinstevia.com/" target="_blank">
                <img src="./public/img/partners/sunwin.jpg" alt="Sunwin" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="http://en.lygshuren.com/" target="_blank">
                <img src="./public/img/partners/shuren.jpg" alt="Shuren" />
            </a>
            <a class="home-partners__slide-item" href="https://yortay.com/" target="_blank">
                <img src="./public/img/partners/yortay.png" alt="Yortay" />
            </a>
        </div>
    </div>
    <div class="swiper-pagination"></div>
</div>
<div class="swiper-container d-block d-md-none px-5 mb-5">
    <div class="swiper-wrapper">
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="https://www.virginiadare.com/" target="_blank">
                <img src="./public/img/partners/virginiadare.png" alt="Virginia Dare" />
            </a>
            <a class="home-partners__slide-item" href="https://www.fingres.com/"  target="_blank">
                <img src="./public/img/partners/Fingres.png" alt="Fingres" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="https://www.sethness.com/"  target="_blank">
                <img src="./public/img/partners/sethness.png" alt="Sethness" />
            </a>
            <a class="home-partners__slide-item" href="http://cfigroup.com.my/" target="_blank">
                <img src="./public/img/partners/CFG.png" alt="CFG" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item" href="http://www.ingredients-solutions.com/por/home.html"  target="_blank">
                <img src="./public/img/partners/IS.jpg" alt="IS" />
            </a>
            <a class="home-partners__slide-item">
                <img src="./public/img/partners/gloripan.png" alt="Gloripan" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item" href="http://www.maltitol.com.cn" target="_blank">
                <img src="./public/img/partners/Lujian.png" alt="Shandong Lujian" />
            </a>
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="https://www.mantrose.com/" target="_blank">
                <img src="./public/img/partners/mantrose.png" alt="mantrose" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item" href="http://www.blb-cn.com/index.php?lang=en" target="_blank">
                <img src="./public/img/partners/BLB.jpg" alt="BLB" />
            </a>
            <a class="home-partners__slide-item" href="https://boublenza.com/" target="_blank">
                <img src="./public/img/partners/caruma.png" alt="Caruma" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="http://www.huasweet.com/index_en.html" target="_blank">
                <img src="./public/img/partners/Huasweet.png" alt="Huasweet" />
            </a>
            <a class="home-partners__slide-item" href="http://www.jinnongbio.com/html/en/" target="_blank">
                <img src="./public/img/partners/jinnong.png" alt="Jinnongbio" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item" href="http://en.jianyuangroup.com/" target="_blank">
                <img src="./public/img/partners/Jianyuan.png" alt="Jianyuan" />
            </a>
            <a class="home-partners__slide-item" href="http://www.sunwinstevia.com/" target="_blank">
                <img src="./public/img/partners/sunwin.jpg" alt="Sunwin" />
            </a>
        </div>
        <div class="swiper-slide home-partners__slide">
            <a class="home-partners__slide-item home-partners__slide-item--bigger" href="http://en.lygshuren.com/" target="_blank">
                <img src="./public/img/partners/shuren.jpg" alt="Shuren" />
            </a>
            <a class="home-partners__slide-item" href="https://yortay.com/" target="_blank">
                <img src="./public/img/partners/yortay.png" alt="Yortay" />
            </a>
        </div>
    </div>
    <div class="swiper-pagination"></div>
</div>
<script>
    var mySwiper = new Swiper ('.swiper-container', {
        // Optional parameters
        loop: true,
        autoplay: {
            delay: 5000,
        },
        grabCursor: true,

        // If we need pagination
        pagination: {
            el: '.swiper-pagination',
        },

        // Navigation arrows
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },

        // And if we need scrollbar
        scrollbar: {
            el: '.swiper-scrollbar',
        },
    })
</script>
</file>

<file path="controllers/portal/aplinova.js">
/**
 * Description: Modulo de controllers de dentro do portal da aplinova
 * Author: Findi
 */

//Declaracoes de variaveis
const models = require('../../models');
const Categoria = models.Categoria;
const Produto = models.Produto;
const {Op} = require('sequelize');
const mailerTransport = require('../../config/mail');

//Tela principal do portal
exports.show = (req, res) => {
    const produtos = [
      {title: req.params.t.home.flavors, imageUrl: './public/img/aromas.jpg', href: 'aromas'},
      {title: req.params.t.home.colors, imageUrl: './public/img/corantes.jpg', href: 'corantes'},
      {title: req.params.t.home.veganAndOrganic, imageUrl: './public/img/prod_veganos.jpg', href: 'prodveganos'},
      {title: req.params.t.home.proteins, imageUrl: './public/img/proteinas.jpg', href: 'proteinas'},
      {title: req.params.t.produtos.titles.sugarSubstitutesAnd, imageUrl: './public/img/subs_acucar.jpg', href: 'subacucar'},
      {title: req.params.t.produtos.titles.naturalIngredients, imageUrl: './public/img/produtos_naturais.jpg', href: 'prodnaturais'},
      {title: req.params.t.home.confectioneryCoatings, imageUrl: './public/img/rev_confeitaria.jpg', href: 'revconfeitaria'},
      {title: req.params.t.home.foodService, imageUrl: './public/img/food_service.jpg', href: 'foodservice'},
      {title: req.params.t.home.functionalIngredients, imageUrl: './public/img/ingredientes_funcionais.jpg', href: 'ingredientesfuncionais'}
    ]
    res.render('./portal/index', {produtos, t: req.params.t});
}

//Tela de contato
exports.contato = (req, res)=>{
    res.render('./portal/contato', {t: req.params.t});
}

//Tela de aromas
exports.aromas = (req, res)=>{
  Categoria.findOne({where:{titulo: "aromas"}, include:{model:Produto, as:"produtos"}})
  .then(function(aromas){
    res.render('./portal/produtos/aromas', {aromas: aromas.dataValues.produtos, t: req.params.t});
  })
  .catch(function(error){
    res.render('./portal/produtos/aromas', {aromas:undefined, error:error, t: req.params.t});
  })

}

//Tela de corantes
exports.corantes = (req, res)=>{
  Categoria.findOne({where:{titulo: "corantes"}, include:{model:Produto, as: "produtos"}})
  .then(function(corantes){
    res.render('./portal/produtos/corantes', {corantes: corantes.dataValues.produtos, t: req.params.t});
  })
  .catch(function(error){
    res.render('./portal/produtos/corantes', {corantes: undefined, error:error, t: req.params.t});
  })

}

//Tela de foodservice
exports.foodservice = (req, res)=>{
  const url = './portal/produtos/foodservice';

  Categoria.findOne({where:{titulo: 'food service'}})
  .then(function(cat){
    if(cat !== 0){
      return Categoria.findAll({where:{[Op.and]:[{idCategoria:0},{idCategoriaPai: cat.dataValues.idCategoria}]}, include:{model:Produto, as:'produtos'}})
    }else{
      res.render(url, {error: "Nao foi encontrada a categoria", foodservice: undefined, t: req.params.t});
    }
  })
  .then(function(subCat){
    if(subCat !== 0){
      res.render(url, {foodservice: subCat, error:undefined, t: req.params.t});
    }else{
      res.render(url, {error: "Nao foi encontrada a subcategoria", foodservice: undefined, t: req.params.t});
    }
  })
  .catch(function(error){
    res.render(url, {error: error, foodservice: undefined, t: req.params.t});
  })
}

//Tela de ingredientes funcionais
exports.ingredFuncionais = (req, res)=>{
  const url = './portal/produtos/ingredientesfuncionais';

  Categoria.findOne({where:{titulo: 'ingredientes funcionais'}})
  .then(function(cat){
    if(cat !== 0){
      return Categoria.findAll({where:{[Op.and]:[{idCategoria:0},{idCategoriaPai: cat.dataValues.idCategoria}]}, include:{model:Produto, as:'produtos'}})
    }else{
      res.render(url, {error: "Nao foi encontrada a categoria", ingredientes: undefined, t: req.params.t});
    }
  })
  .then(function(subCat){
    if(subCat !== 0){
      res.render(url, {ingredientes: subCat, error:undefined, t: req.params.t});
    }else{
      res.render(url, {error: "Nao foi encontrada a subcategoria", ingredientes: undefined, t: req.params.t});
    }
  })
  .catch(function(error){
    res.render(url, {error: error, ingredientes: undefined, t: req.params.t});
  })
}

//Tela de produtos naturais
exports.prodNaturais = (req, res)=>{
  Categoria.findOne({where:{titulo: "produtos naturais"}, include:{model:Produto, as:"produtos"}})
  .then(function(prodNatu){
    res.render('./portal/produtos/produtosnaturais', {produtos: prodNatu.dataValues.produtos, t: req.params.t});
  })
  .catch(function(error){
    res.render('./portal/produtos/produtosnaturais', {produtos: undefined, error:error, t: req.params.t});
  })

}

//Tela de produtos veganos
exports.prodVeganos = (req, res)=>{
  const url = './portal/produtos/produtosveganos';
  Categoria.findOne({where:{titulo: 'produtos veganos e orgânicos'}})
  .then(function(cat){
    if(cat !== 0){
      return Categoria.findAll({where:{[Op.and]:[{idCategoria:0},{idCategoriaPai: cat.dataValues.idCategoria}]}, include:{model:Produto, as:'produtos'}})
    }else{
      res.render(url, {error: "Nao foi encontrada a categoria", veganos: undefined, t: req.params.t});
    }
  })
  .then(function(subCat){
    if(subCat !== 0){
      res.render(url, {veganos: subCat, error:undefined, t: req.params.t});
    }else{
      res.render(url, {error: "Nao foi encontrada a subcategoria", veganos: undefined, t: req.params.t});
    }
  })
  .catch(function(error){
    res.render(url, {error: error, veganos: undefined, t: req.params.t});
  })
}

//Tela de proteinas
exports.proteinas = (req, res)=>{
  const url = './portal/produtos/proteinas';

  Categoria.findOne({where:{titulo: 'proteínas'}})
  .then(function(cat){
    if(cat !== 0){
      return Categoria.findAll({where:{[Op.and]:[{idCategoria:0},{idCategoriaPai: cat.dataValues.idCategoria}]}, include:{model:Produto, as:'produtos'}})
    }else{
      res.render(url, {error: "Nao foi encontrada a categoria", proteinas: undefined, t: req.params.t});
    }
  })
  .then(function(subCat){
    if(subCat !== 0){
      res.render(url, {proteinas: subCat, error:undefined, t: req.params.t});
    }else{
      res.render(url, {error: "Nao foi encontrada a subcategoria", proteinas: undefined, t: req.params.t});
    }
  })
  .catch(function(error){
    res.render(url, {error: error, proteinas: undefined, t: req.params.t});
  })
}

//Tela de revestimento de confeitaria
exports.revConfeitaria = (req, res)=>{
  Categoria.findOne({where:{titulo: "revestimentos para confeitaria"}, include:{model:Produto, as:"produtos"}})
  .then(function(revestimento){
    res.render('./portal/produtos/revconfeitaria', {revestimento: revestimento.dataValues.produtos, t: req.params.t});
  })
  .catch(function(error){
    res.render('./portal/produtos/revconfeitaria', {revestimento:undefined, error: error, t: req.params.t});
  })

}

//Telas de substituto do acucar
exports.subacucar= (req, res)=>{

  const url = './portal/produtos/subacucarfibras';

  Categoria.findOne({where:{titulo: 'substituto de açúcar e fibras'}})
  .then(function(cat){
    if(cat !== 0){
      return Categoria.findAll({where:{[Op.and]:[{idCategoria:0},{idCategoriaPai: cat.dataValues.idCategoria}]}, include:{model:Produto, as:'produtos'}})
    }else{
      res.render(url, {error: "Nao foi encontrada a categoria", subsAc: undefined, t: req.params.t});
    }
  })
  .then(function(subCat){
    if(subCat !== 0){
      res.render(url, {subsAc: subCat, error:undefined, t: req.params.t});
    }else{
      res.render(url, {error: "Nao foi encontrada a subcategoria", subsAc: undefined, t: req.params.t});
    }
  })
  .catch(function(error){
    res.render(url, {error: error, subsAc: undefined, t: req.params.t});
  })
}

//Tela do nossa empresa
exports.nossaempresa = (req, res)=>{
  res.render('./portal/nossaempresa', {t: req.params.t})
}

//Email de contato com o adm e o cliente
exports.contatoEmail = (req, res)=>{
  let assunto = `Contato cliente: ${req.body.nome}`;
  let contentAdm = `<html><body>Houve um contato do ${req.body.nome}. Email: ${req.body.email}. Telefone: ${req.body.telefone}. Empresa: ${req.body.empresa}. Mensagem: ${req.body.mensagem}</body></html>`;
  let contentCost = `<html><body>Seu contato com a aplinova foi realizado com sucesso. Porfavor aguarde retorno.</body></html>`
  sendContatoEmail("contato@aplinova.com.br", assunto, contentAdm) //administrador
  .then(sentAdm=>{
    return sendContatoEmail(req.body.email, assunto, contentCost) //cliente
  })
  .then(sentCli=>{
    console.log(sentCli);
    res.json({done:true});
  })
  .catch(err=>{
    console.log(err);
    res.json({done:false});
  })
}

//Funcao de envio de email
function sendContatoEmail(email, assunto, content){
  return new Promise((resolve, reject)=>{
    mailerTransport.sendMail({
      from: `Aplinova <contato@aplinova.com.br>`,
      to: email,
      subject: assunto,
      html: content
    }, (err, info)=>{
      if(err){
        console.log(err);
        reject("Ocorreu um problema ao enviar o email")
      }else{
        resolve(info);
      }
    })
  })
}

// Controle de Idioma
exports.lang = (req, res) => {
  req.session.t = req.params.ln;
  res.json({return: req.session.t});
}
</file>

<file path="locales/en.js">
module.exports = {
  code: 'Eng',
  navbarCode: 'EN',
  home: {
    flavors: 'flavors',
    products: 'products',
    colors: 'colors',
    proteins: 'proteins',
    sugarSubstitutesAnd: 'sugar substitutes and soluble fibers',
    naturalIngredients: 'natural ingredients',
    veganAndOrganic: 'vegan and organic products',
    functionalIngredients: 'functional ingredients',
    confectioneryCoatings: 'confectionery coatings',
    foodService: 'food service',
    theBestSolutionsInProteins: 'The best solutions <p><strong>in proteins</p></strong>',
    theBestSolutionsInColors: 'The best solutions <p><strong>in colors</p></strong>',
    theBestSolutionsInFlavors: 'The best solutions <p><strong>in flavors</p></strong>',
    theBestSolutionsInVegan: 'The best solutions <p><strong>in vegan and organic products</p></strong>',
    theBestSolutionsInSugar: 'The best solutions <p><strong>in sugar substitutes and soluble fibers</p></strong>',
    theBestSolutionsInFood: 'The best solutions <p><strong>in food service</p></strong>',
    learnMore: 'LEARN MORE',
    apliquimicaIsNow: 'Apliquimica is now <b>Aplinova</b>.',
    aNewConcept: 'A new concept with the same commitment.',
    watchTheVideo: 'Watch the video',
    videoLink: 'https://youtu.be/gr3FVl8XQEU',
    providingQualityProducts: '<span class="font-weight-light">Providing</span> quality <span class="font-weight-light">products to help our</span> clients <span class="font-weight-light">achieve their</span> goals',
    weOfferA: 'We offer a diversified range of flavors, colors, sugar substitutes, proteins, plant-based extracts and other ingredients for industries such as food, beverage, supplements, animal nutrition, and cosmetics, among others.',
    weAreConstantly: 'We are constantly searching for new products, always giving priority to high quality.',
    ourCompany: '<span class="font-weight-light">Our</span> <b class="ml-2">Company</b>',
    foundedIn1987: 'Founded in 1987, initially as Apliquimica, Aplinova is a Brazilian company with administrative headquarters, an application laboratory, pilot plant and manufacturing unit located in the city of São Paulo. ',
    aLongEstablished: 'A long-established supplier of ingredients for the Brazilian market, the company is constantly on the look-out for innovations intended to help clients launch products that are differentiated, natural, functional, vegan, as well as price competitive.',
    ourTeamIs: 'Our team is made up of experienced industry experts who comply with the company’s culture, which prioritizes the client, values professionalism and respects our ethic parameters.',
    ourPartners: '<span class="font-weight-light">Our</span> <b class="ml-2">partners</b>',
    aplinovaPartnersWith: 'Aplinova partners with highly recognized international suppliers that strive for providing commercial, technological and innovative excellence in their respective fields.',
    locations: 'LOCATIONS',
    headquarters: 'Address',
    manufacturingPlant: 'Manufacturing Plant',
    map: 'Map',
    contact: 'CONTACT',
    company: 'Company',
    partners: 'Partners',
    allRightsReserved: 'All rights reserved'
  },
  produtos: {
    segments: 'Segments',
    flavors: 'Food, Beverage, Supplements, Pharma, Oral Care, Cosmetics, Animal Nutrition and Pet Food.',
    colors: ' Food, Beverage, Supplements, Pharma, Oral Care, Cosmetics, Animal Nutrition and Pet Food.',
    proteins: 'Food, Beverage, Supplements, Animal Nutrition and Pet Food.',
    sugarSubstitutes: 'Food, Beverage, Supplements, Pharma, Oral Care, Cosmetics, Animal Nutrition and Pet Food.',
    naturalProducts: 'Food, Beverage, Supplements, Animal Nutrition and Pet Food.',
    veganProducts: 'Food, Beverage, Supplements, Animal Nutrition and Pet Food.',
    functionalIngredients: 'Food, Beverage, Supplements, Pharma, Oral Care, Animal Nutrition and Pet Food.',
    confectioneryCoatings: 'Chocolate and Confectionery.',
    foodService: 'Bakery, Confectionery, Ice-cream Products, Dairy, Fruits and Vegetables.',
    titles: {
      sugarSubstitutesAnd: 'Sugar Substitutes <br>and Soluble Fibers',
      naturalIngredients: 'Natural Ingredients',
    }
  },
  nossaempresa: {
    aTrajectoryBuilt: '<span class="font-weight-light">A trajectory built on</span> <b>credibility</b> <span class="font-weight-light">and</span> <b>innovation</b>',
        ourCompany: 'Our Company',
        youCanHave: '“You can have all the money in the world, but if you are not a moral and ethical person, you really have nothing.”',
        henryRKravis: 'Henry R. Kravis, co-founder of Kohlberg Kravis Roberts & Co.',
        facilities: 'Facilities',
        aplinovasFacilitiesInclude: 'Aplinova’s facilities include administrative/commercial headquarters, an application and evaluation laboratory, own pilot plant and manufacturing unit located in the city of São Paulo. The laboratories provide the environment to develop novel products and applications. In addition to an ongoing development of novel products, the company’s infrastructure ensures the maintenance of high-level quality control of our products and incoming raw materials.',
        ourManufacturingUnit: 'Our manufacturing unit features a complete infrastructure for the production of flavors, extracts, colors, sweeteners, and other products. We count on a team of experienced technologists who have been collaborating with us for many years',
        aplinovaStrivesFor: 'Aplinova strives for providing product excellence, continuously investing in the improvement of its manufacturing and laboratory units.',
  },
  ourHistory: {
    title: '<span class="font-weight-light">Our</span> <b class="font-weight-bold ml-2">History</b>',
    timeline: {
      year1987: {
          title: 'Foundation',
          body: 'Apliquimica establishes headquarters in the city of São Paulo and starts the distribution of chemical products. '
      },
      year1990: {
          title: 'Infrastructure Expansion',
          body: 'The company acquires land in the city of São Paulo and builds its own plant.'
      },
      year1995: {
          title: 'Partnering with US suppliers',
          body: 'Apliquimica partners with US manufacturers such as Sethness Caramel Color and Universal Flavors and starts distribution of ingredients to the food industry.'
      },
      year2000: {
          title: 'Independent Production',
          body: 'Apliquimica develops the technology and the structure for its own production of flavors, plant-based extracts and color and sweetener blends. '
      },
      year2009: {
          title: 'New management',
          body: 'A new generation of professionals assumes operations of the company.'
      },
      year2017: {
          title: 'New Headquarters',
          body: 'The company moves the headquarters to a more spacious environment.'
      },
      year2018: {
          title: 'New Leadership',
          body: 'With new corporate and operations structure, the company boasts with a new team of experienced professionals of the ingredients industry as well as business consultants and financiers.'
      },
      year2019a: {
          title: 'New Headquarters and Application Laboratory',
          body: 'The company unveils a new application laboratory as well as new, more spacious and modern headquarters.'
      },
      year2019b: {
          title: 'Expansion of the Portfolio',
          body: 'The company expands the range of products by offering new natural, organic and functional ingredients.'
      },
      year2020: {
          title: 'A New Face for a New Phase',
          body: 'Apliquimica rebrands as Aplinova.'
      }
    },
  },
  contato: {
    aplinovaIsAlways: 'Aplinova is always here to help you',
    letsChat: "Let's <b class=\"ml-2\">Chat</b>",
    fillOutThe: 'Fill out the form and our solutions team will get in touch as soon as possible.',
    orIfYou: 'Or if you prefer, send your info to us at: ',
    name: 'name',
    email: 'email',
    phone: 'phone',
    company: 'company',
    message: 'message',
    submit: 'submit'
  }
}
</file>

<file path="public/javascript/admin/cards.js">
/**
 * Description: Modulo que monta os cards
 * Author: Daniel
 */

// const e = require("express");

//Declaracoes
const anchor = document.getElementsByClassName('details');
const cat = document.getElementsByClassName('cat');
//Components do form portugues
const formTitulo = document.getElementById('indextitulo');
const formDescricao = document.getElementById('indexdescricao');
const formCategoria = document.getElementById('indexcategoria');
const formSubcategoria = document.getElementById('indexsubCategoria');

//Components do form ingles
const formTituloEng = document.getElementById('tituloEng');
const formDescricaoEng = document.getElementById('descricaoEng');

//Components do form espanhol
const formTituloEsp = document.getElementById('tituloEsp');
const formDescricaoEsp = document.getElementById('descricaoEsp');

//Botao do formulario
const atualizar = document.getElementById('atualizar');
//User return
const alert = document.getElementById('alert');
let mensagemAlert = document.createElement('h6'); //Criando um elemento para enviar ao div
const closeAlert = document.getElementsByClassName('close');

const deleteItem = document.getElementsByClassName('deleteItem');
const confirma = document.getElementById('confirma');

//Botoes das flags
var euaFlag = document.getElementById('eua-flag');
var espFlag = document.getElementById('esp-flag');
var ptFlag = document.getElementById('pt-flag');

var elementId;
var elementType;

//modal cat
const updateCat = document.getElementsByClassName('update-cat');
//Campos de dados da categoria
let catTitulo = document.getElementById('categoriaTitulo');
let catTituloEng = document.getElementById('categoriaTituloEng');
let catTituloEsp = document.getElementById('categoriaTituloEsp');
let catDescr = document.getElementById('categoriaDescricao');
let catDescrEng = document.getElementById('categoriaDescricaoEng');
let catDescrEsp = document.getElementById('categoriaDescricaoEsp');
//Botoes das flags de categoria
const euaCatFlag = document.getElementById('eua-cat-flag');
const espCatFlag = document.getElementById('esp-cat-flag');
const ptCatFlag = document.getElementById('pt-cat-flag');
//Botao para atualizar a categoria
const catAtualizar = document.getElementById('updateCategoria');
//Alerta de update de categoria
let catAlert = document.getElementById('cat-alert');
//Id geral da categoria
var id;

//Carregamento da tela
window.onload = (event)=>{
    formTitulo.setAttribute('readonly', true);
    formTituloEng.setAttribute('readonly', true);
    formTituloEsp.setAttribute('readonly', true);
    formDescricao.setAttribute('readonly', true);
    formDescricaoEng.setAttribute('readonly', true);
    formDescricaoEsp.setAttribute('readonly', true);
    espFlag.style.opacity = 0.4;
    euaFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 1;
    atualizar.disabled = true;

    //Setando da janela de detalhes da categoria
    espCatFlag.style.opacity = 0.4;
    euaCatFlag.style.opacity = 0.4;
    ptCatFlag.style.opacity = 1;
}

//Para cada linha da treeview adiciono um event listener
Array.from(anchor).forEach(el=>{
    el.addEventListener('click', function(event){
        event.preventDefault();
        elementId = event.target.dataset.id;
        formTitulo.removeAttribute('readonly');
        formTituloEng.removeAttribute('readonly');
        formTituloEsp.removeAttribute('readonly');
        formDescricao.removeAttribute('readonly');
        formDescricaoEng.removeAttribute('readonly');
        formDescricaoEsp.removeAttribute('readonly');
        atualizar.disabled = false;
        let url;
        //Verificando se a linha e de produto ou subcategoria
        switch(event.target.dataset.type){
            case 'prod':
                url = `/admin/produto/${event.target.dataset.id}`;
                elementType = "prod"
                break;
            case 'sub':
                url = `/admin/subcategoria/${event.target.dataset.id}`;
                elementType = "sub"
                break;
            default:
                mensagemAlert.innerHTML = "Nao foi possivel identificar o item selecionado";
                alert.appendChild(mensagemAlert);
                alert.classList.add('alert-danger');
                alert.classList.remove("d-none");
        }
        //Recuperando a subcategoria
        getSubCategoria(url)
        .then(function(data){
            if(event.target.dataset.type === 'sub'){
                formTitulo.value = data.subCategoria.titulo;
                formTituloEng.value = data.subCategoria.tituloEng;
                formTituloEsp.value = data.subCategoria.tituloEsp;
                formDescricao.value = data.subCategoria.descricao;
                formDescricaoEng.value = data.subCategoria.descricaoEng;
                formDescricaoEsp.value = data.subCategoria.descricaoEsp;
                formSubcategoria.value = "-";
                url = `/admin/categoria/${data.subCategoria.idCategoriaPai}`;
                //Recuperando a categoria
                return getCategoria(url);
            }else{
                formTitulo.value = data.produto.titulo;
                formTituloEng.value = data.produto.tituloEng;
                formTituloEsp.value = data.produto.tituloEsp;
                formDescricao.value = data.produto.descricao;
                formDescricaoEng.value = data.produto.descricaoEng;
                formDescricaoEsp.value = data.produto.descricaoEsp;
                formSubcategoria.value = data.produto.categorias[0].titulo;
                url = `/admin/categoria/${data.produto.categorias[0].idCategoriaPai}`;
                //Recuperando a categoria
                return getCategoria(url);
            }
        })
        .then(function(data){
            event.target.dataset.type === 'sub' ? formCategoria.value = data.categoria.titulo : formCategoria.value = data.categoria.titulo;
        })
        .catch(function(error){
            mensagemAlert.innerHTML = "Houve um problema para buscar o item!!";
            alert.appendChild(mensagemAlert);
            alert.classList.add('alert-danger');
            alert.classList.remove("d-none");
        })
    })
});

//Promise que recupera a subcategoria
function getSubCategoria(url){
    return new Promise((resolve, reject)=>{
        $.get(url, function(data){
            if(data){
                resolve(data);
            }else{
                reject(0);
            }
            
        });
    })
}

//Promise que recupera a categoria
function getCategoria(url){
    return new Promise((resolve, reject)=>{
        $.get(url, function(data){
            if(data){
                resolve(data);
            }else{
                reject(0);
            }
            
        });
    });
}

//Acao do botao atualizar do formulario
atualizar.addEventListener('click', function(event){
    event.preventDefault();
    //Validacao do formulario
    if(formTitulo.value === "" || formTituloEng.value === "" || formTituloEsp.value === ""){
        mensagemAlert.innerHTML = "Todas os campos precisam ser preenchidos";
        alert.appendChild(mensagemAlert);
        alert.classList.add('alert-danger');
        alert.classList.remove("d-none");
        return 0;
    }

    let url;
    switch(elementType){
        case "prod":
            url = `/admin/produto/${elementId}`;
            break;
        case "sub":
            url = `/admin/subcategoria/${elementId}`;
            break;
        default:
            url = "";
            alert("Nao foi escolhido um tipo de item")
    }
    
    const dataBody = {
        id: elementId,
        titulo: formTitulo.value,
        tituloEng: formTituloEng.value,
        tituloEsp: formTituloEsp.value,
        descricao: formDescricao.value,
        descricaoEng: formDescricaoEng.value,
        descricaoEsp: formDescricaoEsp.value,
        method: "patch"
    }
    $.post(url, dataBody, function(data){
        if(data){
            mensagemAlert.innerHTML = "O item foi alterado com sucesso!";
            alert.appendChild(mensagemAlert);
            alert.classList.add('alert-success');
            alert.classList.remove("d-none");
        }else{
            mensagemAlert.innerHTML = "Houve um problema na atualizacao do item! Verfique todos os campos.";
            alert.appendChild(mensagemAlert);
            alert.classList.add('alert-danger');
            alert.classList.remove("d-none");
        }
    }, "json");
})

//Caso o usuario clique em alguma CATEGORIA
Array.from(cat).forEach(el=>{
    el.addEventListener('click', function(event){
        event.preventDefault();
        formTitulo.value = "";
        formTituloEng.value = "";
        formTituloEsp.value = "";
        formDescricao.value = "";
        formDescricaoEng.value = "";
        formDescricaoEsp.value = "";
        formCategoria.value = "";
        formSubcategoria.value = "";
        formTitulo.setAttribute('readonly', true);
        formTituloEng.setAttribute('readonly', true);
        formTituloEsp.setAttribute('readonly', true);
        formDescricao.setAttribute('readonly', true);
        formDescricaoEng.setAttribute('readonly', true);
        formDescricaoEsp.setAttribute('readonly', true);
        atualizar.disabled = true;
    })
});

//Chamada da janela de confirmacao de delecao
var urlDelete = "";
Array.from(deleteItem).forEach(el=>{
    el.addEventListener('click', function(event){
        event.preventDefault();
        urlDelete = el.getAttribute('href');
        //Abrindo a janela de confirmacao
        $("#bd-confirmation-sm").modal();
    });
});
//Botao de confirmacao da janela
confirma.onclick = function(){
    location.href = urlDelete;
}

//Acao para o botao de bandeira EUA
euaFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 0.4;
    euaFlag.style.opacity = 1;
    removeFlagClass('eua');
});

//Acao para o botao de bandeira Esp
espFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espFlag.style.opacity = 1;
    euaFlag.style.opacity = 0.4;
    ptFlag.style.opacity = 0.4;
    removeFlagClass('esp');
});

//Acao para o botao de bandeira EUA
ptFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    ptFlag.style.opacity = 1;
    euaFlag.style.opacity = 0.4;
    espFlag.style.opacity = 0.4;
    removeFlagClass('pt');
});

//Acao para o botao de bandeira EUA
euaCatFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espCatFlag.style.opacity = 0.4;
    ptCatFlag.style.opacity = 0.4;
    euaCatFlag.style.opacity = 1;
    removeCatFlagClass('eua');
});

//Acao para o botao de bandeira Esp
espCatFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    espCatFlag.style.opacity = 1;
    euaCatFlag.style.opacity = 0.4;
    ptCatFlag.style.opacity = 0.4;
    removeCatFlagClass('esp');
});

//Acao para o botao de bandeira EUA
ptCatFlag.addEventListener('click', (ev)=>{
    //Colocando uma borda em volta para demonstrar selecao
    ptCatFlag.style.opacity = 1;
    euaCatFlag.style.opacity = 0.4;
    espCatFlag.style.opacity = 0.4;
    removeCatFlagClass('pt');
});

function removeFlagClass(flag){
    let eleEua = document.getElementsByClassName('eua');
    let elePt = document.getElementsByClassName('pt');
    let eleEsp = document.getElementsByClassName('esp');

    removeClass({eua: eleEua, pt: elePt, esp: eleEsp}, flag);
}

 //Removendo a flag class dos botes e bandeiras da janela de detalhes da categoria
 function removeCatFlagClass(flag){
    let eleEua = document.getElementsByClassName('cat-eua');
    let elePt = document.getElementsByClassName('cat-pt');
    let eleEsp = document.getElementsByClassName('cat-esp');

    removeClass({eua: eleEua, pt: elePt, esp: eleEsp}, flag);
}

function removeClass(...args){
    Array.from(args[0].eua).forEach(hit=>{
        args[1] === 'eua' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
    
    Array.from(args[0].pt).forEach(hit=>{
        args[1] === 'pt' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
    
    Array.from(args[0].esp).forEach(hit=>{
        args[1] === 'esp' ? hit.classList.remove('d-none') : hit.classList.add('d-none');
    });
}

Array.from(closeAlert).forEach(el=>{
    el.addEventListener('click', ev=>{
        let element = ev.path.filter(hit=>hit.id==="alert");
        element[0].classList.contains('alert-success') ? element[0].classList.remove('alert-success') : element[0].classList.remove('alert-danger');
        element[0].classList.add('d-none');
    })
});

//Recuperando o click do botao de detalhes da categoria
Array.from(updateCat).forEach(el=>{
  el.addEventListener('click', ev=>{
      ev.preventDefault();
      id = ev.target.dataset.id;
      url = `/admin/main/categoria/${id}`;
      $.get(url, function(data){
          if(data){ 
              console.log(data);
              catTitulo.value = data.categoria.titulo
              catTituloEng.value = data.categoria.tituloEng 
              catTituloEsp.value = data.categoria.tituloEsp
              catDescr.value = data.categoria.descricao
              catDescrEng.value = data.categoria.descricaoEng
              catDescrEsp.value = data.categoria.descricaoEsp
          }
        });
  })  
});

updateCategoria.addEventListener('click', ev=>{
    ev.preventDefault();
    if(catTitulo.value === "" || catTituloEng.value === "" || catTituloEsp.value === ""){
        catAlert.innerHTML = "Faltam dados no seu formulario";
        catAlert.style.color = "red"; 
    }
    let url = `/admin/categoria/${id}`;
    const dataBody = {
        titulo: catTitulo.value,
        tituloEng: catTituloEng.value,
        tituloEsp: catTituloEsp.value,
        descricao: catDescr.value,
        descricaoEng: catDescrEng.value,
        descricaoEsp: catDescrEsp.value,
        method: "patch"
    }
    $.post(url, dataBody, function(data){
        if(data){
            catAlert.innerHTML = "O item foi alterado com sucesso!";
            catAlert.style.color = "blue";
        }else{
            catAlert.innerHTML = "Houve um problema no update da categoria!";
            catAlert.style.color = "red";           
        }
    }, "json");
})
</file>

<file path="views/admin/newProduto.ejs">
<%- include('./header')%>
<!-- cadastro de header -->
<div class="header-title">NOVO PRODUTO</div>
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <img class="translater-icon" src="../../public/img/eng-flag.png" alt="" id="eua-flag">
      <img class="translater-icon" src="../../public/img/spain-flag.png" alt="" id="esp-flag">
      <img class="translater-icon" src="../../public/img/brazil-flag.png" alt="" id="pt-flag" class="active">
      <form action="/admin/produto" id="novo-produto" method="post" style="margin-top: 3rem;">
        <div class="form-group pt" style="margin-bottom: 5rem;">
            <input class="new-input" type="text" name="prodTitulo" placeholder="TITULO*" required>
        </div>
        <!-- Titulo em ingles -->
        <div class="form-group d-none eua" style="margin-bottom: 5rem;"> 
          <input class="new-input" type="text" name="prodTituloEng" placeholder="TITULO*" required>
        </div>
        <!-- Titulo em Espanhol -->
        <div class="form-group d-none esp" style="margin-bottom: 5rem;">
          <input class="new-input" type="text" name="prodTituloEsp" placeholder="TITULO*" required>
        </div>
        <div class="form-group pt" style="margin-bottom: 5rem;">
            <textarea class="new-input" name="prodDescricao" placeholder="DESCRICAO" cols="30" rows="5"></textarea>
        </div>
        <!-- Descricao em Ingles -->
        <div class="form-group d-none eua" style="margin-bottom: 5rem;">
          <textarea class="new-input" name="prodDescricaoEng" placeholder="DESCRICAO" cols="30" rows="5"></textarea>
        </div>
        <!-- Descricao em espanhol -->
        <div class="form-group d-none esp" style="margin-bottom: 5rem;">
          <textarea class="new-input" name="prodDescricaoEsp" placeholder="DESCRICAO" cols="30" rows="5"></textarea>
        </div>
        <div id="divCategoriaPai" class="form-group" style="margin-bottom: 5rem;">
            <!-- <label for="categoriaPai">Pertence a categoria</label> -->
            <select data-toggle="tooltip" data-placement="top" title="Pertence a categoria" class="form-control new-select" name="categoriaPai" id="categoriaPai" ></select>
        </div>
        <div id="divSubCategoria" class="form-group" style="margin-bottom: 5rem;">
            <!-- <label for="subCategoria">Pertence a subcategoria</label> -->
            <div class="input-group mb-5">
              <div class="input-group-prepend" id="modalCategoria" data-toggle="modal" data-target="#exampleModalCenter">
                <div class="input-text-prepend"><i class="fas fa-plus"style="color: white;"></i></div>
              </div>
              <select data-toggle="tooltip" data-placement="top" title="Pertence a subcategoria" class="form-control new-select" name="subCategoria" id="subCategoria"></select>
            </div>
            
        </div>
        <!-- <div class="form-group form-check mb-3">
            <input type="checkbox" class="form-check-input" id="subCategoriaChecked" name="subCategoriaChecked">Nao tenho subcategoria</input>
        </div> -->
        <div class="custom-control custom-switch mb-3">
          <input type="checkbox" class="custom-control-input" name="subCategoriaChecked" id="subCategoriaChecked">
          <label class="custom-control-label" for="subCategoriaChecked" style="color: black;">Nao tenho subcategoria</label>
      </div>
        <div class="pt-2 btn-finalizacao-acao" style="margin-top:40px;">
            <button class="btn btn-admin" type="submit">Salvar</button>
        </div>
    </form>
    </div>
  </div>

</div>
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content" style="background-color: #f0f3f5;">
        <div class="modal-header" style="background-color:#88B73A;">
          <h5 class="modal-title" id="exampleModalLongTitle"><strong style="color: white;">NOVA SUBCATEGORIA</strong><h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"><i class="fas fa-times-circle" style="color: white;"></i></span>
          </button>
        </div>
        <div class="modal-body">
          <form action="/admin/categoria" method="post">
            <div class="p-1" id="header">
              <div class="mb-5" style="display: flex; flex-direction: row; justify-content: space-between;">
                <span class="cabecalho-input-form" >Segmento</span>
                <!-- Os ids das flags sao diferentes do restante da aplicacao -->
                <div style="display: flex; justify-content: space-around; width: 25%;">
                  <img class="translater-icon" src="../../public/img/eng-flag.png" alt="" id="eua-cat-flag">
                  <img class="translater-icon" src="../../public/img/spain-flag.png" alt="" id="esp-cat-flag">
                  <img class="translater-icon" src="../../public/img/brazil-flag.png" alt="" id="pt-cat-flag" class="active">
                </div>
              </div>
              <div class="form-group mb-5 cat-pt">
                <input class="new-input" type="text" id="headerTitulo" placeholder="SEGMENTO*" name="headerTitulo" required>
              </div>
              <div class="form-group d-none mb-5 cat-eua">
                <input class="new-input" type="text" id="headerTituloEng" placeholder="SEGMENTO*" name="headerTituloEng" required>
              </div>
              <div class="form-group d-none mb-5 cat-esp">
                <input class="new-input" type="text" id="headerTituloEsp" placeholder="SEGMENTO*" name="headerTituloEsp" required>
              </div>
              <div class="form-group mb-5 d-none">
                <textarea class="new-input" id="headerDescricao" placeholder="DESCRICAO" name="headerDescricao" cols="30" rows="3"></textarea>
              </div>
              <div class="form-group mb-5 d-none">
                <textarea class="new-input" id="headerDescricaoEng" placeholder="DESCRICAO" name="headerDescricaoEng" cols="30" rows="3"></textarea>
              </div>
              <div class="form-group mb-5 d-none">
                <textarea class="new-input" id="headerDescricaoEsp" placeholder="DESCRICAO" name="headerDescricaoEsp" cols="30" rows="3"></textarea>
              </div>
            </div>
          <!-- cadastro de categoria -->
          <!-- Uma categoria nao pode ter o id proprio repetido dentro da tabela -->
            <div class="mt-1 p-1" id="categoria">
              <span class="cabecalho-input-form">Subcategoria</span>
              <div class="form-group cat-pt mb-5 mt-5">
                <input class="new-input" id="categoriaTitulo" placeholder="TITULO*"  type="text" name="categoriaTitulo" required>
              </div>
              <div class="form-group d-none mb-5 cat-eua">
                <input class="new-input" id="categoriaTituloEng" placeholder="TITULO*"  type="text" name="categoriaTituloEng" required>
              </div>
              <div class="form-group d-none mb-5 cat-esp">
                <input class="new-input" id="categoriaTituloEsp" placeholder="TITULO*"  type="text" name="categoriaTituloEsp" required>
              </div>
              <div class="form-group cat-pt">
                <textarea class="new-input" id="categoriaDescricao" placeholder="DESCRICAO"  name="categoriaDescricao" rows="3" cols="30"></textarea>
              </div>
              <div class="form-group d-none cat-eua">
                <textarea class="new-input" id="categoriaDescricaoEng" placeholder="DESCRICAO"  name="categoriaDescricaoEng" rows="3" cols="30"></textarea>
              </div>
              <div class="form-group d-none cat-esp">
                <textarea class="new-input" id="categoriaDescricaoEsp" placeholder="DESCRICAO"  name="categoriaDescricaoEsp" rows="3" cols="30"></textarea>
              </div>
            </div>
            <p id="msgsubinfo" style="font-family:'Times New Roman', Times, serif;"></p>
            <div class="pt-2 btn-finalizacao-acao">
              <button class="btn btn-admin" type="submit" id="newSubcategoria">Salvar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
<script src="../../public/javascript/admin/newProduto.js"></script>
<%- include('./footer')%>
</file>

<file path="views/portal/contato.ejs">
<%- include('./header') %>
<%- include('./banner', {title: t.contato.aplinovaIsAlways, imageUrl: './public/img/secao_contato.jpg'})%>

<div class="base-container mt-5">
  <div class="row">
    <div class="col-md-6">
      <div class="contato__container">
        <div class="contato__header">
          <i class="fas fa-square fas-sm mr-3"></i>
          <%- t.contato.letsChat %>
        </div>
        <div class="contato__content">
          <div class="contato__main-text py-3">
            <%- t.contato.fillOutThe %>
            <br><br>
            <%- t.home.orIfYou %>
            <a href="mailto:contato@aplinova.com.br"><b>contato@aplinova.com.br</b></a>
            <br><br>
          </div>
        </div>

      </div>
    </div>
    <div class="col-md-6 pt-2">
      <form>
        <div class="col-md-12 px-0">
          <div class="mb-5">
            <input class="input-form" type="text" name="nome" id="nome" placeholder="<%- t.contato.name %>" autofocus>
          </div>
          <div class="mb-5">
            <input class="input-form" type="text" name="email" id="email" placeholder="<%- t.contato.email %>" autofocus>
          </div>
          <div class="mb-5">
            <input class="input-form" type="text" name="telefone" id="telefone" placeholder="<%- t.contato.phone %>" autofocus>
          </div>
          <div class="mb-5">
            <input class="input-form" type="text" name="empresa" id="empresa" placeholder="<%- t.contato.company %>" autofocus>
          </div>
          <div class="mb-5">
            <textarea class="input-form" rows="5" cols="10" name="mensagem" id="mensagem" placeholder="<%- t.contato.message %>" autofocus></textarea>
          </div>
          <p id="demo"></p>
          <div class="mb-5">
            <button class="button-form" id="sendEmail"><%- t.contato.submit %></button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<script src="./public/javascript/portal/contato.js"></script>
<%- include('./footer') %>
</file>

<file path="views/portal/nossaempresa.ejs">
<%- include('./header') %>
<%- include('./banner', {title: t.nossaempresa.aTrajectoryBuilt, imageUrl: './public/img/empresa_banner.jpg'})%>

<div class="base-container mt-3 mt-md-5">
  <div class="row mb-5 py-3">
    <div class="col-lg-6">
      <div class="empresa__container">
        <div class="empresa__header">
          <i class="fas fa-square fas-sm mr-3"></i>
          <%- t.home.ourCompany %>
        </div>
        <div class="empresa__content">
          <div class="empresa__main-text pr-xl-3 pt-4">
            <%- t.home.foundedIn1987 %>
            <br><br>
            <%- t.home.aLongEstablished %>
            <br><br>
            <%- t.home.ourTeamIs %>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-6 px-0" style="background: no-repeat center/100% url('./public/img/nossa-empresa.jpg')">
    </div>
    <img class="mx-auto mt-5 d-none d-md-block d-lg-none" src="./public/img/nossa-empresa.jpg" alt="" style="object-fit: contain; max-width: 500px" />
  </div>
</div>
<div class="empresa__subheader"><%- t.nossaempresa.aplinovaStrivesFor %></div>
<div class="empresa-estrutura d-flex flex-wrap flex-row-reverse mt-5 mx-0 w-100">
  <div class="col-12 col-lg-6 empresa-estrutura__content base-padding-right">
    <div class="empresa-estrutura__header">
      <i class="fas fa-square fas-sm mr-3"></i>
      <b><%- t.nossaempresa.facilities %></b>
    </div>
    <div class="empresa-estrutura__text mt-4">
      <%- t.nossaempresa.aplinovasFacilitiesInclude %>
      <br><br>
      <%- t.nossaempresa.inAdditionTo %>
      <br><br>
      <%- t.nossaempresa.ourManufactoringUnit %>
    </div>
  </div>
  <img src="./public/img/estrutura.jpg" class="d-none d-md-block col-md-12 col-lg-6 p-0" style="object-fit: cover;" />
</div>

<div class="justify-content-center mt-4 my-md-5 text-capitalize empresa__header" style="margin-bottom: -0.75rem !important;">
  <i class="fas fa-square fas-sm mr-3"></i>
  <%- t.ourHistory.title %>
</div>
<div class="base-container my-3 my-md-5 timeline">
  <div class="timeline__container timeline__container--left">
    <div class="timeline__item timeline__item--first">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">1987</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year1987.title %></b><br/>
          <%- t.ourHistory.timeline.year1987.body %>
          <img src="./public/img/timeline_1.jpg" />
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2000</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2000.title %></b><br/>
          <%- t.ourHistory.timeline.year2000.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2009</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2009.title %></b><br/>
          <%- t.ourHistory.timeline.year2009.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2018</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2018.title %></b><br/>
          <%- t.ourHistory.timeline.year2018.body %>
          <img src="public/img/timeline_3.jpg" />
        </div>
      </div>
    </div>
    <div class="timeline__item ml-auto mb-0">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2020</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2020.title %></b><br/>
          <%- t.ourHistory.timeline.year2020.body %>
        </div>
      </div>
    </div>
  </div>
  <hr class="timeline__divider" />
  <div class="timeline__container">
    <div class="timeline__item timeline__item--first d-md-none">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">1987</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year1987.title %></b><br/>
          <%- t.ourHistory.timeline.year1987.body %>
          <img src="./public/img/timeline_1.jpg" />
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">1990</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year1990.title %></b><br/>
          <%- t.ourHistory.timeline.year1990.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">1995</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year1995.title %></b><br/>
          <%- t.ourHistory.timeline.year1995.body %>
          <img src="public/img/timeline_2.jpg" />
        </div>
      </div>
    </div>
    <div class="timeline__item d-md-none">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2000</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2000.title %></b><br/>
          <%- t.ourHistory.timeline.year2000.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item d-md-none">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2009</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2009.title %></b><br/>
          <%- t.ourHistory.timeline.year2009.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2017</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2017.title %></b><br/>
          <%- t.ourHistory.timeline.year2017.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item d-md-none">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2018</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2018.title %></b><br/>
          <%- t.ourHistory.timeline.year2018.body %>
          <img src="public/img/timeline_3.jpg" />
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2019</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2019b.title %></b><br/>
          <%- t.ourHistory.timeline.year2019b.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2019</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2019a.title %></b><br/>
          <%- t.ourHistory.timeline.year2019a.body %>
        </div>
      </div>
    </div>
    <div class="timeline__item mr-auto d-md-none">
      <div class="timeline__marker">
        <hr />
        <img src="./public/img/Bolota_timeline.svg" alt="" />
      </div>
      <div class="timeline__item-content">
        <div class="timeline__item-header">2020</div>
        <div class="timeline__item-body">
          <b><%- t.ourHistory.timeline.year2020.title %></b><br/>
          <%- t.ourHistory.timeline.year2020.body %>
        </div>
      </div>
    </div>
  </div>
</div>
<%- include('./footer') %>
</file>

<file path="public/stylesheets/components/home-partners.css">
.swiper-container {
    width: 100%;
    height: 300px;
}

.swiper-slide {
    width: 100%;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1rem;
}

.swiper-container-horizontal>.swiper-pagination-bullets {
    bottom: 0 !important;
}

.swiper-pagination-bullet.swiper-pagination-bullet-active {
    background-color: #88B73A;
}

.home-partners__slide-item {
    max-width: 45%;
    max-height: 100%;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: 0.5s ease all;
}

.home-partners__slide-item img {
    width: 100%;
}



@media (min-width: 641px) {
    .home-partners__slide-item {
        max-width: 15%;
        min-height: 60%;
        cursor: pointer;
        opacity: 0.75;
    }

    .home-partners__slide-item.home-partners__slide-item--smaller {
        max-width: 11.5%;
    }

    .home-partners__slide-item.home-partners__slide-item--bigger {
        max-width: 22%;
    }

    .home-partners__slide-item.home-partners__sethness {
        max-width: 18%;
    }

    .swiper-slide {
        justify-content: space-around;
    }
}

.home-partners__slide-item:hover {
    opacity: 1;
    transition: 0.5s ease all;
}

.home-partners__header {
    margin-top: 2rem;
    margin-right: 1rem;
    margin-left: 1rem;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    color: #292828;
    font-weight: 400;
    line-height: 1.25;
    font-size: 2.5rem;
}

.home-partners__header i {
    color: red;
    font-size: medium;
}

@media (max-width: 640px) {
    .home-partners__header {
        margin-top: 2rem;
        margin-right: 1rem;
        margin-left: 1rem;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        color: #292828;
        font-weight: 400;
        line-height: 1;
        font-size: 2rem;
    }
}

.home-partners__subheader {
    color: #292828;
    line-height: 1.25;
    font-size: 1.125rem;
    text-align: center;
    width: 60%;
    font-weight: 400;
    margin: 1rem auto;
}

@media (max-width: 640px) {
    .home-partners__subheader {
        width: 90%;
        text-align: left;
    }

    .swiper-container {
        width: 100%;
        height: 200px;
    }
}
</file>

<file path="views/admin/cards.ejs">
<!--****************************************************************************************************-->
<!--*****************************Foi retirado do principal*********************-->
<!--****************************************************************************************************-->
<div class="list-group">
<div class="alert alert-dismissible fade show d-none mb-0" id="alert"  role="alert">
  <strong>
  <i class="far fa-times-circle close"></i>
</div>
<div class="header-title">DETALHES</div>
<div class="container-fluid p-0 m-0">
    <div class="row mr-0 ml-0">
        <div id="treeviewDiv" class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 pl-0 treeview">
            <%if(error){%>
              <span style="color: red; margin-left: 20px; padding-left: 20px;"><%=error%></span>
            <%}%>
            <% categorias.forEach(element=>{%>
                <%if(element.idCategoria !== 0){%>
                    <ul class="treeview"> 
                        <li class="cat">
                            <i class="far fa-list-alt fa-lg" style="margin-right:10px; color: #353535;"></i>
                            <a href="#" style="color: #353535; flex-grow: 1;">
                                <%=element.titulo%>
                            </a>
                            <%if(usuario.admin && usuario.role === "desenvolvedor"){%>
                                <a href="#" class="update-cat" data-toggle="modal" data-target="#categoria-sm" data-id=<%=element.id%>>
                                    <i class="fas fa-edit fa-lg" data-id=<%=element.id%>></i>
                                </a>
                                <a href="/admin/categoria/<%=element.id%>?method=delete" class="deleteItem" data-method="delete">
                                    <i class="far fa-times-circle fa-lg" style="color: #88B73A;"></i>
                                </a>
                            <%}%>
                        </li>
                        <%if(element.produtos.length){%>
                            <ul class="notativo">
                            <%element.produtos.forEach(prod=>{%>
                                    <li class="subcat">
                                        <i class="fab fa-product-hunt fa-lg" style="color: #353535; margin-right:10px;"></i>
                                        <a href="#" class="details" style="flex-grow: 1; color:#353535" data-type="prod" data-id=<%=prod.id%>>
                                            <%=prod.titulo%>
                                        </a>
                                        <a href="/admin/produto/<%=prod.id%>?method=delete" class="deleteItem" data-method="delete">
                                            <i class="far fa-times-circle fa-lg" style="color: #88B73A;"></i>
                                        </a>
                                        
                                    </li> 
                            <%})%>
                            </ul>
                        <%}%>                  
                <%}%>
                    <%categorias.forEach(hit=>{%>
                        <%if(hit.idCategoria === 0 && hit.idCategoriaPai === element.idCategoria){%>
                            <ul class="notativo">
                                <li class="subcat">
                                    <i class="far fa-list-alt fa-lg" style="margin-right:10px; color: #353535;"></i>
                                    <a href="#" class="details" style="color:#353535; flex-grow: 1;" data-type="sub" data-id=<%=hit.id%>><%=hit.titulo%></a>
                                    <a href="/admin/subcategoria/<%=hit.id%>?method=delete" class="deleteItem">
                                        <i class="far fa-times-circle fa-lg" style="color: #88B73A;"></i>
                                    </a>
                                    
                                </li>
                                <%if(hit.produtos.length){%>
                                    <ul class="notativo">
                                    <%hit.produtos.forEach(prod=>{%>
                                        <li id="prod">
                                            <i class="fab fa-product-hunt fa-lg" style="color: #353535; margin-right:10px;"></i>
                                            <a href="#" class="details" style="flex-grow: 1; color:#353535" data-type="prod" data-id=<%=prod.id%>><%=prod.titulo%></a>
                                            <a href="/admin/produto/<%=prod.id%>?method=delete" class="deleteItem" data-method="delete">
                                                <i class="far fa-times-circle fa-lg" style="color: #88B73A;"></i>
                                            </a>
                                            
                                        </li>
                                    <%})%>
                                    </ul>
                                <%}%>
                            </ul> 
                        <%}%>
                    <%})%>         
                    </ul>
            <%})%>
            
        </div>
        <div class="d-none col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6" id="searchResult">
          <div class="d-none" id="divSubcategoria">  
          <h3>Subcategorias</h3>
            <div class="table-responsive">
            <table class="table table-sm table-hover">
                <thead>
                  <tr>
                    <th scope="col">id</th>
                    <th scope="col">Titulo</th>
                    <th scope="col">Descricao</th>
                    <th scope="col">Categoria</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="tableCategoria">
                  
                </tbody>
              </table>
            </div>
          </div>
          <div class="d-none" id="divProdutos">
              <h3>Produtos</h3>
              <div class="table-responsive">
            <table  class="table table-sm table-hover">
                <thead>
                  <tr>
                    <th scope="col">id</th>
                    <th scope="col">Titulo</th>
                    <th scope="col">Descricao</th>
                    <th scope="col">Categoria</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody id="tableProduto">
                  
                </tbody>
              </table>
            </div>
            </div>
        </div>
        <div class="col-md-6">
            <img class="translater-icon" src="./public/img/eng-flag.png" alt="" id="eua-flag">
            <img class="translater-icon" src="./public/img/spain-flag.png" alt="" id="esp-flag">
            <img class="translater-icon" src="./public/img/brazil-flag.png" alt="" id="pt-flag" class="active">
            <form class="form-mobile" action="/admin/produto" method="post">
                <div class="form-group pt">
                    <label for="prodTitulo">Titulo</label>
                    <input class="new-input form-control" type="text" name="prodTitulo" id="indextitulo" required>
                </div>
                <div class="form-group d-none eua">
                    <label for="prodTituloEng">Titulo</label>
                    <input class="new-input form-control" type="text" name="prodTituloEng" id="tituloEng" required>
                </div>
                <div class="form-group d-none esp">
                    <label for="prodTituloEsp">Titulo</label>
                    <input class="new-input form-control" type="text" name="prodTituloEsp" id="tituloEsp" required>
                </div>
                <div class="form-group pt">
                    <label for="prodDescricao">Descricao</label>
                    <textarea class="new-input form-control" name="prodDescricao" id="indexdescricao" cols="30" rows="10" required></textarea>
                </div>
                <div class="form-group d-none eua">
                    <label for="prodDescricaoEng">Descricao</label>
                    <textarea class="new-input form-control" name="prodDescricaoEng" id="descricaoEng" cols="30" rows="10" required></textarea>
                </div>
                <div class="form-group d-none esp">
                    <label for="prodDescricaoEsp">Descricao</label>
                    <textarea class="new-input form-control" name="prodDescricaoEsp" id="descricaoEsp" cols="30" rows="10" required></textarea>
                </div>
                <div id="divCategoriaPai" class="form-group">
                    <label for="categoria">Pertence a categoria</label>
                    <input class="new-input form-control" type="text" name="categoria" id="indexcategoria" readonly>
                </div>
                <div id="divSubCategoria" class="form-group">
                    <label for="subCategoria">Pertence a subcategoria</label>
                    <div class="input-group mb-2">
                    <input class="new-input form-control" type="text" name="subCategoria" id="indexsubCategoria" readonly>
                </div>
                <p id="demo" style="color:red; font-family:'Times New Roman', Times, serif;"></p>
                <div class="pt-2 btn-finalizacao-acao" style="margin-top:40px;">
                    <button class="btn btn-admin" id="atualizar" type="submit">Atualizar</button>
                </div>
            </form>
        </div>
    </div>
</div>
</div>

<!-- Confirmacao de delecao -->
<div class="modal fade" id="bd-confirmation-sm" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirma?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="row justify-content-start">
                                <button type="button" class="btn btn-success" id="confirma"  data-dismiss="modal">Sim</button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="row justify-content-end">
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Nao</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal para a categoria -->
<div class="modal fade" id="categoria-sm" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content" style="background-color: #f0f3f5;">
        <div class="modal-header" style="background-color:#88B73A;">
          <h5 class="modal-title" id="exampleModalLongTitle" ><strong style="color: white;">DETALHES CATEGORIA</strong><h5>
          <button type="button" class="btn" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true"><i class="fas fa-times-circle" style="color: white; font-size: 1.5rem;"></i></span>
          </button>
        </div>
        <div class="modal-body">
          <form action="/admin/categoria" method="post">
          <!-- cadastro de categoria -->
          <!-- Uma categoria nao pode ter o id proprio repetido dentro da tabela -->
            <div class="mt-1 p-1" id="categoria">
              <div class="mb-5" style="display: flex; flex-direction: row; justify-content: space-between;">
                <span class="cabecalho-input-form" style="font-weight: normal;">Categoria</span>
                <div style="display: flex; justify-content: space-around; width: 25%;">
                  <img class="translater-icon" src="../../public/img/eng-flag.png" alt="" id="eua-cat-flag">
                  <img class="translater-icon" src="../../public/img/spain-flag.png" alt="" id="esp-cat-flag">
                  <img class="translater-icon" src="../../public/img/brazil-flag.png" alt="" id="pt-cat-flag" class="active">
                </div>
              </div>
              <div class="form-group cat-pt mb-5">
                <input class="new-input" id="categoriaTitulo" placeholder="TITULO*"  type="text" name="categoriaTitulo" required>
              </div>
              <div class="form-group d-none mb-5 cat-eua">
                <input class="new-input" id="categoriaTituloEng" placeholder="TITULO*"  type="text" name="categoriaTituloEng" required>
              </div>
              <div class="form-group d-none mb-5 cat-esp">
                <input class="new-input" id="categoriaTituloEsp" placeholder="TITULO*"  type="text" name="categoriaTituloEsp" required>
              </div>
              <div class="form-group cat-pt">
                <textarea class="new-input" id="categoriaDescricao" placeholder="DESCRICAO"  name="categoriaDescricao" rows="3" cols="30"></textarea>
              </div>
              <div class="form-group d-none cat-eua">
                <textarea class="new-input" id="categoriaDescricaoEng" placeholder="DESCRICAO"  name="categoriaDescricaoEng" rows="3" cols="30"></textarea>
              </div>
              <div class="form-group d-none cat-esp">
                <textarea class="new-input" id="categoriaDescricaoEsp" placeholder="DESCRICAO"  name="categoriaDescricaoEsp" rows="3" cols="30"></textarea>
              </div>
            </div>
            <p id="cat-alert" style="color:red; font-family:'Times New Roman', Times, serif;"></p>
            <div class="pt-2 btn-finalizacao-acao">
              <button class="btn btn-admin" type="submit" id="updateCategoria">Alterar</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</file>

<file path="public/stylesheets/portal/produto-view.css">
.produto-view__categories {
    border-top: #292828 solid 4px;
    margin-left: 6rem;
    margin-right: calc(6rem + 16px);
    padding-top: 1.25rem;
}

.produto-view__banner {
    height: 80vh;
    opacity: 1;
    filter: brightness(90%);
}

.produto-view__banner:after {
    content: '';
    position: absolute;
    left:0;
    top:0;
    width: 100%;
    height: 100%;
    display: inline-block;
    background: linear-gradient(180deg, rgba(0,0,0,0.75) 0%, rgba(0,0,0,0) 83%);
}

.produto-view__categories.produto-view__categories--subcategories {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: flex-start;
    align-content: flex-start;
}

.produto-view__segments {
    background-color: #F0F6ED;
    font-size: 1.25rem;
}

.produto-view__segments i {
    color: red;
    font-size: small;
}

.produto-view__segments span {
    color: #292828;
    margin-left: 0.5rem;
    font-weight: normal;
}

.produto-view__title {
    font-size: 2.5rem;
    text-transform: uppercase;
    text-align: center;
}

.produto-view__title.produto-view__title--sm {
    font-size: 2.25rem;
}

.produto-view__title span {
    opacity: 100%;
    max-width: 100%;
    line-height: 1.2;
}

@media (max-width: 640px) {
    .produto-view__categories {
        margin-left: 3rem;
        margin-right: 3rem;
    }
}

@media (min-width: 768px) {
    .produto-view__categories--revconfeitaria .categoria-item,
    .produto-view__categories--prodveganos .subcategoria-item {
        width: 50%;
    }

    .produto-view__categories--foodservice .subcategoria-item {
        width: 33%;
    }

    .produto-view__categories--foodservice .subcategoria-item .subcategoria-item__title {
        width: 80%;
    }

    .produto-view__categories--foodservice .subcategoria-item .subcategoria-item__text {
        width: 90% !important;
    }

    .produto-view__categories--subacucar .subcategoria-item .subcategoria-item__title {
        min-width: 350px;
        width: 67%;
    }

    .produto-view__categories--proteinas .subcategoria-item .subcategoria-item__title,
    .produto-view__categories--prodveganos .subcategoria-item .subcategoria-item__title {
        min-width: 300px;
    }

    .produto-view__categories--ingfuncionais .subcategoria-item .subcategoria-item__title {
        min-width: 325px;
        max-width: 350px;
    }

    .produto-view__categories--ingfuncionais .subcategoria-item .subcategoria-item__list p {
        width: 300px !important;
    }

    .produto-view__categories--proteinas .subcategoria-item .subcategoria-item__text,
    .produto-view__categories--prodveganos .subcategoria-item .subcategoria-item__text,
    .produto-view__categories--ingfuncionais .subcategoria-item .subcategoria-item__text {
        width: 85% !important;
    }

    .produto-view__categories--prodveganos .subcategoria-item__list-container {
        margin-left: 1rem;
    }

    .produto-view__categories--subacucar .subcategoria-item__list-container {
        margin-left: -5rem;
    }
}

@media (min-width: 1440px) {
    .produto-view__categories--foodservice .subcategoria-item .subcategoria-item__title {
        width: 58%;
    }
}

@media (min-width: 640px) and (max-width: 961px) {
    .produto-view__categories--proteinas .subcategoria-item {
        align-items: flex-start;
    }
}

@media (max-width: 768px) {
    .produto-view__categories {
        margin-left: 1rem;
        margin-right: 1rem;
    }

    .produto-view__title {
        padding: 0 3rem;
        font-size: 2rem;
    }
}
</file>

<file path="views/portal/footer.ejs">
<div id="footer" class="footer row mx-0 w-100 base-container">
    <div class="col-md-4 px-0 mr-4">
        <div class="footer__header"><%- t.home.locations %></div>
        <div class="py-3 footer__subheader"><%- t.home.headquarters %></div>
        <div class="footer__text mb-2" style="width: 90%">
            <div>Rua Prof. Aprígio Gonzaga, 35 - Cj. 32</div>
            <div>04045-004, São Paulo - SP</div>
        </div>
        <a class="footer__link mb-5 mb-md-0" href="https://goo.gl/maps/g37JpLzQ1u4727KS8" target="_blank">
            <i class="fas fa-map-marker-alt mr-1"></i>
            <div><%- t.home.map %></div>
        </a>
    </div>
    <div class="col-md-3 d-none align-self-start px-0 mt-4" style="padding-top: 0.75rem;">
        <div class="py-3 footer__subheader"><%- t.home.manufacturingPlant %></div>
        <div class="footer__text">
            <div>Estrada Sartunino Pereira, 477</div>
            <div>08485-570, São Paulo - SP</div>
        </div>
    </div>
    <div class="col-md-3 ml-md-3 px-0" style="margin-bottom: 3rem;">
        <div class="footer__header" style="padding-bottom: 1.5rem;"><%- t.home.contact %></div>
        <div class="footer__text mb-4">
            <div>+55 11 2949-6644</div>
            <div>+55 11 96474-1323</div>
        </div>
        <a href="mailto:contato@aplinova.com.br" class="footer__subheader">contato@aplinova.com.br</a>
    </div>
    <div class="col-md-3 ml-auto py-3 px-0">
        <img src="./public/img/logo-light.svg" class="footer__logo" />
        <div class="footer__text pt-3"><%- t.home.allRightsReserved %></div>
        <div class="mt-2 footer_social-icons">
            <a href="https://www.facebook.com/Aplinova-102131328236799/?modal=admin_todo_tour" target="_blank" class="fab fa-facebook-f"></a>
            <a href="https://www.linkedin.com/company/1994181" target="_blank" class="fab fa-linkedin-in"></a>
        </div>
    </div>
    </div>
</div>
</div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="./public/javascript/portal/navbar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </body>
</html>
</file>

</files>
